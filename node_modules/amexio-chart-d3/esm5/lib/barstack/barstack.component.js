/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, Output, ViewChild, ElementRef, EventEmitter } from '@angular/core';
import * as d3 from 'd3';
import { AmexioD3BaseChartComponent } from '../base/base.component';
import { CommanDataService } from '../services/comman.data.service';
import { DeviceQueryService } from '../services/device.query.service';
var BarstackComponent = /** @class */ (function (_super) {
    tslib_1.__extends(BarstackComponent, _super);
    function BarstackComponent(myservice, device) {
        var _this = _super.call(this, 'barstack') || this;
        _this.myservice = myservice;
        _this.device = device;
        _this.maxYValue = 0;
        _this.barwidth = 0;
        _this.labelflag = false;
        _this.title = "";
        _this.legend = true;
        _this.labelcolor = "black";
        _this.color = [];
        _this.svgwidth = 300;
        _this.level = 0;
        _this.drillabledatakey = [];
        _this.hScale = true;
        _this.drillableFlag = true;
        _this.resizeflag = false;
        _this.svgheight = 300;
        _this.onLegendClick = new EventEmitter();
        return _this;
    }
    /**
     * @return {?}
     */
    BarstackComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.level <= 1) {
            /** @type {?} */
            var res = void 0;
            if (this.httpmethod && this.httpurl) {
                this.myservice.fetchUrlData(this.httpurl, this.httpmethod).subscribe(function (response) {
                    //this.data = response;
                    _this.httpresponse = response;
                    _this.data = _this.getResponseData(response);
                }, function (error) {
                }, function () {
                    setTimeout(function () {
                        _this.transformData(_this.data);
                        _this.plotChart();
                    }, 0);
                });
            }
            else if (this.data1) {
                setTimeout(function () {
                    _this.transformData(_this.data1);
                    _this.plotChart();
                }, 0);
            }
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    BarstackComponent.prototype.fetchData = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        /** @type {?} */
        var requestJson;
        /** @type {?} */
        var key = this.drillabledatakey;
        /** @type {?} */
        var resp;
        if (this.drillabledatakey.length) {
            /** @type {?} */
            var drillabledata = this.getMultipleDrillbleKeyData(data, key);
            requestJson = drillabledata;
        }
        else {
            requestJson = data;
        }
        if (this.httpmethod && this.httpurl) {
            this.myservice.postfetchData(this.httpurl, this.httpmethod, requestJson).subscribe(function (response) {
                resp = response;
                _this.httpresponse = response;
            }, function (error) {
            }, function () {
                setTimeout(function () {
                    //this.data = this.getResponseData(resp);
                    _this.drawChart();
                }, 0);
            });
        }
    };
    /**
     * @return {?}
     */
    BarstackComponent.prototype.drawChart = /**
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout(function () {
            _this.data = _this.getResponseData(_this.httpresponse);
            _this.transformData(_this.data);
            _this.plotChart();
        }, 0);
    };
    /**
     * @param {?} data1
     * @return {?}
     */
    BarstackComponent.prototype.transformData = /**
     * @param {?} data1
     * @return {?}
     */
    function (data1) {
        var _this = this;
        this.keyArray = [];
        this.legendArray = [];
        data1.forEach(function (element, i) {
            if (i == 0) {
                element.forEach(function (innerelement, index) {
                    if (index > 0) {
                        _this.legendArray[innerelement] = { 'data': [] };
                        _this.keyArray.push(innerelement);
                    }
                    else if (index == 0) {
                        _this.xaxis = innerelement;
                    }
                });
            }
        });
        /** @type {?} */
        var tempinnerarray;
        tempinnerarray = [];
        data1.forEach(function (element, index) {
            if (index > 0) {
                /** @type {?} */
                var obj_1 = {};
                element.forEach(function (innerelement, innerindex) {
                    if (innerindex >= 0) {
                        /** @type {?} */
                        var key = _this.keyArray[innerindex - 1];
                        obj_1[key] = element[innerindex];
                        /** @type {?} */
                        var legenddata = _this.legendArray[key];
                        if (legenddata) {
                            legenddata.data.push({ 'value': element[innerindex], 'label': element[0] });
                        }
                    }
                });
                tempinnerarray.push(obj_1);
            }
        });
        this.data = [];
        tempinnerarray.forEach(function (element) {
            _this.data.push(element);
        });
        /** @type {?} */
        var maxY = 0;
        /** @type {?} */
        var yaxismaxArray = [];
        //find max for yaxis
        this.data.forEach(function (element) {
            var _loop_1 = function (key, value) {
                _this.keyArray.forEach(function (key1) {
                    if (key == key1) {
                        maxY = maxY + value;
                    }
                }); //keyarray loop ends here
            };
            try {
                for (var _a = tslib_1.__values(Object.entries(element)), _b = _a.next(); !_b.done; _b = _a.next()) {
                    var _c = tslib_1.__read(_b.value, 2), key = _c[0], value = _c[1];
                    _loop_1(key, value);
                } //for ends here
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_b && !_b.done && (_d = _a.return)) _d.call(_a);
                }
                finally { if (e_1) throw e_1.error; }
            }
            yaxismaxArray.push(maxY);
            maxY = 0;
            var e_1, _d;
        }); // foreach ends
        // foreach ends
        /** @type {?} */
        var tempLarge = 0;
        /** @type {?} */
        var i;
        for (i = 0; i < yaxismaxArray.length; i++) {
            if (yaxismaxArray[i] > tempLarge) {
                this.maxYValue = yaxismaxArray[i];
            } //if ends
        } // for ends
        this.legends = [];
        this.keyArray.forEach(function (element, index) {
            /** @type {?} */
            var legenddata = _this.legendArray[element];
            if (_this.color.length > 0) {
                /** @type {?} */
                var object = { 'label': element, 'color': _this.color[index], 'data': legenddata.data };
                _this.legends.push(object);
            }
            else {
                /** @type {?} */
                var object = { 'label': element, 'color': _this.predefinedcolors[index], 'data': legenddata.data };
                _this.legends.push(object);
            }
        });
    };
    /**
     * @return {?}
     */
    BarstackComponent.prototype.plotChart = /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var tooltip = this.toolTip(d3);
        /** @type {?} */
        var margin = { top: 20, right: 30, bottom: 90, left: 60 };
        /** @type {?} */
        var colors = this.predefinedcolors;
        if (this.device.IsDesktop()) {
            if (this.chartId) {
                this.svgwidth = this.chartId.nativeElement.offsetWidth;
            }
            else {
                this.svgwidth = this.svgwidth;
            }
        }
        //this.svgwidth = this.chartId.nativeElement.offsetWidth;
        /** @type {?} */
        var data;
        data = this.data;
        /** @type {?} */
        var keysetarray = [];
        if (this.httpmethod && this.httpurl) {
            try {
                for (var _a = tslib_1.__values(Object.entries(this.data[0])), _b = _a.next(); !_b.done; _b = _a.next()) {
                    var _c = tslib_1.__read(_b.value, 2), key = _c[0], value = _c[1];
                    keysetarray.push(key);
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_b && !_b.done && (_d = _a.return)) _d.call(_a);
                }
                finally { if (e_2) throw e_2.error; }
            }
            this.keyArray = keysetarray;
            this.keyArray.splice(0, 1);
        }
        /** @type {?} */
        var series = d3.stack().keys(this.keyArray)
            .offset(d3.stackOffsetDiverging)(this.data);
        series;
        this.svg = d3.select("#" + this.componentId);
        /** @type {?} */
        var width = this.svgwidth - margin.left - margin.right;
        /** @type {?} */
        var height;
        // height=this.chartId.nativeElement.offsetHeight-20;
        if (this.device.IsDesktop()) {
            this.offsetheight = this.chartId.nativeElement.offsetHeight;
            height = this.offsetheight;
        }
        else {
            height = this.chartId.nativeElement.offsetHeight - 10;
        }
        /** @type {?} */
        var x = d3.scaleBand()
            .domain(data.map(function (d) {
            return d[Object.keys(d)[0]];
        }))
            .rangeRound([margin.left, width - margin.right])
            .padding(0.35);
        /** @type {?} */
        var y = d3.scaleLinear()
            .domain([d3.min(this.stackMin(series)),
            this.maxYValue
            // d3.max(this.stackMax(series))
        ])
            .rangeRound([height - margin.bottom, margin.top]);
        // if (this.barwidth > 0) {
        //   this.barwidth = this.barwidth;
        // }
        // else {
        //   this.barwidth = x.bandwidth();
        // }
        if (this.device.IsDesktop() == true) {
            this.svg.append("g")
                .attr("transform", "translate(0," + y(0) + ")")
                .call(d3.axisBottom(x));
        }
        else {
            this.svg.append("g")
                .attr("transform", "translate(0," + y(0) + ")")
                .call(d3.axisBottom(x)).
                selectAll("text")
                .attr("y", 0)
                .attr("x", 9)
                .attr("dy", ".35em")
                .attr("transform", "rotate(60)")
                .style("text-anchor", "start");
        }
        this.svg.append("g")
            .attr("transform", "translate(" + margin.left + ",0)")
            .call(d3.axisLeft(y));
        this.plotLine(this.svg, x, y, height, width, margin.left);
        /** @type {?} */
        var svgRect = this.svg.append("g")
            .selectAll("g")
            .data(series)
            .enter().append("g")
            .attr("fill", function (d, index) {
            if (_this.color.length > 0) {
                if (_this.color[index]) {
                    return _this.color[index];
                }
                else {
                    return colors[index];
                }
            }
            else {
                return colors[index];
            }
        })
            .selectAll("rect")
            .data(function (d) {
            return d;
        });
        svgRect.enter().append("rect")
            .attr("width", x.bandwidth()).attr('id', function (d, i) {
            return d.data[i];
        })
            .attr("x", function (d) {
            return x(+d.data[Object.keys(d.data)[0]]);
        })
            .attr("y", function (d, index) {
            return y(d[1]);
        })
            .attr("cursor", "pointer")
            .attr("height", function (d, index) {
            return y(d[0]) - y(d[1]);
        })
            .on("mouseover", function (d) {
            return tooltip.style("visibility", "visible");
        })
            .on("mousemove", function (d) {
            return tooltip.html(_this.setKey(d))
                .style("top", (d3.event.pageY - 10) + "px")
                .style("left", (d3.event.pageX + 10) + "px");
        })
            .on("mouseout", function (d) {
            return tooltip.style("visibility", "hidden");
        })
            .on("click", function (d) {
            _this.setBarClickText(d);
            _this.fordrillableClick(_this, d, event);
            return tooltip.style("visibility", "hidden");
            // this.chartClick(d);
        });
        // -------------------------
        if (this.labelflag) {
            svgRect.enter()
                .append("text")
                .style("font-weight", "bold")
                .style("font-size", "1vw")
                .attr("text-anchor", "middle")
                .attr("fill", function (d) {
                if (_this.labelcolor.length > 0) {
                    return _this.labelcolor;
                }
                else {
                    return "black";
                }
            })
                .attr("x", function (d) {
                return x(+d.data[Object.keys(d.data)[0]]) + x.bandwidth() / 2;
                // +  margin.left;
            })
                .attr("y", function (d, index) {
                return y(d[1]) + 20;
            })
                .text(function (d) {
                return d[Object.keys(d)[1]] - d[Object.keys(d)[0]];
            });
        }
        var e_2, _d;
    };
    /**
     * @param {?} serie
     * @return {?}
     */
    BarstackComponent.prototype.stackMin = /**
     * @param {?} serie
     * @return {?}
     */
    function (serie) {
        return d3.min(serie, function (d) { return d[0]; });
    };
    // stackMax(serie) {
    //   return d3.max(serie, function (d) { return d[1]; });
    // }
    // stackMax(serie) {
    //   return d3.max(serie, function (d) { return d[1]; });
    // }
    /**
     * @return {?}
     */
    BarstackComponent.prototype.resize = 
    // stackMax(serie) {
    //   return d3.max(serie, function (d) { return d[1]; });
    // }
    /**
     * @return {?}
     */
    function () {
        this.svgwidth = 0;
        this.svg.selectAll("*").remove();
        this.resizeflag = true;
        this.svgwidth = this.divid.nativeElement.offsetWidth;
        this.plotChart();
    };
    /**
     * @param {?} svg
     * @param {?} x
     * @param {?} y
     * @param {?} height
     * @param {?} width
     * @param {?} m
     * @return {?}
     */
    BarstackComponent.prototype.plotLine = /**
     * @param {?} svg
     * @param {?} x
     * @param {?} y
     * @param {?} height
     * @param {?} width
     * @param {?} m
     * @return {?}
     */
    function (svg, x, y, height, width, m) {
        if (this.hScale) {
            svg.append('g')
                .attr("transform", "translate(" + m + ",0)")
                .attr("color", "lightgrey")
                .call(d3.axisLeft(y)
                .tickSize(-width).tickFormat(''));
        }
    };
    /**
     * @param {?} event
     * @return {?}
     */
    BarstackComponent.prototype.legendClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var obj = {};
        obj["label"] = event.label;
        /** @type {?} */
        var data = [];
        event.data.forEach(function (element) {
            /** @type {?} */
            var object = {};
            object[element.label] = element.value;
            data.push(object);
        });
        obj["data"] = data;
        this.onLegendClick.emit(obj);
    };
    /**
     * @param {?} d
     * @return {?}
     */
    BarstackComponent.prototype.setKey = /**
     * @param {?} d
     * @return {?}
     */
    function (d) {
        /** @type {?} */
        var diff = d[0] - d[1];
        if (diff < 0) {
            diff = (diff * (-1));
        }
        try {
            for (var _a = tslib_1.__values(Object.entries(d.data)), _b = _a.next(); !_b.done; _b = _a.next()) {
                var _c = tslib_1.__read(_b.value, 2), key = _c[0], value = _c[1];
                if (value == diff) {
                    //  let object = { 'label': key, 'value': value , 'legend': d.data[Object.keys(d.data)[0]]};
                    /** @type {?} */
                    var object = {};
                    object[key] = value;
                    object[this.xaxis] = d.data[Object.keys(d.data)[0]];
                    return (this.toolTipForBar(object));
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (_b && !_b.done && (_d = _a.return)) _d.call(_a);
            }
            finally { if (e_3) throw e_3.error; }
        }
        var e_3, _d;
    };
    /**
     * @param {?} d
     * @return {?}
     */
    BarstackComponent.prototype.setBarClickText = /**
     * @param {?} d
     * @return {?}
     */
    function (d) {
        /** @type {?} */
        var diff = d[0] - d[1];
        if (diff < 0) {
            diff = (diff * (-1));
        }
        // let object = {};
        /** @type {?} */
        var object = {};
        try {
            for (var _a = tslib_1.__values(Object.entries(d.data)), _b = _a.next(); !_b.done; _b = _a.next()) {
                var _c = tslib_1.__read(_b.value, 2), key = _c[0], value = _c[1];
                if (value == diff) {
                    object[key] = value;
                    object[this.xaxis] = d.data[Object.keys(d.data)[0]];
                }
            }
        }
        catch (e_4_1) { e_4 = { error: e_4_1 }; }
        finally {
            try {
                if (_b && !_b.done && (_d = _a.return)) _d.call(_a);
            }
            finally { if (e_4) throw e_4.error; }
        }
        this.chartClick(object);
        var e_4, _d;
    };
    /**
     * @param {?} httpResponse
     * @return {?}
     */
    BarstackComponent.prototype.getResponseData = /**
     * @param {?} httpResponse
     * @return {?}
     */
    function (httpResponse) {
        /** @type {?} */
        var responsedata = httpResponse;
        if (this.datareader != null) {
            /** @type {?} */
            var dr = this.datareader.split('.');
            try {
                for (var dr_1 = tslib_1.__values(dr), dr_1_1 = dr_1.next(); !dr_1_1.done; dr_1_1 = dr_1.next()) {
                    var ir = dr_1_1.value;
                    responsedata = responsedata[ir];
                }
            }
            catch (e_5_1) { e_5 = { error: e_5_1 }; }
            finally {
                try {
                    if (dr_1_1 && !dr_1_1.done && (_a = dr_1.return)) _a.call(dr_1);
                }
                finally { if (e_5) throw e_5.error; }
            }
        }
        else {
            responsedata = httpResponse;
        }
        return responsedata;
        var e_5, _a;
    };
    BarstackComponent.decorators = [
        { type: Component, args: [{
                    selector: 'amexio-d3-chart-barstack',
                    template: "<div   *ngIf=\"drillableFlag\" #divid (window:resize)=\"resize()\">\n<table style=\"width: 100%;\" #chartId  (window:resize)=\"resize()\">\n  <tr><td style=\"font-size: 18px; font-weight: bold; \"> {{title}} </td></tr>\n  <tr>\n      <td>\n          <svg [attr.height]=\"svgheight\" [attr.width]=\"svgwidth\" [attr.id]=\"componentId\">\n          </svg>            \n      </td>\n  </tr>\n  <tr>\n      <td style=\"display: block; padding: 5px;\">\n              <amexio-d3-legend *ngIf=\"legend\" [horizontal]=\"true\" (onClick)=\"legendClick($event)\" \n                                  [data]=\"legends\" style=\"height:100%;\">\n              </amexio-d3-legend>\n      </td>\n  \n  </tr>\n</table>\n</div>",
                    styles: [""]
                },] },
    ];
    BarstackComponent.ctorParameters = function () { return [
        { type: CommanDataService },
        { type: DeviceQueryService }
    ]; };
    BarstackComponent.propDecorators = {
        data1: [{ type: Input, args: ['data',] }],
        barwidth: [{ type: Input }],
        labelflag: [{ type: Input, args: ['label',] }],
        title: [{ type: Input }],
        legend: [{ type: Input }],
        labelcolor: [{ type: Input, args: ['label-color',] }],
        color: [{ type: Input }],
        svgwidth: [{ type: Input, args: ['width',] }],
        datareader: [{ type: Input, args: ['data-reader',] }],
        level: [{ type: Input, args: ['level',] }],
        target: [{ type: Input, args: ['target',] }],
        drillabledatakey: [{ type: Input, args: ['drillable-data',] }],
        hScale: [{ type: Input, args: ['horizontal-scale',] }],
        svgheight: [{ type: Input, args: ['height',] }],
        chartId: [{ type: ViewChild, args: ['chartId',] }],
        divid: [{ type: ViewChild, args: ['divid',] }],
        drillid: [{ type: ViewChild, args: ['drillid',] }],
        onLegendClick: [{ type: Output }]
    };
    return BarstackComponent;
}(AmexioD3BaseChartComponent));
export { BarstackComponent };
if (false) {
    /** @type {?} */
    BarstackComponent.prototype.legendArray;
    /** @type {?} */
    BarstackComponent.prototype.maxYValue;
    /** @type {?} */
    BarstackComponent.prototype.keyArray;
    /** @type {?} */
    BarstackComponent.prototype.predefinedcolors;
    /** @type {?} */
    BarstackComponent.prototype.legends;
    /** @type {?} */
    BarstackComponent.prototype.charttype;
    /** @type {?} */
    BarstackComponent.prototype.data;
    /** @type {?} */
    BarstackComponent.prototype.datareaderdata;
    /** @type {?} */
    BarstackComponent.prototype.xaxis;
    /** @type {?} */
    BarstackComponent.prototype.data1;
    /** @type {?} */
    BarstackComponent.prototype.barwidth;
    /** @type {?} */
    BarstackComponent.prototype.labelflag;
    /** @type {?} */
    BarstackComponent.prototype.title;
    /** @type {?} */
    BarstackComponent.prototype.legend;
    /** @type {?} */
    BarstackComponent.prototype.labelcolor;
    /** @type {?} */
    BarstackComponent.prototype.color;
    /** @type {?} */
    BarstackComponent.prototype.svgwidth;
    /** @type {?} */
    BarstackComponent.prototype.datareader;
    /** @type {?} */
    BarstackComponent.prototype.level;
    /** @type {?} */
    BarstackComponent.prototype.target;
    /** @type {?} */
    BarstackComponent.prototype.drillabledatakey;
    /** @type {?} */
    BarstackComponent.prototype.hScale;
    /** @type {?} */
    BarstackComponent.prototype.drillableFlag;
    /** @type {?} */
    BarstackComponent.prototype.resizeflag;
    /** @type {?} */
    BarstackComponent.prototype.svgheight;
    /** @type {?} */
    BarstackComponent.prototype.chartId;
    /** @type {?} */
    BarstackComponent.prototype.divid;
    /** @type {?} */
    BarstackComponent.prototype.drillid;
    /** @type {?} */
    BarstackComponent.prototype.onLegendClick;
    /** @type {?} */
    BarstackComponent.prototype.httpresponse;
    /** @type {?} */
    BarstackComponent.prototype.svg;
    /** @type {?} */
    BarstackComponent.prototype.offsetheight;
    /** @type {?} */
    BarstackComponent.prototype.myservice;
    /** @type {?} */
    BarstackComponent.prototype.device;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFyc3RhY2suY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW1leGlvLWNoYXJ0LWQzLyIsInNvdXJjZXMiOlsibGliL2JhcnN0YWNrL2JhcnN0YWNrLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBcUIsTUFBTSxlQUFlLENBQUM7QUFDekgsT0FBTyxLQUFLLEVBQUUsTUFBTSxJQUFJLENBQUM7QUFDekIsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDcEUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDcEUsT0FBTSxFQUFDLGtCQUFrQixFQUFDLE1BQU0sa0NBQWtDLENBQUM7QUFFbkU7SUF1QnVDLDZDQUEwQjtJQWlDL0QsMkJBQW9CLFNBQTRCLEVBQVMsTUFBeUI7UUFBbEYsWUFDRSxrQkFBTSxVQUFVLENBQUMsU0FDbEI7UUFGbUIsZUFBUyxHQUFULFNBQVMsQ0FBbUI7UUFBUyxZQUFNLEdBQU4sTUFBTSxDQUFtQjtRQS9CbEYsZUFBUyxHQUFXLENBQUMsQ0FBQztRQVNiLGNBQVEsR0FBVyxDQUFDLENBQUM7UUFDZCxlQUFTLEdBQVksS0FBSyxDQUFDO1FBQ2xDLFdBQUssR0FBVyxFQUFFLENBQUM7UUFDbkIsWUFBTSxHQUFZLElBQUksQ0FBQztRQUNWLGdCQUFVLEdBQVcsT0FBTyxDQUFDO1FBQzFDLFdBQUssR0FBYSxFQUFFLENBQUM7UUFDZCxjQUFRLEdBQVMsR0FBRyxDQUFDO1FBRXJCLFdBQUssR0FBVyxDQUFDLENBQUM7UUFFVCxzQkFBZ0IsR0FBVSxFQUFFLENBQUE7UUFDMUIsWUFBTSxHQUFZLElBQUksQ0FBQztRQUNsRCxtQkFBYSxHQUFZLElBQUksQ0FBQztRQUM5QixnQkFBVSxHQUFZLEtBQUssQ0FBQztRQUNY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QUFRO21DQUNkLEtBQUssU0FBQyxnQkFBZ0I7eUJBQ3RCLEtBQUssU0FBQyxrQkFBa0I7NEJBR3hCLEtBQUssU0FBQyxRQUFROzBCQUNkLFNBQVMsU0FBQyxTQUFTO3dCQUNuQixTQUFTLFNBQUMsT0FBTzswQkFDakIsU0FBUyxTQUFDLFNBQVM7Z0NBQ25CLE1BQU07O0lBbWFULHdCQUFDO0NBQUEsQUF2ZEQsQ0F1QnVDLDBCQUEwQixHQWdjaEU7U0FoY1ksaUJBQWlCOzs7SUFDNUIsd0NBQW1COztJQUNuQixzQ0FBc0I7O0lBQ3RCLHFDQUFnQjs7SUFDaEIsNkNBQXdCOztJQUN4QixvQ0FBZTs7SUFDZixzQ0FBa0I7O0lBQ2xCLGlDQUFZOztJQUNaLDJDQUFzQjs7SUFDdEIsa0NBQVc7O0lBQ1gsa0NBQXlCOztJQUN6QixxQ0FBOEI7O0lBQzlCLHNDQUEyQzs7SUFDM0Msa0NBQTRCOztJQUM1QixtQ0FBZ0M7O0lBQ2hDLHVDQUFtRDs7SUFDbkQsa0NBQThCOztJQUM5QixxQ0FBcUM7O0lBQ3JDLHVDQUFzQzs7SUFDdEMsa0NBQWtDOztJQUNsQyxtQ0FBZ0M7O0lBQ2hDLDZDQUFxRDs7SUFDckQsbUNBQWtEOztJQUNsRCwwQ0FBOEI7O0lBQzlCLHVDQUE0Qjs7SUFDNUIsc0NBQXlDOztJQUN6QyxvQ0FBMEM7O0lBQzFDLGtDQUFzQzs7SUFDdEMsb0NBQW1DOztJQUNuQywwQ0FBdUQ7O0lBQ3ZELHlDQUFrQjs7SUFDbEIsZ0NBQVM7O0lBQ1QseUNBQWlCOztJQUNMLHNDQUFvQzs7SUFBQyxtQ0FBaUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIE91dHB1dCwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIENoYW5nZURldGVjdG9yUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgeyBBbWV4aW9EM0Jhc2VDaGFydENvbXBvbmVudCB9IGZyb20gJy4uL2Jhc2UvYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ29tbWFuRGF0YVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9jb21tYW4uZGF0YS5zZXJ2aWNlJztcbmltcG9ydHtEZXZpY2VRdWVyeVNlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2VzL2RldmljZS5xdWVyeS5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYW1leGlvLWQzLWNoYXJ0LWJhcnN0YWNrJyxcbiAgdGVtcGxhdGU6IGA8ZGl2ICAgKm5nSWY9XCJkcmlsbGFibGVGbGFnXCIgI2RpdmlkICh3aW5kb3c6cmVzaXplKT1cInJlc2l6ZSgpXCI+XG48dGFibGUgc3R5bGU9XCJ3aWR0aDogMTAwJTtcIiAjY2hhcnRJZCAgKHdpbmRvdzpyZXNpemUpPVwicmVzaXplKClcIj5cbiAgPHRyPjx0ZCBzdHlsZT1cImZvbnQtc2l6ZTogMThweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IFwiPiB7e3RpdGxlfX0gPC90ZD48L3RyPlxuICA8dHI+XG4gICAgICA8dGQ+XG4gICAgICAgICAgPHN2ZyBbYXR0ci5oZWlnaHRdPVwic3ZnaGVpZ2h0XCIgW2F0dHIud2lkdGhdPVwic3Znd2lkdGhcIiBbYXR0ci5pZF09XCJjb21wb25lbnRJZFwiPlxuICAgICAgICAgIDwvc3ZnPiAgICAgICAgICAgIFxuICAgICAgPC90ZD5cbiAgPC90cj5cbiAgPHRyPlxuICAgICAgPHRkIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHBhZGRpbmc6IDVweDtcIj5cbiAgICAgICAgICAgICAgPGFtZXhpby1kMy1sZWdlbmQgKm5nSWY9XCJsZWdlbmRcIiBbaG9yaXpvbnRhbF09XCJ0cnVlXCIgKG9uQ2xpY2spPVwibGVnZW5kQ2xpY2soJGV2ZW50KVwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkYXRhXT1cImxlZ2VuZHNcIiBzdHlsZT1cImhlaWdodDoxMDAlO1wiPlxuICAgICAgICAgICAgICA8L2FtZXhpby1kMy1sZWdlbmQ+XG4gICAgICA8L3RkPlxuICBcbiAgPC90cj5cbjwvdGFibGU+XG48L2Rpdj5gLFxuICBzdHlsZXM6IFtgYF1cbn0pXG5leHBvcnQgY2xhc3MgQmFyc3RhY2tDb21wb25lbnQgZXh0ZW5kcyBBbWV4aW9EM0Jhc2VDaGFydENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIGxlZ2VuZEFycmF5OiBhbnlbXTtcbiAgbWF4WVZhbHVlOiBudW1iZXIgPSAwO1xuICBrZXlBcnJheTogYW55W107XG4gIHByZWRlZmluZWRjb2xvcnM6IGFueVtdO1xuICBsZWdlbmRzOiBhbnlbXTtcbiAgY2hhcnR0eXBlOiBzdHJpbmc7XG4gIGRhdGE6IGFueVtdO1xuICBkYXRhcmVhZGVyZGF0YTogYW55W107XG4gIHhheGlzOiBhbnk7XG4gIEBJbnB1dCgnZGF0YScpIGRhdGExOiBhbnlcbiAgQElucHV0KCkgYmFyd2lkdGg6IG51bWJlciA9IDA7XG4gIEBJbnB1dCgnbGFiZWwnKSBsYWJlbGZsYWc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCkgdGl0bGU6IFN0cmluZyA9IFwiXCI7XG4gIEBJbnB1dCgpIGxlZ2VuZDogYm9vbGVhbiA9IHRydWU7XG4gIEBJbnB1dCgnbGFiZWwtY29sb3InKSBsYWJlbGNvbG9yOiBzdHJpbmcgPSBcImJsYWNrXCI7XG4gIEBJbnB1dCgpIGNvbG9yOiBzdHJpbmdbXSA9IFtdO1xuICBASW5wdXQoJ3dpZHRoJykgc3Znd2lkdGg6IG51bWJlcj0zMDA7XG4gIEBJbnB1dCgnZGF0YS1yZWFkZXInKSBkYXRhcmVhZGVyOiBhbnk7XG4gIEBJbnB1dCgnbGV2ZWwnKSBsZXZlbDogbnVtYmVyID0gMDtcbiAgQElucHV0KCd0YXJnZXQnKSB0YXJnZXQ6IG51bWJlcjtcbiAgQElucHV0KCdkcmlsbGFibGUtZGF0YScpIGRyaWxsYWJsZWRhdGFrZXk6IGFueVtdID0gW11cbiAgQElucHV0KCdob3Jpem9udGFsLXNjYWxlJykgaFNjYWxlOiBib29sZWFuID0gdHJ1ZTtcbiAgZHJpbGxhYmxlRmxhZzogYm9vbGVhbiA9IHRydWU7XG4gIHJlc2l6ZWZsYWc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCdoZWlnaHQnKSBzdmdoZWlnaHQ6IG51bWJlciA9IDMwMDtcbiAgQFZpZXdDaGlsZCgnY2hhcnRJZCcpIGNoYXJ0SWQ6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ2RpdmlkJykgZGl2aWQ6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ2RyaWxsaWQnKSBkcmlsbGlkOiBhbnk7XG4gIEBPdXRwdXQoKSBvbkxlZ2VuZENsaWNrOiBhbnkgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgaHR0cHJlc3BvbnNlOiBhbnk7XG4gIHN2ZzogYW55O1xuICBvZmZzZXRoZWlnaHQ6YW55O1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG15c2VydmljZTogQ29tbWFuRGF0YVNlcnZpY2UscHJpdmF0ZSBkZXZpY2U6RGV2aWNlUXVlcnlTZXJ2aWNlKSB7XG4gICAgc3VwZXIoJ2JhcnN0YWNrJyk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcblxuICAgIGlmICh0aGlzLmxldmVsIDw9IDEpIHtcbiAgICAgIGxldCByZXM7XG4gICAgICBpZiAodGhpcy5odHRwbWV0aG9kICYmIHRoaXMuaHR0cHVybCkge1xuICAgICAgICB0aGlzLm15c2VydmljZS5mZXRjaFVybERhdGEodGhpcy5odHRwdXJsLCB0aGlzLmh0dHBtZXRob2QpLnN1YnNjcmliZSgocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAvL3RoaXMuZGF0YSA9IHJlc3BvbnNlO1xuICAgICAgICAgIHRoaXMuaHR0cHJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5nZXRSZXNwb25zZURhdGEocmVzcG9uc2UpO1xuICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1EYXRhKHRoaXMuZGF0YSk7XG4gICAgICAgICAgICB0aGlzLnBsb3RDaGFydCgpO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhMSkge1xuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMudHJhbnNmb3JtRGF0YSh0aGlzLmRhdGExKTtcbiAgICAgICAgICB0aGlzLnBsb3RDaGFydCgpO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuXG4gIGZldGNoRGF0YShkYXRhOiBhbnkpIHtcblxuICAgIGxldCByZXF1ZXN0SnNvbjtcbiAgICBsZXQga2V5ID0gdGhpcy5kcmlsbGFibGVkYXRha2V5O1xuICAgIGxldCByZXNwOiBhbnk7XG4gICAgaWYgKHRoaXMuZHJpbGxhYmxlZGF0YWtleS5sZW5ndGgpIHtcbiAgICAgIGxldCBkcmlsbGFibGVkYXRhID0gdGhpcy5nZXRNdWx0aXBsZURyaWxsYmxlS2V5RGF0YShkYXRhLCBrZXkpO1xuICAgICAgcmVxdWVzdEpzb24gPSBkcmlsbGFibGVkYXRhO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJlcXVlc3RKc29uID0gZGF0YTtcbiAgICB9XG5cblxuICAgIGlmICh0aGlzLmh0dHBtZXRob2QgJiYgdGhpcy5odHRwdXJsKSB7XG4gICAgICB0aGlzLm15c2VydmljZS5wb3N0ZmV0Y2hEYXRhKHRoaXMuaHR0cHVybCwgdGhpcy5odHRwbWV0aG9kLCByZXF1ZXN0SnNvbikuc3Vic2NyaWJlKChyZXNwb25zZSkgPT4ge1xuICAgICAgICByZXNwID0gcmVzcG9uc2U7XG4gICAgICAgIHRoaXMuaHR0cHJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgIH0sICgpID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgLy90aGlzLmRhdGEgPSB0aGlzLmdldFJlc3BvbnNlRGF0YShyZXNwKTtcbiAgICAgICAgICB0aGlzLmRyYXdDaGFydCgpO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGRyYXdDaGFydCgpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZ2V0UmVzcG9uc2VEYXRhKHRoaXMuaHR0cHJlc3BvbnNlKTtcbiAgICAgIHRoaXMudHJhbnNmb3JtRGF0YSh0aGlzLmRhdGEpO1xuICAgICAgdGhpcy5wbG90Q2hhcnQoKTtcbiAgICB9LCAwKTtcblxuICB9XG5cblxuICB0cmFuc2Zvcm1EYXRhKGRhdGExOiBhbnkpIHtcblxuICAgIHRoaXMua2V5QXJyYXkgPSBbXTtcbiAgICB0aGlzLmxlZ2VuZEFycmF5ID0gW107XG5cbiAgICBkYXRhMS5mb3JFYWNoKChlbGVtZW50LCBpKSA9PiB7XG4gICAgICBpZiAoaSA9PSAwKSB7XG4gICAgICAgIGVsZW1lbnQuZm9yRWFjaCgoaW5uZXJlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMubGVnZW5kQXJyYXlbaW5uZXJlbGVtZW50XSA9IHsgJ2RhdGEnOiBbXSB9O1xuICAgICAgICAgICAgdGhpcy5rZXlBcnJheS5wdXNoKGlubmVyZWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKGluZGV4ID09IDApIHtcbiAgICAgICAgICAgIHRoaXMueGF4aXMgPSBpbm5lcmVsZW1lbnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxldCB0ZW1waW5uZXJhcnJheTogYW55W107XG4gICAgdGVtcGlubmVyYXJyYXkgPSBbXTtcbiAgICBkYXRhMS5mb3JFYWNoKChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICBsZXQgb2JqOiBhbnkgPSB7fTtcbiAgICAgICAgZWxlbWVudC5mb3JFYWNoKChpbm5lcmVsZW1lbnQsIGlubmVyaW5kZXgpID0+IHtcbiAgICAgICAgICBpZiAoaW5uZXJpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmtleUFycmF5W2lubmVyaW5kZXggLSAxXTtcbiAgICAgICAgICAgIG9ialtrZXldID0gZWxlbWVudFtpbm5lcmluZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IGxlZ2VuZGRhdGEgPSB0aGlzLmxlZ2VuZEFycmF5W2tleV07XG4gICAgICAgICAgICBpZiAobGVnZW5kZGF0YSkge1xuICAgICAgICAgICAgICBsZWdlbmRkYXRhLmRhdGEucHVzaCh7ICd2YWx1ZSc6IGVsZW1lbnRbaW5uZXJpbmRleF0sICdsYWJlbCc6IGVsZW1lbnRbMF0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGVtcGlubmVyYXJyYXkucHVzaChvYmopO1xuICAgICAgfVxuXG4gICAgfSk7XG4gICAgdGhpcy5kYXRhID0gW107XG4gICAgdGVtcGlubmVyYXJyYXkuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIHRoaXMuZGF0YS5wdXNoKGVsZW1lbnQpO1xuICAgIH0pO1xubGV0IG1heFk6IGFueSA9IDA7XG5cbmxldCB5YXhpc21heEFycmF5ID0gIFtdOyBcbiAgIC8vZmluZCBtYXggZm9yIHlheGlzXG4gICAgdGhpcy5kYXRhLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGVsZW1lbnQpICl7XG4gICAgIFxuICAgICB0aGlzLmtleUFycmF5LmZvckVhY2goa2V5MSA9PiB7XG4gICAgICAgaWYoa2V5ID09IGtleTEpe1xuICAgICAgbWF4WSA9IG1heFkgKyB2YWx1ZTtcbiAgICAgICB9XG4gICAgIH0pOy8va2V5YXJyYXkgbG9vcCBlbmRzIGhlcmVcblxuICAgICB9Ly9mb3IgZW5kcyBoZXJlXG55YXhpc21heEFycmF5LnB1c2gobWF4WSk7XG5tYXhZID0gMDtcbiAgICB9KTsvLyBmb3JlYWNoIGVuZHNcbmxldCB0ZW1wTGFyZ2UgPSAwLCBpO1xuZm9yKGkgPSAwOyBpIDwgeWF4aXNtYXhBcnJheS5sZW5ndGg7IGkrKykge1xuaWYoeWF4aXNtYXhBcnJheVtpXSA+IHRlbXBMYXJnZSkge1xuICB0aGlzLm1heFlWYWx1ZSA9IHlheGlzbWF4QXJyYXlbaV07XG59Ly9pZiBlbmRzXG59Ly8gZm9yIGVuZHNcblxuICAgICB0aGlzLmxlZ2VuZHMgPSBbXVxuICAgIHRoaXMua2V5QXJyYXkuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGxlZ2VuZGRhdGEgPSB0aGlzLmxlZ2VuZEFycmF5W2VsZW1lbnRdO1xuICAgICAgaWYgKHRoaXMuY29sb3IubGVuZ3RoID4gMCkge1xuICAgICAgICBsZXQgb2JqZWN0ID0geyAnbGFiZWwnOiBlbGVtZW50LCAnY29sb3InOiB0aGlzLmNvbG9yW2luZGV4XSwgJ2RhdGEnOiBsZWdlbmRkYXRhLmRhdGEgfTtcbiAgICAgICAgdGhpcy5sZWdlbmRzLnB1c2gob2JqZWN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBvYmplY3QgPSB7ICdsYWJlbCc6IGVsZW1lbnQsICdjb2xvcic6IHRoaXMucHJlZGVmaW5lZGNvbG9yc1tpbmRleF0sICdkYXRhJzogbGVnZW5kZGF0YS5kYXRhIH07XG4gICAgICAgIHRoaXMubGVnZW5kcy5wdXNoKG9iamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwbG90Q2hhcnQoKSB7XG4gICAgY29uc3QgdG9vbHRpcCA9IHRoaXMudG9vbFRpcChkMyk7XG4gICAgbGV0IG1hcmdpbiA9IHsgdG9wOiAyMCwgcmlnaHQ6IDMwLCBib3R0b206OTAsIGxlZnQ6IDYwIH07XG4gICAgbGV0IGNvbG9ycyA9IHRoaXMucHJlZGVmaW5lZGNvbG9ycztcbiAgXG4gICAgaWYgKHRoaXMuZGV2aWNlLklzRGVza3RvcCgpKSB7XG4gICAgICBpZiAodGhpcy5jaGFydElkKSB7XG4gICAgICAgIHRoaXMuc3Znd2lkdGggPSB0aGlzLmNoYXJ0SWQubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgIHRoaXMuc3Znd2lkdGggPSB0aGlzLnN2Z3dpZHRoO1xuICAgICAgfVxuICAgIH1cbiAgICAvL3RoaXMuc3Znd2lkdGggPSB0aGlzLmNoYXJ0SWQubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICBsZXQgZGF0YTtcbiAgICAgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBsZXQga2V5c2V0YXJyYXk6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKHRoaXMuaHR0cG1ldGhvZCAmJiB0aGlzLmh0dHB1cmwpIHtcbiAgICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmRhdGFbMF0pKSB7XG4gICAgICAgIGtleXNldGFycmF5LnB1c2goa2V5KTtcbiAgICAgIH1cbiAgICAgIHRoaXMua2V5QXJyYXkgPSBrZXlzZXRhcnJheTtcbiAgICAgIHRoaXMua2V5QXJyYXkuc3BsaWNlKDAsIDEpO1xuICAgIH1cblxuXG4gICAgbGV0IHNlcmllcyA9IGQzLnN0YWNrKCkua2V5cyh0aGlzLmtleUFycmF5KVxuICAgICAgLm9mZnNldChkMy5zdGFja09mZnNldERpdmVyZ2luZylcbiAgICAgICh0aGlzLmRhdGEpO1xuICAgIHNlcmllc1xuICAgIHRoaXMuc3ZnID0gZDMuc2VsZWN0KFwiI1wiICsgdGhpcy5jb21wb25lbnRJZCk7XG5cbiAgICBsZXQgd2lkdGggPSB0aGlzLnN2Z3dpZHRoIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQ7XG4gICAgbGV0IGhlaWdodDtcbiAgIC8vIGhlaWdodD10aGlzLmNoYXJ0SWQubmF0aXZlRWxlbWVudC5vZmZzZXRIZWlnaHQtMjA7XG4gICBcbiAgICBpZih0aGlzLmRldmljZS5Jc0Rlc2t0b3AoKSlcbiAgICAgICAge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICB0aGlzLm9mZnNldGhlaWdodCA9IHRoaXMuY2hhcnRJZC5uYXRpdmVFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgIGhlaWdodCA9ICB0aGlzLm9mZnNldGhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICBoZWlnaHQ9dGhpcy5jaGFydElkLm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0LTEwO1xuICAgICAgICAgIH1cblxuICAgIGxldCB4ID0gZDMuc2NhbGVCYW5kKClcbiAgICAgIC5kb21haW4oZGF0YS5tYXAoKGQpID0+IHtcbiAgICAgICAgcmV0dXJuIGRbT2JqZWN0LmtleXMoZClbMF1dO1xuICAgICAgfSkpXG4gICAgICAucmFuZ2VSb3VuZChbbWFyZ2luLmxlZnQsIHdpZHRoIC0gbWFyZ2luLnJpZ2h0XSlcbiAgICAgIC5wYWRkaW5nKDAuMzUpO1xuXG4gICAgbGV0IHkgPSBkMy5zY2FsZUxpbmVhcigpXG4gICAgICAuZG9tYWluKFtkMy5taW4odGhpcy5zdGFja01pbihzZXJpZXMpKSwgXG4gICAgICAgIHRoaXMubWF4WVZhbHVlXG4gICAgICAgIC8vIGQzLm1heCh0aGlzLnN0YWNrTWF4KHNlcmllcykpXG4gICAgXSlcbiAgICAgIC5yYW5nZVJvdW5kKFtoZWlnaHQgLSBtYXJnaW4uYm90dG9tLCBtYXJnaW4udG9wXSk7XG5cbiAgIFxuICAgIC8vIGlmICh0aGlzLmJhcndpZHRoID4gMCkge1xuICAgIC8vICAgdGhpcy5iYXJ3aWR0aCA9IHRoaXMuYmFyd2lkdGg7XG4gICAgLy8gfVxuICAgIC8vIGVsc2Uge1xuICAgIC8vICAgdGhpcy5iYXJ3aWR0aCA9IHguYmFuZHdpZHRoKCk7XG4gICAgLy8gfVxuXG5cbiAgICBpZih0aGlzLmRldmljZS5Jc0Rlc2t0b3AoKT09dHJ1ZSlcbiAgICB7XG4gICAgICB0aGlzLnN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgeSgwKSArIFwiKVwiKVxuICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSh4KSk7XG4gICAgfVxuICBlbHNlXG4gICB7XG4gICAgdGhpcy5zdmcuYXBwZW5kKFwiZ1wiKVxuICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyB5KDApICsgXCIpXCIpXG4gICAgLmNhbGwoZDMuYXhpc0JvdHRvbSh4KSkuXG4gICAgICAgICAgIHNlbGVjdEFsbChcInRleHRcIilcbiAgICAgICAgICAgLmF0dHIoXCJ5XCIsIDApXG4gICAgICAgICAgIC5hdHRyKFwieFwiLCA5KVxuICAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcbiAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoNjApXCIpXG4gICAgICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsIFwic3RhcnRcIik7XG5cbiAgfVxuICAgXG4gICAgdGhpcy5zdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLDApXCIpXG4gICAgICAuY2FsbChkMy5heGlzTGVmdCh5KSk7XG5cbiAgICB0aGlzLnBsb3RMaW5lKHRoaXMuc3ZnLCB4LCB5LCBoZWlnaHQsIHdpZHRoLCBtYXJnaW4ubGVmdClcblxuICAgbGV0IHN2Z1JlY3QgPSAgIHRoaXMuc3ZnLmFwcGVuZChcImdcIilcbiAgICAgIC5zZWxlY3RBbGwoXCJnXCIpXG4gICAgICAuZGF0YShzZXJpZXMpXG4gICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXG4gICAgICAuYXR0cihcImZpbGxcIiwgKGQsIGluZGV4KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmNvbG9yLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBpZiAodGhpcy5jb2xvcltpbmRleF0pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbG9yW2luZGV4XTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gY29sb3JzW2luZGV4XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGNvbG9yc1tpbmRleF07XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuc2VsZWN0QWxsKFwicmVjdFwiKVxuICAgICAgLmRhdGEoKGQpID0+IHtcbiAgICAgICAgIHJldHVybiBkO1xuICAgICAgfSlcblxuICAgICAgc3ZnUmVjdC5lbnRlcigpLmFwcGVuZChcInJlY3RcIilcbiAgICAgIC5hdHRyKFwid2lkdGhcIiwgeC5iYW5kd2lkdGgoKSkuYXR0cignaWQnLCAoZCwgaSkgPT4ge1xuICAgICAgICByZXR1cm4gZC5kYXRhW2ldO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKFwieFwiLCAoZCkgPT4ge1xuICAgICAgICByZXR1cm4geCgrZC5kYXRhW09iamVjdC5rZXlzKGQuZGF0YSlbMF1dKTtcbiAgICAgIH0pXG4gICAgICAuYXR0cihcInlcIiwgKGQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB5KGRbMV0pO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKFwiY3Vyc29yXCIsIFwicG9pbnRlclwiKVxuICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgKGQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB5KGRbMF0pIC0geShkWzFdKTtcbiAgICAgIH0pXG4gICAgICAub24oXCJtb3VzZW92ZXJcIiwgKGQpID0+IHtcbiAgICAgICAgcmV0dXJuIHRvb2x0aXAuc3R5bGUoXCJ2aXNpYmlsaXR5XCIsIFwidmlzaWJsZVwiKTtcbiAgICAgIH0pXG4gICAgICAub24oXCJtb3VzZW1vdmVcIiwgKGQ6IGFueSkgPT4ge1xuICAgICAgICByZXR1cm4gdG9vbHRpcC5odG1sKHRoaXMuc2V0S2V5KGQpKVxuICAgICAgICAgIC5zdHlsZShcInRvcFwiLCAoZDMuZXZlbnQucGFnZVkgLSAxMCkgKyBcInB4XCIpXG4gICAgICAgICAgLnN0eWxlKFwibGVmdFwiLCAoZDMuZXZlbnQucGFnZVggKyAxMCkgKyBcInB4XCIpO1xuICAgICAgfSlcbiAgICAgIC5vbihcIm1vdXNlb3V0XCIsIChkKSA9PiB7XG4gICAgICAgIHJldHVybiB0b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgIH0pXG4gICAgICAub24oXCJjbGlja1wiLCAoZCkgPT4ge1xuICAgICAgICB0aGlzLnNldEJhckNsaWNrVGV4dChkKTtcbiAgICAgICAgdGhpcy5mb3JkcmlsbGFibGVDbGljayh0aGlzLCBkLCBldmVudCk7XG4gICAgICAgIHJldHVybiB0b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgICAgLy8gdGhpcy5jaGFydENsaWNrKGQpO1xuICAgICAgfSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5pZih0aGlzLmxhYmVsZmxhZykge1xuc3ZnUmVjdC5lbnRlcigpXG4uYXBwZW5kKFwidGV4dFwiKVxuLnN0eWxlKFwiZm9udC13ZWlnaHRcIixcImJvbGRcIilcbi5zdHlsZShcImZvbnQtc2l6ZVwiLFwiMXZ3XCIpXG4uYXR0cihcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXG4uYXR0cihcImZpbGxcIiwgKGQpPT57XG4gIGlmKHRoaXMubGFiZWxjb2xvci5sZW5ndGg+MCl7XG4gICAgcmV0dXJuIHRoaXMubGFiZWxjb2xvcjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gXCJibGFja1wiO1xuICB9XG59KVxuIC5hdHRyKFwieFwiLCAoZCkgPT4ge1xuICByZXR1cm4geCgrZC5kYXRhW09iamVjdC5rZXlzKGQuZGF0YSlbMF1dKSArIHguYmFuZHdpZHRoKCkvMjtcbiAgLy8gKyAgbWFyZ2luLmxlZnQ7XG59KVxuLmF0dHIoXCJ5XCIsIChkLCBpbmRleCkgPT4ge1xuICByZXR1cm4geShkWzFdKSArIDIwO1xufSlcbi50ZXh0KGZ1bmN0aW9uKGQpe1xuICAgICByZXR1cm4gIGRbT2JqZWN0LmtleXMoZClbMV1dIC0gZFtPYmplY3Qua2V5cyhkKVswXV07XG59KVxufVxuIFxuICB9XG5cbiAgc3RhY2tNaW4oc2VyaWUpIHtcbiAgICByZXR1cm4gZDMubWluKHNlcmllLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZFswXTsgfSk7XG4gIH1cblxuICAvLyBzdGFja01heChzZXJpZSkge1xuICAvLyAgIHJldHVybiBkMy5tYXgoc2VyaWUsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBkWzFdOyB9KTtcbiAgLy8gfVxuXG4gIHJlc2l6ZSgpIHtcblxuICAgIHRoaXMuc3Znd2lkdGggPSAwO1xuICAgIHRoaXMuc3ZnLnNlbGVjdEFsbChcIipcIikucmVtb3ZlKCk7XG5cbiAgICB0aGlzLnJlc2l6ZWZsYWcgPSB0cnVlO1xuICAgIHRoaXMuc3Znd2lkdGggPSB0aGlzLmRpdmlkLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgdGhpcy5wbG90Q2hhcnQoKTtcblxuICB9XG5cblxuICBwbG90TGluZShzdmcsIHgsIHksIGhlaWdodCwgd2lkdGgsIG0pIHtcbiAgICBpZiAodGhpcy5oU2NhbGUpIHtcbiAgICAgIHN2Zy5hcHBlbmQoJ2cnKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG0gKyBcIiwwKVwiKVxuICAgICAgICAuYXR0cihcImNvbG9yXCIsIFwibGlnaHRncmV5XCIpXG4gICAgICAgIC5jYWxsKGQzLmF4aXNMZWZ0KHkpXG4gICAgICAgICAgLnRpY2tTaXplKC13aWR0aCkudGlja0Zvcm1hdCgnJykpO1xuICAgIH1cbiAgfVxuXG5cbiAgbGVnZW5kQ2xpY2soZXZlbnQ6IGFueSkge1xuICAgIGxldCBvYmogPSB7fTtcbiAgICBvYmpbXCJsYWJlbFwiXSA9IGV2ZW50LmxhYmVsO1xuICAgIGxldCBkYXRhID0gW107XG4gICAgZXZlbnQuZGF0YS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgb2JqZWN0W2VsZW1lbnQubGFiZWxdID0gZWxlbWVudC52YWx1ZTtcbiAgICAgIGRhdGEucHVzaChvYmplY3QpO1xuICAgIH0pO1xuICAgIG9ialtcImRhdGFcIl0gPSBkYXRhO1xuICAgIHRoaXMub25MZWdlbmRDbGljay5lbWl0KG9iaik7XG4gIH1cblxuICBzZXRLZXkoZDogYW55KSB7XG4gICAgbGV0IGRpZmYgPSBkWzBdIC0gZFsxXTtcbiAgICBpZiAoZGlmZiA8IDApIHtcbiAgICAgIGRpZmYgPSAoZGlmZiAqICgtMSkpO1xuICAgIH1cbiAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZC5kYXRhKSkge1xuICAgICAgaWYgKHZhbHVlID09IGRpZmYpIHtcbiAgICAgICAgLy8gIGxldCBvYmplY3QgPSB7ICdsYWJlbCc6IGtleSwgJ3ZhbHVlJzogdmFsdWUgLCAnbGVnZW5kJzogZC5kYXRhW09iamVjdC5rZXlzKGQuZGF0YSlbMF1dfTtcbiAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuICAgICAgICBvYmplY3RbdGhpcy54YXhpc10gPSBkLmRhdGFbT2JqZWN0LmtleXMoZC5kYXRhKVswXV07XG5cbiAgICAgICAgcmV0dXJuICh0aGlzLnRvb2xUaXBGb3JCYXIob2JqZWN0KSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0QmFyQ2xpY2tUZXh0KGQ6IGFueSkge1xuICAgIGxldCBkaWZmID0gZFswXSAtIGRbMV07XG4gICAgaWYgKGRpZmYgPCAwKSB7XG4gICAgICBkaWZmID0gKGRpZmYgKiAoLTEpKTtcbiAgICB9XG4gICAgLy8gbGV0IG9iamVjdCA9IHt9O1xuICAgIGxldCBvYmplY3QgPSB7fTtcbiAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZC5kYXRhKSkge1xuICAgICAgaWYgKHZhbHVlID09IGRpZmYpIHtcbiAgICAgICAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgb2JqZWN0W3RoaXMueGF4aXNdID0gZC5kYXRhW09iamVjdC5rZXlzKGQuZGF0YSlbMF1dO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmNoYXJ0Q2xpY2sob2JqZWN0KTtcbiAgfVxuXG4gIGdldFJlc3BvbnNlRGF0YShodHRwUmVzcG9uc2U6IGFueSkge1xuICAgIGxldCByZXNwb25zZWRhdGEgPSBodHRwUmVzcG9uc2U7XG4gICAgaWYgKHRoaXMuZGF0YXJlYWRlciAhPSBudWxsKSB7XG4gICAgICBjb25zdCBkciA9IHRoaXMuZGF0YXJlYWRlci5zcGxpdCgnLicpO1xuICAgICAgZm9yIChjb25zdCBpciBvZiBkcikge1xuICAgICAgICByZXNwb25zZWRhdGEgPSByZXNwb25zZWRhdGFbaXJdO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXNwb25zZWRhdGEgPSBodHRwUmVzcG9uc2U7XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZWRhdGE7XG4gIH1cblxuXG59XG4iXX0=