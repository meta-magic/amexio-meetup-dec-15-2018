/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
import { Component, Input, ViewChild, ElementRef, Output, EventEmitter, } from "@angular/core";
import { AmexioD3BaseChartComponent } from "../base/base.component";
import { CommanDataService } from '../services/comman.data.service';
import * as d3 from 'd3';
import { DeviceQueryService } from '../services/device.query.service';
export class MultiareaComponent extends AmexioD3BaseChartComponent {
    /**
     * @param {?} myservice
     * @param {?} device
     */
    constructor(myservice, device) {
        super("areachart");
        this.myservice = myservice;
        this.device = device;
        this.svgwidth = 300;
        this.svgheight = 350;
        this.level = 0;
        this.labelcolor = "black";
        this.labelflag = false;
        this.drillabledatakey = [];
        this.drillableFlag = true;
        this.resizeflag = false;
        this.togglelabel = false;
        this.onLegendClick = new EventEmitter();
        this.onTooltipClick = new EventEmitter();
        this.hScale = true;
        this.margin = {};
        this.keyArray = [];
        this.transformeddata = [];
        this.data1 = [];
        this.legendArray = [];
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.togglelabel = false;
        /** @type {?} */
        let res;
        if (this.level <= 1) {
            if (this.httpmethod && this.httpurl) {
                this.myservice.fetchUrlData(this.httpurl, this.httpmethod).subscribe((response) => {
                    this.httpresponse = response;
                    this.data = this.getResponseData(response);
                }, (error) => {
                }, () => {
                    setTimeout(() => {
                        this.transformData(this.data);
                        this.initAreaChart();
                        this.plotD3Chart();
                    }, 0);
                });
            }
            else if (this.data1) {
                setTimeout(() => {
                    this.transformData(this.data);
                    this.initAreaChart();
                    this.plotD3Chart();
                }, 0);
            }
        }
    }
    /**
     * @param {?} data
     * @return {?}
     */
    fetchData(data) {
        /** @type {?} */
        let requestJson;
        /** @type {?} */
        let key = this.drillabledatakey;
        /** @type {?} */
        let resp;
        if (this.drillabledatakey.length) {
            /** @type {?} */
            let drillabledata = this.getMultipleDrillbleKeyData(data, key);
            requestJson = drillabledata;
        }
        else {
            requestJson = data;
        }
        if (this.httpmethod && this.httpurl) {
            this.myservice.postfetchData(this.httpurl, this.httpmethod, requestJson).subscribe((response) => {
                resp = response;
                this.httpresponse = response;
            }, (error) => {
            }, () => {
                setTimeout(() => {
                    //this.data = this.getResponseData(resp);
                    this.drawChart();
                }, 0);
            });
        }
    }
    /**
     * @return {?}
     */
    drawChart() {
        setTimeout(() => {
            this.data = this.getResponseData(this.httpresponse);
            this.transformData(this.data);
            this.initAreaChart();
            this.plotD3Chart();
        }, 0);
    }
    /**
     * @return {?}
     */
    initAreaChart() {
        this.tooltip = this.toolTip(d3);
        if (this.resizeflag == false) {
            if (this.chartId) {
                this.svgwidth = this.chartId.nativeElement.offsetWidth;
            }
            else {
                this.svgwidth = this.svgwidth;
            }
        }
        this.margin = { top: 30, right: 44, bottom: 50, left: 30 },
            this.width = this.svgwidth - this.margin.left - this.margin.right,
            this.height = this.svgheight - this.margin.top - this.margin.bottom;
        //find max and initialize max
        this.maximumValue = this.findMaxData(this.data);
        this.x = d3.scalePoint()
            .range([0, this.width]);
        // .padding(0.1);
        this.y = d3.scaleLinear()
            .rangeRound([this.height, 0]);
        this.areaArray = [];
        //set x y domain
        this.areaArray = this.data.map((d) => { return d[Object.keys(d)[0]]; });
        this.x.domain(this.areaArray);
        this.y.domain([0, this.maximumValue]);
        //initialize svg
        this.svg =
            d3.select("#" + this.componentId)
                .attr("width", this.width + this.margin.left + this.margin.right)
                .attr("height", this.height + this.margin.top + this.margin.bottom);
        this.predefinedColors = ["#3366cc", "#dc3912", "#ff9900", "#109618", "#990099", "#0099c6", "#dd4477", "#66aa00", "#b82e2e", "#316395", "#994499", "#22aa99", "#aaaa11", "#6633cc", "#e67300", "#8b0707", "#651067", "#329262", "#5574a6", "#3b3eac"];
    }
    /**
     * @return {?}
     */
    plotD3Chart() {
        this.formLegendData();
        /** @type {?} */
        let counter;
        /** @type {?} */
        let g = this.svg.append("g").attr("transform", "translate(" + this.margin.left + "," + this.margin.top + ")");
        // add the X 
        if (this.device.IsDesktop() == true) {
            g.append("g")
                .attr("transform", "translate(0," + this.height + ")")
                .call(d3.axisBottom(this.x));
        }
        else {
            g.append("g")
                .attr("transform", "translate(0," + this.height + ")")
                .call(d3.axisBottom(this.x)).
                selectAll("text")
                .attr("y", 0)
                .attr("x", 9)
                .attr("dy", ".35em")
                .attr("transform", "rotate(60)")
                .style("text-anchor", "start");
        }
        // add the Y Axis
        g.append("g")
            .call(d3.axisLeft(this.y));
        this.plotLine(g, this.x, this.y, this.height, this.width);
        for (counter = 1; counter < this.keyArray.length; counter++) {
            /** @type {?} */
            let innerGroup = this.svg.append("g").attr("transform", "translate(" + this.margin.left + "," + this.margin.top + ")");
            this.plotAreaChart(innerGroup, counter, this);
        }
        //call method to plot points
        /** @type {?} */
        let increment;
        for (increment = 1; increment < this.keyArray.length; increment++) {
            //plot line
            /** @type {?} */
            let innerGroup = this.svg.append("g").attr("transform", "translate(" + this.margin.left + "," + this.margin.top + ")");
            this.PlotLineDot(innerGroup, increment, this);
        } //increment for ends
    }
    /**
     * @param {?} g
     * @param {?} i
     * @param {?} thisa
     * @return {?}
     */
    PlotLineDot(g, i, thisa) {
        /** @type {?} */
        let flag = this.togglelabel;
        /** @type {?} */
        const line = d3.line()
            .x((d) => { return thisa.x(d[Object.keys(d)[0]]); })
            .y((d) => { return thisa.y(d[Object.keys(d)[i]]); });
        g.append("path")
            .data([thisa.data])
            .attr("fill", "none")
            .attr("stroke", thisa.predefinedcolors[i])
            .attr("stroke-width", 1.5)
            .attr("d", line)
            .attr("opacity", 0.2)
            .attr("transform", 
        // "translate(" + this.margin.left + "," + 0 + ")");
        "translate(" + 0 + "," + 0 + ")");
        //----------
        g.selectAll('dot')
            .data(thisa.data)
            .enter()
            .append('circle')
            .attr('opacity', 0)
            .attr("fill", thisa.predefinedcolors[i])
            .attr("cx", (d) => { return thisa.x(d[Object.keys(d)[0]]); })
            .attr("cy", (d) => { return thisa.y(d[Object.keys(d)[i]]); })
            .attr('r', 4)
            .attr("cursor", "pointer")
            .on("mouseover", (d) => {
            this.formTooltipData(d, i);
            return this.tooltip.style("visibility", "visible");
        })
            .on("mousemove", (d) => {
            return this.tooltip.html(this.formTooltipData(d, i))
                .style("top", (d3.event.pageY - 10) + "px")
                .style("left", (d3.event.pageX + 10) + "px");
        })
            .on("mouseout", (d) => {
            return this.tooltip.style("visibility", "hidden");
        })
            .style("opacity", 1)
            .on("click", (d) => {
            this.onAreaTooltipClick(d, i);
            this.fordrillableClick(this, d, event);
            return this.tooltip.style("visibility", "hidden");
            //this.chartClick(d);
        })
            .attr("transform", 
        // "translate(" + this.margin.left + "," + 0 + ")");
        "translate(" + 0 + "," + 0 + ")");
        // -----------------------------------------------------------------
        if (this.labelflag) {
            g.selectAll('labels')
                .data(thisa.data)
                .enter()
                .append('text')
                .style("font-weight", "bold")
                .attr("text-anchor", "middle")
                .attr("fill", (d) => {
                if (this.labelcolor.length > 0) {
                    return this.labelcolor;
                }
                else {
                    return "black";
                }
            })
                .attr("x", function (d) {
                // let length = String(d[Object.keys(d)[i]]).length
                return thisa.x(d[Object.keys(d)[0]]) + 20;
            })
                .attr("y", function (d) {
                /** @type {?} */
                let key = [Object.keys(d)[i]];
                if (flag) {
                    return thisa.y(d[key]) - 5; // fr up
                }
                else {
                    return thisa.y(d[key]) + 15;
                }
                // return thisa.y(d[Object.keys(d)[i]]);
                //  return y(d[Object.keys(d)[1]])+yTextPadding;
            })
                .text(function (d) {
                return d[Object.keys(d)[i]];
            })
                .attr("transform", "translate(" + 0 + "," + 0 + ")");
        }
        if (this.togglelabel) {
            this.togglelabel = false;
        }
        else {
            this.togglelabel = true;
        }
    }
    /**
     * @param {?} g
     * @param {?} i
     * @param {?} thisa
     * @return {?}
     */
    plotAreaChart(g, i, thisa) {
        // calculate area and valueline
        // define the line
        /** @type {?} */
        const valueline = d3.line()
            .x((d) => {
            /** @type {?} */
            let key = [Object.keys(d)[0]];
            return thisa.x(d[key]);
        })
            .y((d) => {
            /** @type {?} */
            let key = [Object.keys(d)[i]];
            return thisa.y(d[key]);
        });
        // add the valueline path.
        g.append("path")
            .data([this.data])
            .style("stroke", this.predefinedColors[i])
            .attr("fill", "none")
            .style("stroke-width", "2px")
            .attr("d", valueline)
            .attr("transform", 
        // "translate(" + this.margin.left + "," + 0 + ")");
        "translate(" + 0 + "," + 0 + ")");
        // define the area
        /** @type {?} */
        let area = d3.area()
            .x((d) => {
            /** @type {?} */
            let key = [Object.keys(d)[0]];
            return thisa.x(d[key]);
        })
            .y0(this.height)
            .y1((d) => {
            /** @type {?} */
            let key = [Object.keys(d)[i]];
            return thisa.y(d[key]);
        });
        g.append("path")
            .data([this.data])
            .attr("d", area)
            .attr("transform", 
        // "translate(" + this.margin.left + "," + 0 + ")")
        "translate(" + 0 + "," + 0 + ")")
            .style("stroke", "none")
            .attr("fill", this.predefinedColors[i])
            .style("opacity", 0.5);
    }
    /**
     * @param {?} tooltipData
     * @param {?} count
     * @return {?}
     */
    onAreaTooltipClick(tooltipData, count) {
        /** @type {?} */
        let obj = {};
        obj[this.keyArray[0]] = tooltipData[Object.keys(tooltipData)[0]];
        obj[this.keyArray[count]] = tooltipData[Object.keys(tooltipData)[count]];
        this.chartClick(obj);
    }
    /**
     * @param {?} data
     * @return {?}
     */
    findMaxData(data) {
        /** @type {?} */
        let tempArray = [];
        /** @type {?} */
        let largeValues = [];
        /** @type {?} */
        let maxValue;
        //logic to search 3 largest values 
        data.forEach(element => {
            /** @type {?} */
            let temp = [];
            /** @type {?} */
            let value;
            for (let [key, value] of Object.entries(element)) {
                //exempts first column of data as it is treated as x-axis
                if (key != this.keyArray[0]) {
                    tempArray.push(value);
                }
            } //for loop end
            value = this.findLargestValue(tempArray);
            largeValues.push(value);
        });
        maxValue = this.findLargestValue(largeValues);
        return maxValue;
    }
    /**
     * @param {?} array
     * @return {?}
     */
    findLargestValue(array) {
        /** @type {?} */
        let i;
        /** @type {?} */
        let max = 0;
        for (i = 0; i < array.length; i++) {
            if (array[i] > max) {
                max = array[i];
            } //if ends 
        } //max ends
        return max;
    }
    //covert data
    /**
     * @param {?} data
     * @return {?}
     */
    transformData(data) {
        this.transformeddata = [];
        this.keyArray = data[0];
        data.forEach((element, index) => {
            if (index > 0) {
                /** @type {?} */
                let DummyObject = {};
                element.forEach((individualvalue, keyindex) => {
                    DummyObject[this.keyArray[keyindex]] = individualvalue;
                }); //inner for loop ends
                this.transformeddata.push(DummyObject);
            } //if ends
        }); //outer for loop ends
        //outer for loop ends
        /** @type {?} */
        let parsedtransformeddata = JSON.parse(JSON.stringify(this.transformeddata));
        this.data = parsedtransformeddata;
    }
    /**
     * @return {?}
     */
    formLegendData() {
        this.legendArray = [];
        this.keyArray.forEach((element, index) => {
            if (index > 0) {
                /** @type {?} */
                let legendobject = {};
                legendobject['label'] = element;
                legendobject['color'] = this.predefinedColors[index + 1];
                this.legendArray.push(legendobject);
            }
        });
    }
    /**
     * @param {?} legendData
     * @return {?}
     */
    onAreaLegendClick(legendData) {
        /** @type {?} */
        let obj = {};
        obj["label"] = legendData.label;
        /** @type {?} */
        let data = [];
        this.data.forEach(element => {
            for (let [key, value] of Object.entries(this.data[0])) {
                if (key == legendData.label) {
                    /** @type {?} */
                    let object = {};
                    object[key] = value;
                    data.push(object);
                } //inner if ends
            } //inner forloop ends
        }); //outer foreach ends
        obj["data"] = data;
        this.onLegendClick.emit(obj);
    }
    /**
     * @param {?} httpResponse
     * @return {?}
     */
    getResponseData(httpResponse) {
        /** @type {?} */
        let responsedata = httpResponse;
        if (this.datareader != null) {
            /** @type {?} */
            const dr = this.datareader.split('.');
            for (const ir of dr) {
                responsedata = responsedata[ir];
            }
        }
        else {
            responsedata = httpResponse;
        }
        return responsedata;
    }
    /**
     * @return {?}
     */
    resize() {
        this.svgwidth = 0;
        this.svg.selectAll("*").remove();
        this.resizeflag = true;
        this.svgwidth = this.divid.nativeElement.offsetWidth;
        this.initAreaChart();
        this.plotD3Chart();
    }
    /**
     * @param {?} tooltipData
     * @param {?} count
     * @return {?}
     */
    formTooltipData(tooltipData, count) {
        /** @type {?} */
        let obj = {};
        obj[this.keyArray[0]] = tooltipData[Object.keys(tooltipData)[0]];
        obj[this.keyArray[count]] = tooltipData[Object.keys(tooltipData)[count]];
        return this.toolTipForBar(obj);
    }
    /**
     * @param {?} g
     * @param {?} x
     * @param {?} y
     * @param {?} height
     * @param {?} width
     * @return {?}
     */
    plotLine(g, x, y, height, width) {
        if (this.hScale) {
            g.append('g')
                .attr("color", "lightgrey")
                .call(d3.axisLeft(y)
                .tickSize(-width).tickFormat(''));
        }
    }
}
MultiareaComponent.decorators = [
    { type: Component, args: [{
                selector: 'amexio-d3-chart-multiarea',
                template: `
<div  *ngIf="drillableFlag" #divid (window:resize)="resize()">
<table style="width: 100%;" #chartId>
  <tr>
      <td style="font-size: 18px; font-weight: bold; "> {{title}} </td>
  </tr>
  <tr>
      <td>
          <svg [attr.height]="svgheight" [attr.width]="svgwidth" [attr.id]="componentId">
          </svg>
      </td>
  </tr>
  <tr>
      <td style="display: block; padding: 5px;">
          <amexio-d3-legend *ngIf="legend" [horizontal]="true" (onClick)="onAreaLegendClick($event)" [data]="legendArray" style="height:100%;">
          </amexio-d3-legend>
      </td>
  </tr>
</table>
</div>`,
                styles: [``]
            },] },
];
MultiareaComponent.ctorParameters = () => [
    { type: CommanDataService },
    { type: DeviceQueryService }
];
MultiareaComponent.propDecorators = {
    svgwidth: [{ type: Input, args: ['width',] }],
    svgheight: [{ type: Input, args: ['height',] }],
    datareader: [{ type: Input, args: ['data-reader',] }],
    level: [{ type: Input, args: ['level',] }],
    labelcolor: [{ type: Input, args: ['label-color',] }],
    labelflag: [{ type: Input, args: ['label',] }],
    target: [{ type: Input, args: ['target',] }],
    drillabledatakey: [{ type: Input, args: ['drillable-data',] }],
    chartId: [{ type: ViewChild, args: ['chartId',] }],
    divid: [{ type: ViewChild, args: ['divid',] }],
    onLegendClick: [{ type: Output }],
    onTooltipClick: [{ type: Output }],
    hScale: [{ type: Input, args: ['horizontal-scale',] }]
};
if (false) {
    /** @type {?} */
    MultiareaComponent.prototype.svgwidth;
    /** @type {?} */
    MultiareaComponent.prototype.svgheight;
    /** @type {?} */
    MultiareaComponent.prototype.datareader;
    /** @type {?} */
    MultiareaComponent.prototype.level;
    /** @type {?} */
    MultiareaComponent.prototype.labelcolor;
    /** @type {?} */
    MultiareaComponent.prototype.labelflag;
    /** @type {?} */
    MultiareaComponent.prototype.target;
    /** @type {?} */
    MultiareaComponent.prototype.drillabledatakey;
    /** @type {?} */
    MultiareaComponent.prototype.httpresponse;
    /** @type {?} */
    MultiareaComponent.prototype.drillableFlag;
    /** @type {?} */
    MultiareaComponent.prototype.resizeflag;
    /** @type {?} */
    MultiareaComponent.prototype.togglelabel;
    /** @type {?} */
    MultiareaComponent.prototype.chartId;
    /** @type {?} */
    MultiareaComponent.prototype.divid;
    /** @type {?} */
    MultiareaComponent.prototype.onLegendClick;
    /** @type {?} */
    MultiareaComponent.prototype.onTooltipClick;
    /** @type {?} */
    MultiareaComponent.prototype.hScale;
    /** @type {?} */
    MultiareaComponent.prototype.svg;
    /** @type {?} */
    MultiareaComponent.prototype.x;
    /** @type {?} */
    MultiareaComponent.prototype.y;
    /** @type {?} */
    MultiareaComponent.prototype.z;
    /** @type {?} */
    MultiareaComponent.prototype.height;
    /** @type {?} */
    MultiareaComponent.prototype.width;
    /** @type {?} */
    MultiareaComponent.prototype.margin;
    /** @type {?} */
    MultiareaComponent.prototype.i;
    /** @type {?} */
    MultiareaComponent.prototype.parseTime;
    /** @type {?} */
    MultiareaComponent.prototype.keyArray;
    /** @type {?} */
    MultiareaComponent.prototype.maximumValue;
    /** @type {?} */
    MultiareaComponent.prototype.predefinedColors;
    /** @type {?} */
    MultiareaComponent.prototype.areaArray;
    /** @type {?} */
    MultiareaComponent.prototype.transformeddata;
    /** @type {?} */
    MultiareaComponent.prototype.data1;
    /** @type {?} */
    MultiareaComponent.prototype.legendArray;
    /** @type {?} */
    MultiareaComponent.prototype.tooltip;
    /** @type {?} */
    MultiareaComponent.prototype.myservice;
    /** @type {?} */
    MultiareaComponent.prototype.device;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGlhcmVhLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2FtZXhpby1jaGFydC1kMy8iLCJzb3VyY2VzIjpbImxpYi9tdWx0aWFyZWEvbXVsdGlhcmVhLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsWUFBWSxHQUFXLE1BQU0sZUFBZSxDQUFDO0FBQ3ZHLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBRXBFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBQ3BFLE9BQU8sS0FBSyxFQUFFLE1BQU0sSUFBSSxDQUFDO0FBRXpCLE9BQU0sRUFBQyxrQkFBa0IsRUFBQyxNQUFNLGtDQUFrQyxDQUFDO0FBMEJuRSxNQUFNLHlCQUEwQixTQUFRLDBCQUEwQjs7Ozs7SUFvQ2hFLFlBQW9CLFNBQTRCLEVBQVMsTUFBeUI7UUFFaEYsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBRkQsY0FBUyxHQUFULFNBQVMsQ0FBbUI7UUFBUyxXQUFNLEdBQU4sTUFBTSxDQUFtQjtRQW5DbEUsYUFBUSxHQUFXLEdBQUcsQ0FBQztRQUN0QixjQUFTLEdBQVcsR0FBRyxDQUFDO1FBRXpCLFVBQUssR0FBVyxDQUFDLENBQUM7UUFDWixlQUFVLEdBQVcsT0FBTyxDQUFDO1FBQ25DLGNBQVMsR0FBWSxLQUFLLENBQUM7UUFFbEIscUJBQWdCLEdBQVUsRUFBRSxDQUFBO1FBRXJELGtCQUFhLEdBQVksSUFBSSxDQUFDO1FBQzlCLGVBQVUsR0FBVyxLQUFLLENBQUM7UUFDM0IsZ0JBQVcsR0FBWSxLQUFLLENBQUM7UUFHbkIsa0JBQWEsR0FBUSxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQzdDLG1CQUFjLEdBQVEsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUM3QixXQUFNLEdBQVksSUFBSSxDQUFDO1FBUWxELFdBQU0sR0FBUSxFQUFFLENBQUM7UUFHakIsYUFBUSxHQUFVLEVBQUUsQ0FBQztRQUlyQixvQkFBZSxHQUFVLEVBQUUsQ0FBQztRQUM1QixVQUFLLEdBQVUsRUFBRSxDQUFDO1FBQ2xCLGdCQUFXLEdBQVUsRUFBRSxDQUFDO0lBS3hCLENBQUM7Ozs7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7O1lBQ3BCLEdBQUc7UUFDUCxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFFLENBQUMsQ0FBQyxDQUFBLENBQUM7WUFDbkIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztnQkFDcEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7b0JBQ2hGLElBQUksQ0FBQyxZQUFZLEdBQUMsUUFBUSxDQUFDO29CQUMzQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQzdDLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO2dCQUNiLENBQUMsRUFBRSxHQUFHLEVBQUU7b0JBQ04sVUFBVSxDQUFDLEdBQUcsRUFBRTt3QkFDZCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzt3QkFDOUIsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO3dCQUNyQixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7b0JBQ3JCLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDUixDQUFDLENBQUMsQ0FBQztZQUNMLENBQUM7WUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBRXRCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7b0JBQ2QsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQzlCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztvQkFDckIsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO2dCQUNyQixDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDUixDQUFDO1FBRUgsQ0FBQztJQUNELENBQUM7Ozs7O0lBR0QsU0FBUyxDQUFDLElBQVM7O1lBRWIsV0FBVzs7WUFDWCxHQUFHLEdBQUMsSUFBSSxDQUFDLGdCQUFnQjs7WUFDekIsSUFBUztRQUNiLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FDaEMsQ0FBQzs7Z0JBQ1EsYUFBYSxHQUFFLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxJQUFJLEVBQUMsR0FBRyxDQUFDO1lBQzVELFdBQVcsR0FBQyxhQUFhLENBQUM7UUFDL0IsQ0FBQztRQUNELElBQUksQ0FBQSxDQUFDO1lBQ0csV0FBVyxHQUFDLElBQUksQ0FBQztRQUNyQixDQUFDO1FBR1IsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUN0QyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsV0FBVyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUU7Z0JBQ3BGLElBQUksR0FBRyxRQUFRLENBQUM7Z0JBQ2hCLElBQUksQ0FBQyxZQUFZLEdBQUMsUUFBUSxDQUFDO1lBQy9CLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQ2IsQ0FBQyxFQUFFLEdBQUcsRUFBRTtnQkFDSixVQUFVLENBQUMsR0FBRyxFQUFFO29CQUNaLHlDQUF5QztvQkFDekMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO2dCQUNmLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNWLENBQUMsQ0FBQyxDQUFDO1FBQ04sQ0FBQztJQUNaLENBQUM7Ozs7SUFFRCxTQUFTO1FBQ1AsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNkLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDOUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDOUIsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQ3JCLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUUzQixDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDUixDQUFDOzs7O0lBRUMsYUFBYTtRQUNYLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNoQyxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFFLEtBQUssQ0FBQyxDQUMxQixDQUFDO1lBR0QsRUFBRSxDQUFBLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBLENBQUM7Z0JBQ2YsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUM7WUFDekQsQ0FBQztZQUFDLElBQUksQ0FBQSxDQUFDO2dCQUVBLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUNuQyxDQUFDO1FBQ0gsQ0FBQztRQUVDLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFO1lBQzFELElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUs7WUFDakUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO1FBQ3RFLDZCQUE2QjtRQUM3QixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRWhELElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFVBQVUsRUFBRTthQUNyQixLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUE7UUFDdkIsaUJBQWlCO1FBRW5CLElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLFdBQVcsRUFBRTthQUN0QixVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDaEMsSUFBSSxDQUFDLFNBQVMsR0FBQyxFQUFFLENBQUM7UUFDbEIsZ0JBQWdCO1FBQ2hCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUUsQ0FBQyxDQUFDLEVBQUMsRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEUsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzlCLElBQUksQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLGdCQUFnQjtRQUNoQixJQUFJLENBQUMsR0FBRztZQUNOLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7aUJBQzlCLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztpQkFDaEUsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUE7UUFDdkUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQ3ZQLENBQUM7Ozs7SUFFRCxXQUFXO1FBQ1QsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDOztZQUNsQixPQUFlOztZQUNmLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLFlBQVksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQzdHLGFBQWE7UUFDYixFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxJQUFFLElBQUksQ0FBQyxDQUNqQyxDQUFDO1lBQ0MsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7aUJBQ1IsSUFBSSxDQUFDLFdBQVcsRUFBRSxjQUFjLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7aUJBQ3JELElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ2xDLENBQUM7UUFDSCxJQUFJLENBQ0gsQ0FBQztZQUNBLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO2lCQUNOLElBQUksQ0FBQyxXQUFXLEVBQUUsY0FBYyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDO2lCQUNyRCxJQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzNCLFNBQVMsQ0FBQyxNQUFNLENBQUM7aUJBQ2hCLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO2lCQUNaLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO2lCQUNaLElBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDO2lCQUNuQixJQUFJLENBQUMsV0FBVyxFQUFFLFlBQVksQ0FBQztpQkFDL0IsS0FBSyxDQUFDLGFBQWEsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUV4QyxDQUFDO1FBQ0MsaUJBQWlCO1FBQ2pCLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO2FBQ1YsSUFBSSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFM0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRTVELEdBQUcsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLEVBQUUsT0FBTyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxFQUFFLENBQUM7O2dCQUN4RCxVQUFVLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxZQUFZLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUV0SCxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDaEQsQ0FBQzs7O1lBRUcsU0FBUztRQUNiLEdBQUcsQ0FBQyxDQUFDLFNBQVMsR0FBRyxDQUFDLEVBQUUsU0FBUyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxFQUFFLENBQUM7OztnQkFFOUQsVUFBVSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDdEgsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ2hELENBQUMsQ0FBQSxvQkFBb0I7SUFDdkIsQ0FBQzs7Ozs7OztJQUVELFdBQVcsQ0FBQyxDQUFNLEVBQUUsQ0FBUyxFQUFFLEtBQVc7O1lBQ3BDLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVzs7Y0FDckIsSUFBSSxHQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUU7YUFDbkIsQ0FBQyxDQUFFLENBQUMsQ0FBQyxFQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDbkQsQ0FBQyxDQUFFLENBQUMsQ0FBQyxFQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEQsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7YUFDYixJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDbEIsSUFBSSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7YUFDcEIsSUFBSSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDekMsSUFBSSxDQUFDLGNBQWMsRUFBRSxHQUFHLENBQUM7YUFDekIsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUM7YUFDZixJQUFJLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQzthQUNwQixJQUFJLENBQUMsV0FBVztRQUNmLG9EQUFvRDtRQUNwRCxZQUFZLEdBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDdkMsWUFBWTtRQUVaLENBQUMsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDO2FBQ2YsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7YUFDaEIsS0FBSyxFQUFFO2FBQ1AsTUFBTSxDQUFDLFFBQVEsQ0FBQzthQUNoQixJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQzthQUNsQixJQUFJLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUN2QyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDNUQsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQzVELElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO2FBQ1osSUFBSSxDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUM7YUFDekIsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQ3JCLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQzNCLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFFckQsQ0FBQyxDQUFDO2FBQ0QsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQ3JCLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FDdEIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQzNCO2lCQUNFLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUM7aUJBQzFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUNqRCxDQUFDLENBQUM7YUFDRCxFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDcEIsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsQ0FBQztRQUNwRCxDQUFDLENBQUM7YUFFRCxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQzthQUNuQixFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDakIsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUM5QixJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUN2QyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQ2xELHFCQUFxQjtRQUN2QixDQUFDLENBQUM7YUFDRCxJQUFJLENBQUMsV0FBVztRQUNmLG9EQUFvRDtRQUNwRCxZQUFZLEdBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFFdkMsb0VBQW9FO1FBQ3BFLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3BCLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDO2lCQUNwQixJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztpQkFDaEIsS0FBSyxFQUFFO2lCQUNQLE1BQU0sQ0FBQyxNQUFNLENBQUM7aUJBQ2QsS0FBSyxDQUFDLGFBQWEsRUFBQyxNQUFNLENBQUM7aUJBQzNCLElBQUksQ0FBQyxhQUFhLEVBQUUsUUFBUSxDQUFDO2lCQUM3QixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFDLEVBQUU7Z0JBQ2pCLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFDLENBQUMsQ0FBQyxDQUFBLENBQUM7b0JBQzNCLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDO2dCQUN6QixDQUFDO2dCQUFDLElBQUksQ0FBQyxDQUFDO29CQUNOLE1BQU0sQ0FBQyxPQUFPLENBQUM7Z0JBQ2pCLENBQUM7WUFDSCxDQUFDLENBQUM7aUJBQ0QsSUFBSSxDQUFDLEdBQUcsRUFBRSxVQUFTLENBQUM7Z0JBQ25CLG1EQUFtRDtnQkFDakQsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUM3QyxDQUFDLENBQUM7aUJBQ0YsSUFBSSxDQUFDLEdBQUcsRUFBRSxVQUFTLENBQUM7O29CQUNmLEdBQUcsR0FBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2hDLEVBQUUsQ0FBQSxDQUFDLElBQUksQ0FBQyxDQUNWLENBQUM7b0JBQ0MsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUEsUUFBUTtnQkFDckMsQ0FBQztnQkFDRCxJQUFJLENBQUMsQ0FBQztvQkFDSixNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7Z0JBQ3pCLENBQUM7Z0JBQ04sd0NBQXdDO2dCQUN0QyxnREFBZ0Q7WUFDcEQsQ0FBQyxDQUFDO2lCQUNELElBQUksQ0FBQyxVQUFTLENBQUM7Z0JBQ1YsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEMsQ0FBQyxDQUFDO2lCQUNELElBQUksQ0FBQyxXQUFXLEVBQ2QsWUFBWSxHQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBRTFDLENBQUM7UUFDSSxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztZQUNyQixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUMxQixDQUFDO1FBQ0QsSUFBSSxDQUFDLENBQUM7WUFDTCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztRQUN6QixDQUFDO0lBRUosQ0FBQzs7Ozs7OztJQUVELGFBQWEsQ0FBQyxDQUFNLEVBQUUsQ0FBUyxFQUFFLEtBQVc7Ozs7Y0FHcEMsU0FBUyxHQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUU7YUFDeEIsQ0FBQyxDQUFFLENBQUMsQ0FBQyxFQUFDLEVBQUU7O2dCQUNILEdBQUcsR0FBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekIsQ0FBQyxDQUFDO2FBQ0QsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDLEVBQUU7O2dCQUNGLEdBQUcsR0FBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekIsQ0FBQyxDQUFDO1FBRUosMEJBQTBCO1FBQzFCLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO2FBQ2IsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ2pCLEtBQUssQ0FBQyxRQUFRLEVBQ2IsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUN6QjthQUNBLElBQUksQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDO2FBQ3BCLEtBQUssQ0FBQyxjQUFjLEVBQUUsS0FBSyxDQUFDO2FBQzVCLElBQUksQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDO2FBQ3BCLElBQUksQ0FBQyxXQUFXO1FBQ2Ysb0RBQW9EO1FBQ3BELFlBQVksR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQzs7O1lBR2xDLElBQUksR0FBRyxFQUFFLENBQUMsSUFBSSxFQUFFO2FBQ2pCLENBQUMsQ0FBRSxDQUFDLENBQUMsRUFBQyxFQUFFOztnQkFDSCxHQUFHLEdBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pCLENBQUMsQ0FBQzthQUNELEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO2FBQ2YsRUFBRSxDQUFFLENBQUMsQ0FBQyxFQUFDLEVBQUU7O2dCQUNKLEdBQUcsR0FBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekIsQ0FBQyxDQUFDO1FBRUosQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7YUFDYixJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDakIsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUM7YUFDZixJQUFJLENBQUMsV0FBVztRQUNmLG1EQUFtRDtRQUNuRCxZQUFZLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO2FBQ2xDLEtBQUssQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDO2FBQ3ZCLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUNyQzthQUNBLEtBQUssQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUE7SUFDMUIsQ0FBQzs7Ozs7O0lBRUQsa0JBQWtCLENBQUMsV0FBZ0IsRUFBRSxLQUFhOztZQUM1QyxHQUFHLEdBQUcsRUFBRTtRQUNaLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqRSxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDekUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN2QixDQUFDOzs7OztJQUVELFdBQVcsQ0FBQyxJQUFTOztZQUNmLFNBQVMsR0FBRyxFQUFFOztZQUNkLFdBQVcsR0FBRyxFQUFFOztZQUNoQixRQUFRO1FBQ1osbUNBQW1DO1FBQ25DLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUU7O2dCQUNqQixJQUFJLEdBQUcsRUFBRTs7Z0JBQ1QsS0FBSztZQUNULEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2pELHlEQUF5RDtnQkFDekQsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUM1QixTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUN4QixDQUFDO1lBQ0gsQ0FBQyxDQUFBLGNBQWM7WUFDZixLQUFLLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3pDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDMUIsQ0FBQyxDQUFDLENBQUM7UUFDSCxRQUFRLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzlDLE1BQU0sQ0FBQyxRQUFRLENBQUM7SUFDbEIsQ0FBQzs7Ozs7SUFFRCxnQkFBZ0IsQ0FBQyxLQUFZOztZQUN2QixDQUFDOztZQUNELEdBQUcsR0FBRyxDQUFDO1FBQ1gsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ2xDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUNuQixHQUFHLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2pCLENBQUMsQ0FBQSxVQUFVO1FBQ2IsQ0FBQyxDQUFBLFVBQVU7UUFDWCxNQUFNLENBQUMsR0FBRyxDQUFDO0lBQ2IsQ0FBQzs7Ozs7O0lBR0QsYUFBYSxDQUFDLElBQVM7UUFDckIsSUFBSSxDQUFDLGVBQWUsR0FBQyxFQUFFLENBQUM7UUFDeEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRTtZQUM5QixFQUFFLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7b0JBQ1YsV0FBVyxHQUFRLEVBQUU7Z0JBQ3pCLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxlQUFlLEVBQUUsUUFBUSxFQUFFLEVBQUU7b0JBQzVDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsZUFBZSxDQUFDO2dCQUN6RCxDQUFDLENBQUMsQ0FBQyxDQUFBLHFCQUFxQjtnQkFDeEIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDekMsQ0FBQyxDQUFBLFNBQVM7UUFDWixDQUFDLENBQUMsQ0FBQyxDQUFBLHFCQUFxQjs7O1lBRXBCLHFCQUFxQixHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7UUFFNUUsSUFBSSxDQUFDLElBQUksR0FBRyxxQkFBcUIsQ0FBQztJQUNwQyxDQUFDOzs7O0lBRUQsY0FBYztRQUNaLElBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFO1lBQ3ZDLEVBQUUsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDOztvQkFDVixZQUFZLEdBQUcsRUFBRTtnQkFDckIsWUFBWSxDQUFDLE9BQU8sQ0FBQyxHQUFHLE9BQU8sQ0FBQztnQkFDaEMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3pELElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ3RDLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7Ozs7O0lBRUQsaUJBQWlCLENBQUMsVUFBZTs7WUFDM0IsR0FBRyxHQUFHLEVBQUU7UUFDWixHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQzs7WUFDNUIsSUFBSSxHQUFHLEVBQUU7UUFDYixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUMxQixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDdEQsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDOzt3QkFDeEIsTUFBTSxHQUFHLEVBQUU7b0JBQ2YsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQztvQkFDcEIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDcEIsQ0FBQyxDQUFBLGVBQWU7WUFDbEIsQ0FBQyxDQUFBLG9CQUFvQjtRQUN2QixDQUFDLENBQUMsQ0FBQyxDQUFBLG9CQUFvQjtRQUN2QixHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBQ25CLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQy9CLENBQUM7Ozs7O0lBRUQsZUFBZSxDQUFDLFlBQWlCOztZQUMzQixZQUFZLEdBQUcsWUFBWTtRQUMvQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7O2tCQUN0QixFQUFFLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO1lBQ3JDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ3BCLFlBQVksR0FBRyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDbEMsQ0FBQztRQUNILENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLFlBQVksR0FBRyxZQUFZLENBQUM7UUFDOUIsQ0FBQztRQUNELE1BQU0sQ0FBQyxZQUFZLENBQUM7SUFDdEIsQ0FBQzs7OztJQUVELE1BQU07UUFDSixJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztRQUNsQixJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNqQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztRQUN2QixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQztRQUNyRCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDckIsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ3JCLENBQUM7Ozs7OztJQUVELGVBQWUsQ0FBQyxXQUFnQixFQUFFLEtBQWE7O1lBQ3pDLEdBQUcsR0FBRyxFQUFFO1FBQ1osR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUN6RSxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNqQyxDQUFDOzs7Ozs7Ozs7SUFFRCxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUs7UUFDN0IsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDaEIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7aUJBQ1YsSUFBSSxDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUM7aUJBQzFCLElBQUksQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztpQkFDakIsUUFBUSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDeEMsQ0FBQztJQUNILENBQUM7OztZQTFlRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLDJCQUEyQjtnQkFDckMsUUFBUSxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O09BbUJMO2dCQUNMLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQzthQUNiOzs7WUE1QlEsaUJBQWlCO1lBR25CLGtCQUFrQjs7O3VCQTJCdEIsS0FBSyxTQUFDLE9BQU87d0JBQ2IsS0FBSyxTQUFDLFFBQVE7eUJBQ2QsS0FBSyxTQUFDLGFBQWE7b0JBQ25CLEtBQUssU0FBQyxPQUFPO3lCQUNiLEtBQUssU0FBQyxhQUFhO3dCQUNuQixLQUFLLFNBQUMsT0FBTztxQkFDYixLQUFLLFNBQUMsUUFBUTsrQkFDZCxLQUFLLFNBQUMsZ0JBQWdCO3NCQUt0QixTQUFTLFNBQUMsU0FBUztvQkFDbkIsU0FBUyxTQUFDLE9BQU87NEJBQ2pCLE1BQU07NkJBQ04sTUFBTTtxQkFDTixLQUFLLFNBQUMsa0JBQWtCOzs7O0lBaEJ6QixzQ0FBdUM7O0lBQ3ZDLHVDQUF5Qzs7SUFDekMsd0NBQXNDOztJQUN0QyxtQ0FBa0M7O0lBQ2xDLHdDQUFtRDs7SUFDbkQsdUNBQTJDOztJQUMzQyxvQ0FBZ0M7O0lBQ2hDLDhDQUFxRDs7SUFDckQsMENBQWlCOztJQUNqQiwyQ0FBOEI7O0lBQzlCLHdDQUEyQjs7SUFDM0IseUNBQTZCOztJQUM3QixxQ0FBMEM7O0lBQzFDLG1DQUFzQzs7SUFDdEMsMkNBQXVEOztJQUN2RCw0Q0FBd0Q7O0lBQ3hELG9DQUFrRDs7SUFFbEQsaUNBQVM7O0lBQ1QsK0JBQU87O0lBQ1AsK0JBQU87O0lBQ1AsK0JBQU87O0lBQ1Asb0NBQWU7O0lBQ2YsbUNBQWM7O0lBQ2Qsb0NBQWlCOztJQUNqQiwrQkFBVTs7SUFDVix1Q0FBZTs7SUFDZixzQ0FBcUI7O0lBQ3JCLDBDQUFxQjs7SUFDckIsOENBQXdCOztJQUN4Qix1Q0FBZTs7SUFDZiw2Q0FBNEI7O0lBQzVCLG1DQUFrQjs7SUFDbEIseUNBQXdCOztJQUN4QixxQ0FBYTs7SUFDRCx1Q0FBb0M7O0lBQUMsb0NBQWlDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgT25Jbml0LCB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBBbWV4aW9EM0Jhc2VDaGFydENvbXBvbmVudCB9IGZyb20gXCIuLi9iYXNlL2Jhc2UuY29tcG9uZW50XCI7XG5pbXBvcnQgeyBQbG90Q2FydCB9IGZyb20gXCIuLi9iYXNlL2NoYXJ0LmNvbXBvbmVudFwiO1xuaW1wb3J0IHsgQ29tbWFuRGF0YVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9jb21tYW4uZGF0YS5zZXJ2aWNlJztcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCB7IEtleSB9IGZyb20gJ3NlbGVuaXVtLXdlYmRyaXZlcic7XG5pbXBvcnR7RGV2aWNlUXVlcnlTZXJ2aWNlfSBmcm9tICcuLi9zZXJ2aWNlcy9kZXZpY2UucXVlcnkuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2FtZXhpby1kMy1jaGFydC1tdWx0aWFyZWEnLFxuICB0ZW1wbGF0ZTogYFxuPGRpdiAgKm5nSWY9XCJkcmlsbGFibGVGbGFnXCIgI2RpdmlkICh3aW5kb3c6cmVzaXplKT1cInJlc2l6ZSgpXCI+XG48dGFibGUgc3R5bGU9XCJ3aWR0aDogMTAwJTtcIiAjY2hhcnRJZD5cbiAgPHRyPlxuICAgICAgPHRkIHN0eWxlPVwiZm9udC1zaXplOiAxOHB4OyBmb250LXdlaWdodDogYm9sZDsgXCI+IHt7dGl0bGV9fSA8L3RkPlxuICA8L3RyPlxuICA8dHI+XG4gICAgICA8dGQ+XG4gICAgICAgICAgPHN2ZyBbYXR0ci5oZWlnaHRdPVwic3ZnaGVpZ2h0XCIgW2F0dHIud2lkdGhdPVwic3Znd2lkdGhcIiBbYXR0ci5pZF09XCJjb21wb25lbnRJZFwiPlxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgPC90ZD5cbiAgPC90cj5cbiAgPHRyPlxuICAgICAgPHRkIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7IHBhZGRpbmc6IDVweDtcIj5cbiAgICAgICAgICA8YW1leGlvLWQzLWxlZ2VuZCAqbmdJZj1cImxlZ2VuZFwiIFtob3Jpem9udGFsXT1cInRydWVcIiAob25DbGljayk9XCJvbkFyZWFMZWdlbmRDbGljaygkZXZlbnQpXCIgW2RhdGFdPVwibGVnZW5kQXJyYXlcIiBzdHlsZT1cImhlaWdodDoxMDAlO1wiPlxuICAgICAgICAgIDwvYW1leGlvLWQzLWxlZ2VuZD5cbiAgICAgIDwvdGQ+XG4gIDwvdHI+XG48L3RhYmxlPlxuPC9kaXY+YCxcbiAgc3R5bGVzOiBbYGBdXG59KVxuZXhwb3J0IGNsYXNzIE11bHRpYXJlYUNvbXBvbmVudCBleHRlbmRzIEFtZXhpb0QzQmFzZUNoYXJ0Q29tcG9uZW50IGltcGxlbWVudHMgUGxvdENhcnQsIE9uSW5pdCB7XG4gIEBJbnB1dCgnd2lkdGgnKSBzdmd3aWR0aDogbnVtYmVyID0gMzAwO1xuICBASW5wdXQoJ2hlaWdodCcpIHN2Z2hlaWdodDogbnVtYmVyID0gMzUwO1xuICBASW5wdXQoJ2RhdGEtcmVhZGVyJykgZGF0YXJlYWRlcjogYW55O1xuICBASW5wdXQoJ2xldmVsJykgbGV2ZWw6IG51bWJlciA9IDA7XG4gIEBJbnB1dCgnbGFiZWwtY29sb3InKSBsYWJlbGNvbG9yOiBzdHJpbmcgPSBcImJsYWNrXCI7XG4gIEBJbnB1dCgnbGFiZWwnKSBsYWJlbGZsYWc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCd0YXJnZXQnKSB0YXJnZXQ6IG51bWJlcjtcbiAgQElucHV0KCdkcmlsbGFibGUtZGF0YScpIGRyaWxsYWJsZWRhdGFrZXk6IGFueVtdID0gW11cbiAgaHR0cHJlc3BvbnNlOmFueTtcbiAgZHJpbGxhYmxlRmxhZzogYm9vbGVhbiA9IHRydWU7XG4gIHJlc2l6ZWZsYWc6Ym9vbGVhbiA9IGZhbHNlO1xuICB0b2dnbGVsYWJlbDogYm9vbGVhbiA9IGZhbHNlO1xuICBAVmlld0NoaWxkKCdjaGFydElkJykgY2hhcnRJZDogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgnZGl2aWQnKSBkaXZpZDogRWxlbWVudFJlZjtcbiAgQE91dHB1dCgpIG9uTGVnZW5kQ2xpY2s6IGFueSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAT3V0cHV0KCkgb25Ub29sdGlwQ2xpY2s6IGFueSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBASW5wdXQoJ2hvcml6b250YWwtc2NhbGUnKSBoU2NhbGU6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIHN2ZzogYW55O1xuICB4OiBhbnk7XG4gIHk6IGFueTtcbiAgejogYW55O1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgd2lkdGg6IG51bWJlcjtcbiAgbWFyZ2luOiBhbnkgPSB7fTtcbiAgaTogbnVtYmVyO1xuICBwYXJzZVRpbWU6IGFueTtcbiAga2V5QXJyYXk6IGFueVtdID0gW107XG4gIG1heGltdW1WYWx1ZTogbnVtYmVyO1xuICBwcmVkZWZpbmVkQ29sb3JzOiBhbnlbXTtcbiAgYXJlYUFycmF5OiBhbnk7XG4gIHRyYW5zZm9ybWVkZGF0YTogYW55W10gPSBbXTtcbiAgZGF0YTE6IGFueVtdID0gW107XG4gIGxlZ2VuZEFycmF5OiBhbnlbXSA9IFtdO1xuICB0b29sdGlwOiBhbnk7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbXlzZXJ2aWNlOiBDb21tYW5EYXRhU2VydmljZSxwcml2YXRlIGRldmljZTpEZXZpY2VRdWVyeVNlcnZpY2UpIHtcblxuICAgIHN1cGVyKFwiYXJlYWNoYXJ0XCIpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy50b2dnbGVsYWJlbCA9IGZhbHNlO1xuICAgICBsZXQgcmVzO1xuICAgICBpZih0aGlzLmxldmVsPD0xKXtcbiAgICBpZiAodGhpcy5odHRwbWV0aG9kICYmIHRoaXMuaHR0cHVybCkge1xuICAgICAgdGhpcy5teXNlcnZpY2UuZmV0Y2hVcmxEYXRhKHRoaXMuaHR0cHVybCwgdGhpcy5odHRwbWV0aG9kKS5zdWJzY3JpYmUoKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHRoaXMuaHR0cHJlc3BvbnNlPXJlc3BvbnNlO1xuICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmdldFJlc3BvbnNlRGF0YShyZXNwb25zZSk7XG4gICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgIH0sICgpID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy50cmFuc2Zvcm1EYXRhKHRoaXMuZGF0YSk7XG4gICAgICAgICAgdGhpcy5pbml0QXJlYUNoYXJ0KCk7XG4gICAgICAgICAgdGhpcy5wbG90RDNDaGFydCgpO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhMSkge1xuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1EYXRhKHRoaXMuZGF0YSk7XG4gICAgICAgIHRoaXMuaW5pdEFyZWFDaGFydCgpO1xuICAgICAgICB0aGlzLnBsb3REM0NoYXJ0KCk7XG4gICAgICB9LCAwKTtcbiAgICB9XG5cbiAgfVxuICB9XG5cblxuICBmZXRjaERhdGEoZGF0YTogYW55KSB7XG4gICBcbiAgICBsZXQgcmVxdWVzdEpzb247XG4gICAgbGV0IGtleT10aGlzLmRyaWxsYWJsZWRhdGFrZXk7XG4gICAgbGV0IHJlc3A6IGFueTtcbiAgICBpZih0aGlzLmRyaWxsYWJsZWRhdGFrZXkubGVuZ3RoKVxuICAgIHtcbiAgICAgICAgIGxldCBkcmlsbGFibGVkYXRhPSB0aGlzLmdldE11bHRpcGxlRHJpbGxibGVLZXlEYXRhKGRhdGEsa2V5KTtcbiAgICAgICAgIHJlcXVlc3RKc29uPWRyaWxsYWJsZWRhdGE7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICAgICAgICByZXF1ZXN0SnNvbj1kYXRhOyAgXG4gICAgICAgIH1cbiAgXG4gICAgXG4gaWYgKHRoaXMuaHR0cG1ldGhvZCAmJiB0aGlzLmh0dHB1cmwpIHtcbiB0aGlzLm15c2VydmljZS5wb3N0ZmV0Y2hEYXRhKHRoaXMuaHR0cHVybCx0aGlzLmh0dHBtZXRob2QsIHJlcXVlc3RKc29uKS5zdWJzY3JpYmUoKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICByZXNwID0gcmVzcG9uc2U7XG4gICAgICAgICAgICB0aGlzLmh0dHByZXNwb25zZT1yZXNwb25zZTtcbiAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vdGhpcy5kYXRhID0gdGhpcy5nZXRSZXNwb25zZURhdGEocmVzcCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3Q2hhcnQoKTtcbiAgICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgfVxufVxuXG5kcmF3Q2hhcnQoKSB7XG4gIHNldFRpbWVvdXQoKCkgPT4geyBcbiAgICB0aGlzLmRhdGEgPSB0aGlzLmdldFJlc3BvbnNlRGF0YSh0aGlzLmh0dHByZXNwb25zZSk7XG4gICAgICAgICAgdGhpcy50cmFuc2Zvcm1EYXRhKHRoaXMuZGF0YSk7XG4gICAgICAgICAgdGhpcy5pbml0QXJlYUNoYXJ0KCk7XG4gICAgICAgICAgdGhpcy5wbG90RDNDaGFydCgpOyAgICAgIFxuXG4gIH0sIDApO1xufSBcblxuICBpbml0QXJlYUNoYXJ0KCkge1xuICAgIHRoaXMudG9vbHRpcCA9IHRoaXMudG9vbFRpcChkMyk7XG4gICAgaWYodGhpcy5yZXNpemVmbGFnPT1mYWxzZSlcbiAgICB7XG5cbiAgICBcbiAgICBpZih0aGlzLmNoYXJ0SWQpe1xuICAgICAgdGhpcy5zdmd3aWR0aCA9IHRoaXMuY2hhcnRJZC5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgIH0gZWxzZXtcbiAgICBcbiAgICAgICAgICAgdGhpcy5zdmd3aWR0aCA9IHRoaXMuc3Znd2lkdGg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgICB0aGlzLm1hcmdpbiA9IHsgdG9wOiAzMCwgcmlnaHQ6IDQ0LCBib3R0b206IDUwLCBsZWZ0OiAzMCB9LFxuICAgICAgdGhpcy53aWR0aCA9IHRoaXMuc3Znd2lkdGggLSB0aGlzLm1hcmdpbi5sZWZ0IC0gdGhpcy5tYXJnaW4ucmlnaHQsXG4gICAgICB0aGlzLmhlaWdodCA9IHRoaXMuc3ZnaGVpZ2h0IC0gdGhpcy5tYXJnaW4udG9wIC0gdGhpcy5tYXJnaW4uYm90dG9tO1xuICAgIC8vZmluZCBtYXggYW5kIGluaXRpYWxpemUgbWF4XG4gICAgdGhpcy5tYXhpbXVtVmFsdWUgPSB0aGlzLmZpbmRNYXhEYXRhKHRoaXMuZGF0YSk7XG5cbiAgICB0aGlzLnggPSBkMy5zY2FsZVBvaW50KClcbiAgICAgIC5yYW5nZShbMCwgdGhpcy53aWR0aF0pXG4gICAgICAvLyAucGFkZGluZygwLjEpO1xuXG4gICAgdGhpcy55ID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgICAgLnJhbmdlUm91bmQoW3RoaXMuaGVpZ2h0LCAwXSk7XG4gICAgdGhpcy5hcmVhQXJyYXk9W107XG4gICAgLy9zZXQgeCB5IGRvbWFpblxuICAgIHRoaXMuYXJlYUFycmF5ID0gdGhpcy5kYXRhLm1hcCggKGQpPT4geyByZXR1cm4gZFtPYmplY3Qua2V5cyhkKVswXV07IH0pO1xuICAgIHRoaXMueC5kb21haW4odGhpcy5hcmVhQXJyYXkpO1xuICAgIHRoaXMueS5kb21haW4oWzAsIHRoaXMubWF4aW11bVZhbHVlXSk7XG4gICAgLy9pbml0aWFsaXplIHN2Z1xuICAgIHRoaXMuc3ZnID1cbiAgICAgIGQzLnNlbGVjdChcIiNcIiArIHRoaXMuY29tcG9uZW50SWQpXG4gICAgICAgIC5hdHRyKFwid2lkdGhcIiwgdGhpcy53aWR0aCArIHRoaXMubWFyZ2luLmxlZnQgKyB0aGlzLm1hcmdpbi5yaWdodClcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgdGhpcy5oZWlnaHQgKyB0aGlzLm1hcmdpbi50b3AgKyB0aGlzLm1hcmdpbi5ib3R0b20pXG4gICAgdGhpcy5wcmVkZWZpbmVkQ29sb3JzID0gW1wiIzMzNjZjY1wiLCBcIiNkYzM5MTJcIiwgXCIjZmY5OTAwXCIsIFwiIzEwOTYxOFwiLCBcIiM5OTAwOTlcIiwgXCIjMDA5OWM2XCIsIFwiI2RkNDQ3N1wiLCBcIiM2NmFhMDBcIiwgXCIjYjgyZTJlXCIsIFwiIzMxNjM5NVwiLCBcIiM5OTQ0OTlcIiwgXCIjMjJhYTk5XCIsIFwiI2FhYWExMVwiLCBcIiM2NjMzY2NcIiwgXCIjZTY3MzAwXCIsIFwiIzhiMDcwN1wiLCBcIiM2NTEwNjdcIiwgXCIjMzI5MjYyXCIsIFwiIzU1NzRhNlwiLCBcIiMzYjNlYWNcIl07XG4gIH1cblxuICBwbG90RDNDaGFydCgpIHtcbiAgICB0aGlzLmZvcm1MZWdlbmREYXRhKCk7XG4gICAgbGV0IGNvdW50ZXI6IG51bWJlcjtcbiAgICBsZXQgZyA9IHRoaXMuc3ZnLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHRoaXMubWFyZ2luLmxlZnQgKyBcIixcIiArIHRoaXMubWFyZ2luLnRvcCArIFwiKVwiKTtcbiAgICAvLyBhZGQgdGhlIFggXG4gICAgaWYodGhpcy5kZXZpY2UuSXNEZXNrdG9wKCk9PXRydWUpXG4gICAge1xuICAgICAgZy5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIHRoaXMuaGVpZ2h0ICsgXCIpXCIpXG4gICAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSh0aGlzLngpKVxuICAgIH1cbiAgZWxzZVxuICAge1xuICAgIGcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyB0aGlzLmhlaWdodCArIFwiKVwiKVxuICAgICAgICAgIC5jYWxsKGQzLmF4aXNCb3R0b20odGhpcy54KSkuXG4gICAgICAgICAgIHNlbGVjdEFsbChcInRleHRcIilcbiAgICAgICAgICAgLmF0dHIoXCJ5XCIsIDApXG4gICAgICAgICAgIC5hdHRyKFwieFwiLCA5KVxuICAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcbiAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoNjApXCIpXG4gICAgICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsIFwic3RhcnRcIik7XG5cbiAgfVxuICAgIC8vIGFkZCB0aGUgWSBBeGlzXG4gICAgZy5hcHBlbmQoXCJnXCIpXG4gICAgICAuY2FsbChkMy5heGlzTGVmdCh0aGlzLnkpKTtcblxuICAgICAgdGhpcy5wbG90TGluZShnLCB0aGlzLngsIHRoaXMueSwgdGhpcy5oZWlnaHQsIHRoaXMud2lkdGgpO1xuXG4gICAgZm9yIChjb3VudGVyID0gMTsgY291bnRlciA8IHRoaXMua2V5QXJyYXkubGVuZ3RoOyBjb3VudGVyKyspIHtcbiAgICAgIGxldCBpbm5lckdyb3VwID0gdGhpcy5zdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgdGhpcy5tYXJnaW4ubGVmdCArIFwiLFwiICsgdGhpcy5tYXJnaW4udG9wICsgXCIpXCIpO1xuXG4gICAgICB0aGlzLnBsb3RBcmVhQ2hhcnQoaW5uZXJHcm91cCwgY291bnRlciwgdGhpcyk7XG4gICAgfVxuICAgIC8vY2FsbCBtZXRob2QgdG8gcGxvdCBwb2ludHNcbiAgICBsZXQgaW5jcmVtZW50O1xuICAgIGZvciAoaW5jcmVtZW50ID0gMTsgaW5jcmVtZW50IDwgdGhpcy5rZXlBcnJheS5sZW5ndGg7IGluY3JlbWVudCsrKSB7XG4gICAgICAvL3Bsb3QgbGluZVxuICAgICAgbGV0IGlubmVyR3JvdXAgPSB0aGlzLnN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB0aGlzLm1hcmdpbi5sZWZ0ICsgXCIsXCIgKyB0aGlzLm1hcmdpbi50b3AgKyBcIilcIik7XG4gICAgICB0aGlzLlBsb3RMaW5lRG90KGlubmVyR3JvdXAsIGluY3JlbWVudCwgdGhpcyk7XG4gICAgfS8vaW5jcmVtZW50IGZvciBlbmRzXG4gIH1cblxuICBQbG90TGluZURvdChnOiBhbnksIGk6IG51bWJlciwgdGhpc2E6IHRoaXMpIHtcbiAgICBsZXQgZmxhZyA9IHRoaXMudG9nZ2xlbGFiZWw7XG4gICAgY29uc3QgbGluZSA9IGQzLmxpbmUoKVxuICAgICAgLngoIChkKT0+IHsgcmV0dXJuIHRoaXNhLngoZFtPYmplY3Qua2V5cyhkKVswXV0pOyB9KVxuICAgICAgLnkoIChkKT0+IHsgcmV0dXJuIHRoaXNhLnkoZFtPYmplY3Qua2V5cyhkKVtpXV0pOyB9KTtcbiAgICBnLmFwcGVuZChcInBhdGhcIilcbiAgICAgIC5kYXRhKFt0aGlzYS5kYXRhXSlcbiAgICAgIC5hdHRyKFwiZmlsbFwiLCBcIm5vbmVcIilcbiAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIHRoaXNhLnByZWRlZmluZWRjb2xvcnNbaV0pXG4gICAgICAuYXR0cihcInN0cm9rZS13aWR0aFwiLCAxLjUpXG4gICAgICAuYXR0cihcImRcIiwgbGluZSlcbiAgICAgIC5hdHRyKFwib3BhY2l0eVwiLCAwLjIpXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLFxuICAgICAgICAvLyBcInRyYW5zbGF0ZShcIiArIHRoaXMubWFyZ2luLmxlZnQgKyBcIixcIiArIDAgKyBcIilcIik7XG4gICAgICAgIFwidHJhbnNsYXRlKFwiICsgIDAgKyBcIixcIiArIDAgKyBcIilcIik7XG4gICAgLy8tLS0tLS0tLS0tXG5cbiAgICBnLnNlbGVjdEFsbCgnZG90JylcbiAgICAgIC5kYXRhKHRoaXNhLmRhdGEpXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgIC5hdHRyKCdvcGFjaXR5JywgMClcbiAgICAgIC5hdHRyKFwiZmlsbFwiLCB0aGlzYS5wcmVkZWZpbmVkY29sb3JzW2ldKVxuICAgICAgLmF0dHIoXCJjeFwiLCAoZCkgPT4geyByZXR1cm4gdGhpc2EueChkW09iamVjdC5rZXlzKGQpWzBdXSk7IH0pXG4gICAgICAuYXR0cihcImN5XCIsIChkKSA9PiB7IHJldHVybiB0aGlzYS55KGRbT2JqZWN0LmtleXMoZClbaV1dKTsgfSlcbiAgICAgIC5hdHRyKCdyJywgNClcbiAgICAgIC5hdHRyKFwiY3Vyc29yXCIsIFwicG9pbnRlclwiKVxuICAgICAgLm9uKFwibW91c2VvdmVyXCIsIChkKSA9PiB7XG4gICAgICAgIHRoaXMuZm9ybVRvb2x0aXBEYXRhKGQsIGkpO1xuICAgICAgICByZXR1cm4gdGhpcy50b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcInZpc2libGVcIik7XG5cbiAgICAgIH0pXG4gICAgICAub24oXCJtb3VzZW1vdmVcIiwgKGQpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9vbHRpcC5odG1sKFxuICAgICAgICAgIHRoaXMuZm9ybVRvb2x0aXBEYXRhKGQsIGkpXG4gICAgICAgIClcbiAgICAgICAgICAuc3R5bGUoXCJ0b3BcIiwgKGQzLmV2ZW50LnBhZ2VZIC0gMTApICsgXCJweFwiKVxuICAgICAgICAgIC5zdHlsZShcImxlZnRcIiwgKGQzLmV2ZW50LnBhZ2VYICsgMTApICsgXCJweFwiKTtcbiAgICAgIH0pXG4gICAgICAub24oXCJtb3VzZW91dFwiLCAoZCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy50b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgIH0pXG5cbiAgICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgMSlcbiAgICAgIC5vbihcImNsaWNrXCIsIChkKSA9PiB7XG4gICAgICAgIHRoaXMub25BcmVhVG9vbHRpcENsaWNrKGQsIGkpO1xuICAgICAgICB0aGlzLmZvcmRyaWxsYWJsZUNsaWNrKHRoaXMsIGQsIGV2ZW50KTtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9vbHRpcC5zdHlsZShcInZpc2liaWxpdHlcIiwgXCJoaWRkZW5cIik7XG4gICAgICAgIC8vdGhpcy5jaGFydENsaWNrKGQpO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsXG4gICAgICAgIC8vIFwidHJhbnNsYXRlKFwiICsgdGhpcy5tYXJnaW4ubGVmdCArIFwiLFwiICsgMCArIFwiKVwiKTtcbiAgICAgICAgXCJ0cmFuc2xhdGUoXCIgKyAgMCArIFwiLFwiICsgMCArIFwiKVwiKTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgaWYodGhpcy5sYWJlbGZsYWcpIHtcbiAgICBnLnNlbGVjdEFsbCgnbGFiZWxzJylcbiAgICAuZGF0YSh0aGlzYS5kYXRhKVxuICAgIC5lbnRlcigpXG4gICAgLmFwcGVuZCgndGV4dCcpXG4gICAgLnN0eWxlKFwiZm9udC13ZWlnaHRcIixcImJvbGRcIilcbiAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXG4gICAgLmF0dHIoXCJmaWxsXCIsIChkKT0+e1xuICAgICAgaWYodGhpcy5sYWJlbGNvbG9yLmxlbmd0aD4wKXtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFiZWxjb2xvcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBcImJsYWNrXCI7XG4gICAgICB9XG4gICAgfSlcbiAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgLy8gbGV0IGxlbmd0aCA9IFN0cmluZyhkW09iamVjdC5rZXlzKGQpW2ldXSkubGVuZ3RoXG4gICAgICAgIHJldHVybiB0aGlzYS54KGRbT2JqZWN0LmtleXMoZClbMF1dKSArIDIwO1xuICAgICB9KVxuICAgIC5hdHRyKFwieVwiLCBmdW5jdGlvbihkKSB7XG4gICAgICBsZXQga2V5OiBhbnkgPSBbT2JqZWN0LmtleXMoZClbaV1dO1xuICAgICAgICBpZihmbGFnKVxuICAgICAge1xuICAgICAgICByZXR1cm4gdGhpc2EueShkW2tleV0pIC0gNTsvLyBmciB1cFxuICAgICAgfSBcbiAgICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpc2EueShkW2tleV0pICsgMTU7XG4gICAgICAgICAgIH1cbiAgICAgIC8vIHJldHVybiB0aGlzYS55KGRbT2JqZWN0LmtleXMoZClbaV1dKTtcbiAgICAgICAgLy8gIHJldHVybiB5KGRbT2JqZWN0LmtleXMoZClbMV1dKSt5VGV4dFBhZGRpbmc7XG4gICAgfSlcbiAgICAudGV4dChmdW5jdGlvbihkKXtcbiAgICAgICAgICByZXR1cm4gZFtPYmplY3Qua2V5cyhkKVtpXV07XG4gICAgfSlcbiAgICAuYXR0cihcInRyYW5zZm9ybVwiLFxuICAgICAgIFwidHJhbnNsYXRlKFwiICsgIDAgKyBcIixcIiArIDAgKyBcIilcIik7XG5cbn1cbiAgICAgaWYodGhpcy50b2dnbGVsYWJlbCkge1xuICAgICAgdGhpcy50b2dnbGVsYWJlbCA9IGZhbHNlO1xuICAgICB9XG4gICAgIGVsc2Uge1xuICAgICAgdGhpcy50b2dnbGVsYWJlbCA9IHRydWU7XG4gICAgIH1cbiAgICAgXG4gIH1cblxuICBwbG90QXJlYUNoYXJ0KGc6IGFueSwgaTogbnVtYmVyLCB0aGlzYTogdGhpcykge1xuICAgIC8vIGNhbGN1bGF0ZSBhcmVhIGFuZCB2YWx1ZWxpbmVcbiAgICAvLyBkZWZpbmUgdGhlIGxpbmVcbiAgICBjb25zdCB2YWx1ZWxpbmUgPSBkMy5saW5lKClcbiAgICAgIC54KCAoZCk9PiB7XG4gICAgICAgIGxldCBrZXk6IGFueSA9IFtPYmplY3Qua2V5cyhkKVswXV07XG4gICAgICAgIHJldHVybiB0aGlzYS54KGRba2V5XSk7XG4gICAgICB9KVxuICAgICAgLnkoKGQpPT4ge1xuICAgICAgICBsZXQga2V5OiBhbnkgPSBbT2JqZWN0LmtleXMoZClbaV1dO1xuICAgICAgICByZXR1cm4gdGhpc2EueShkW2tleV0pO1xuICAgICAgfSk7XG5cbiAgICAvLyBhZGQgdGhlIHZhbHVlbGluZSBwYXRoLlxuICAgIGcuYXBwZW5kKFwicGF0aFwiKVxuICAgICAgLmRhdGEoW3RoaXMuZGF0YV0pXG4gICAgICAuc3R5bGUoXCJzdHJva2VcIixcbiAgICAgICAgdGhpcy5wcmVkZWZpbmVkQ29sb3JzW2ldXG4gICAgICApXG4gICAgICAuYXR0cihcImZpbGxcIiwgXCJub25lXCIpXG4gICAgICAuc3R5bGUoXCJzdHJva2Utd2lkdGhcIiwgXCIycHhcIilcbiAgICAgIC5hdHRyKFwiZFwiLCB2YWx1ZWxpbmUpXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLFxuICAgICAgICAvLyBcInRyYW5zbGF0ZShcIiArIHRoaXMubWFyZ2luLmxlZnQgKyBcIixcIiArIDAgKyBcIilcIik7XG4gICAgICAgIFwidHJhbnNsYXRlKFwiICsgMCArIFwiLFwiICsgMCArIFwiKVwiKTtcblxuICAgIC8vIGRlZmluZSB0aGUgYXJlYVxuICAgIGxldCBhcmVhID0gZDMuYXJlYSgpXG4gICAgICAueCggKGQpPT4ge1xuICAgICAgICBsZXQga2V5OiBhbnkgPSBbT2JqZWN0LmtleXMoZClbMF1dO1xuICAgICAgICByZXR1cm4gdGhpc2EueChkW2tleV0pO1xuICAgICAgfSlcbiAgICAgIC55MCh0aGlzLmhlaWdodClcbiAgICAgIC55MSggKGQpPT4ge1xuICAgICAgICBsZXQga2V5OiBhbnkgPSBbT2JqZWN0LmtleXMoZClbaV1dO1xuICAgICAgICByZXR1cm4gdGhpc2EueShkW2tleV0pO1xuICAgICAgfSk7XG5cbiAgICBnLmFwcGVuZChcInBhdGhcIilcbiAgICAgIC5kYXRhKFt0aGlzLmRhdGFdKVxuICAgICAgLmF0dHIoXCJkXCIsIGFyZWEpXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLFxuICAgICAgICAvLyBcInRyYW5zbGF0ZShcIiArIHRoaXMubWFyZ2luLmxlZnQgKyBcIixcIiArIDAgKyBcIilcIilcbiAgICAgICAgXCJ0cmFuc2xhdGUoXCIgKyAwICsgXCIsXCIgKyAwICsgXCIpXCIpXG4gICAgICAuc3R5bGUoXCJzdHJva2VcIiwgXCJub25lXCIpXG4gICAgICAuYXR0cihcImZpbGxcIiwgdGhpcy5wcmVkZWZpbmVkQ29sb3JzW2ldXG4gICAgICApXG4gICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDAuNSlcbiAgfVxuXG4gIG9uQXJlYVRvb2x0aXBDbGljayh0b29sdGlwRGF0YTogYW55LCBjb3VudDogbnVtYmVyKSB7XG4gICAgbGV0IG9iaiA9IHt9O1xuICAgIG9ialt0aGlzLmtleUFycmF5WzBdXSA9IHRvb2x0aXBEYXRhW09iamVjdC5rZXlzKHRvb2x0aXBEYXRhKVswXV07XG4gICAgb2JqW3RoaXMua2V5QXJyYXlbY291bnRdXSA9IHRvb2x0aXBEYXRhW09iamVjdC5rZXlzKHRvb2x0aXBEYXRhKVtjb3VudF1dO1xuICAgIHRoaXMuY2hhcnRDbGljayhvYmopO1xuICB9XG5cbiAgZmluZE1heERhdGEoZGF0YTogYW55KSB7XG4gICAgbGV0IHRlbXBBcnJheSA9IFtdO1xuICAgIGxldCBsYXJnZVZhbHVlcyA9IFtdO1xuICAgIGxldCBtYXhWYWx1ZTtcbiAgICAvL2xvZ2ljIHRvIHNlYXJjaCAzIGxhcmdlc3QgdmFsdWVzIFxuICAgIGRhdGEuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGxldCB0ZW1wID0gW107XG4gICAgICBsZXQgdmFsdWU7XG4gICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZWxlbWVudCkpIHtcbiAgICAgICAgLy9leGVtcHRzIGZpcnN0IGNvbHVtbiBvZiBkYXRhIGFzIGl0IGlzIHRyZWF0ZWQgYXMgeC1heGlzXG4gICAgICAgIGlmIChrZXkgIT0gdGhpcy5rZXlBcnJheVswXSkge1xuICAgICAgICAgIHRlbXBBcnJheS5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfS8vZm9yIGxvb3AgZW5kXG4gICAgICB2YWx1ZSA9IHRoaXMuZmluZExhcmdlc3RWYWx1ZSh0ZW1wQXJyYXkpO1xuICAgICAgbGFyZ2VWYWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgbWF4VmFsdWUgPSB0aGlzLmZpbmRMYXJnZXN0VmFsdWUobGFyZ2VWYWx1ZXMpO1xuICAgIHJldHVybiBtYXhWYWx1ZTtcbiAgfVxuXG4gIGZpbmRMYXJnZXN0VmFsdWUoYXJyYXk6IGFueVtdKSB7XG4gICAgbGV0IGk7XG4gICAgbGV0IG1heCA9IDA7XG4gICAgZm9yIChpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoYXJyYXlbaV0gPiBtYXgpIHtcbiAgICAgICAgbWF4ID0gYXJyYXlbaV07XG4gICAgICB9Ly9pZiBlbmRzIFxuICAgIH0vL21heCBlbmRzXG4gICAgcmV0dXJuIG1heDtcbiAgfVxuXG4gIC8vY292ZXJ0IGRhdGFcbiAgdHJhbnNmb3JtRGF0YShkYXRhOiBhbnkpIHtcbiAgICB0aGlzLnRyYW5zZm9ybWVkZGF0YT1bXTtcbiAgICB0aGlzLmtleUFycmF5ID0gZGF0YVswXTtcbiAgICBkYXRhLmZvckVhY2goKGVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgIGxldCBEdW1teU9iamVjdDogYW55ID0ge307XG4gICAgICAgIGVsZW1lbnQuZm9yRWFjaCgoaW5kaXZpZHVhbHZhbHVlLCBrZXlpbmRleCkgPT4ge1xuICAgICAgICAgIER1bW15T2JqZWN0W3RoaXMua2V5QXJyYXlba2V5aW5kZXhdXSA9IGluZGl2aWR1YWx2YWx1ZTtcbiAgICAgICAgfSk7Ly9pbm5lciBmb3IgbG9vcCBlbmRzXG4gICAgICAgIHRoaXMudHJhbnNmb3JtZWRkYXRhLnB1c2goRHVtbXlPYmplY3QpO1xuICAgICAgfS8vaWYgZW5kc1xuICAgIH0pOy8vb3V0ZXIgZm9yIGxvb3AgZW5kc1xuXG4gICAgbGV0IHBhcnNlZHRyYW5zZm9ybWVkZGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy50cmFuc2Zvcm1lZGRhdGEpKTtcblxuICAgIHRoaXMuZGF0YSA9IHBhcnNlZHRyYW5zZm9ybWVkZGF0YTtcbiAgfVxuXG4gIGZvcm1MZWdlbmREYXRhKCkge1xuICAgIHRoaXMubGVnZW5kQXJyYXkgPSBbXTtcbiAgICB0aGlzLmtleUFycmF5LmZvckVhY2goKGVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgIGxldCBsZWdlbmRvYmplY3QgPSB7fTtcbiAgICAgICAgbGVnZW5kb2JqZWN0WydsYWJlbCddID0gZWxlbWVudDtcbiAgICAgICAgbGVnZW5kb2JqZWN0Wydjb2xvciddID0gdGhpcy5wcmVkZWZpbmVkQ29sb3JzW2luZGV4ICsgMV07XG4gICAgICAgIHRoaXMubGVnZW5kQXJyYXkucHVzaChsZWdlbmRvYmplY3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgb25BcmVhTGVnZW5kQ2xpY2sobGVnZW5kRGF0YTogYW55KSB7XG4gICAgbGV0IG9iaiA9IHt9O1xuICAgIG9ialtcImxhYmVsXCJdID0gbGVnZW5kRGF0YS5sYWJlbDtcbiAgICBsZXQgZGF0YSA9IFtdO1xuICAgIHRoaXMuZGF0YS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuZGF0YVswXSkpIHtcbiAgICAgICAgaWYgKGtleSA9PSBsZWdlbmREYXRhLmxhYmVsKSB7XG4gICAgICAgICAgbGV0IG9iamVjdCA9IHt9O1xuICAgICAgICAgIG9iamVjdFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgZGF0YS5wdXNoKG9iamVjdCk7XG4gICAgICAgIH0vL2lubmVyIGlmIGVuZHNcbiAgICAgIH0vL2lubmVyIGZvcmxvb3AgZW5kc1xuICAgIH0pOy8vb3V0ZXIgZm9yZWFjaCBlbmRzXG4gICAgb2JqW1wiZGF0YVwiXSA9IGRhdGE7XG4gICAgdGhpcy5vbkxlZ2VuZENsaWNrLmVtaXQob2JqKTtcbiAgfVxuXG4gIGdldFJlc3BvbnNlRGF0YShodHRwUmVzcG9uc2U6IGFueSkge1xuICAgIGxldCByZXNwb25zZWRhdGEgPSBodHRwUmVzcG9uc2U7XG4gICAgaWYgKHRoaXMuZGF0YXJlYWRlciAhPSBudWxsKSB7XG4gICAgICBjb25zdCBkciA9IHRoaXMuZGF0YXJlYWRlci5zcGxpdCgnLicpO1xuICAgICAgZm9yIChjb25zdCBpciBvZiBkcikge1xuICAgICAgICByZXNwb25zZWRhdGEgPSByZXNwb25zZWRhdGFbaXJdO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXNwb25zZWRhdGEgPSBodHRwUmVzcG9uc2U7XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZWRhdGE7XG4gIH1cblxuICByZXNpemUoKSB7XG4gICAgdGhpcy5zdmd3aWR0aCA9IDA7XG4gICAgdGhpcy5zdmcuc2VsZWN0QWxsKFwiKlwiKS5yZW1vdmUoKTtcbiAgICB0aGlzLnJlc2l6ZWZsYWcgPSB0cnVlO1xuICAgIHRoaXMuc3Znd2lkdGggPSB0aGlzLmRpdmlkLm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgdGhpcy5pbml0QXJlYUNoYXJ0KCk7XG4gICAgdGhpcy5wbG90RDNDaGFydCgpO1xuICB9XG5cbiAgZm9ybVRvb2x0aXBEYXRhKHRvb2x0aXBEYXRhOiBhbnksIGNvdW50OiBudW1iZXIpIHtcbiAgICBsZXQgb2JqID0ge307XG4gICAgb2JqW3RoaXMua2V5QXJyYXlbMF1dID0gdG9vbHRpcERhdGFbT2JqZWN0LmtleXModG9vbHRpcERhdGEpWzBdXTtcbiAgICBvYmpbdGhpcy5rZXlBcnJheVtjb3VudF1dID0gdG9vbHRpcERhdGFbT2JqZWN0LmtleXModG9vbHRpcERhdGEpW2NvdW50XV07XG4gICAgcmV0dXJuIHRoaXMudG9vbFRpcEZvckJhcihvYmopO1xuICB9XG5cbiAgcGxvdExpbmUoZywgeCwgeSwgaGVpZ2h0LCB3aWR0aCkge1xuICAgIGlmICh0aGlzLmhTY2FsZSkge1xuICAgICAgZy5hcHBlbmQoJ2cnKVxuICAgICAgICAuYXR0cihcImNvbG9yXCIsIFwibGlnaHRncmV5XCIpXG4gICAgICAgIC5jYWxsKGQzLmF4aXNMZWZ0KHkpXG4gICAgICAgICAgLnRpY2tTaXplKC13aWR0aCkudGlja0Zvcm1hdCgnJykpO1xuICAgIH1cbiAgfVxufVxuIl19