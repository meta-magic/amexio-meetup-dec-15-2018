/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
import { Component, Input, ViewChild, ElementRef } from "@angular/core";
import { AmexioD3BaseChartComponent } from "../base/base.component";
import { CommanDataService } from '../services/comman.data.service';
import { DeviceQueryService } from '../services/device.query.service';
import * as d3 from 'd3';
export class HistogramComponent extends AmexioD3BaseChartComponent {
    /**
     * @param {?} myservice
     * @param {?} device
     */
    constructor(myservice, device) {
        super('histogram');
        this.myservice = myservice;
        this.device = device;
        this.svgwidth = 300;
        this.svgheight = 400;
        this.color = "blue";
        this.labelflag = false;
        this.labelcolor = "black";
        this.hScale = true;
        this.level = 0;
        this.drillabledatakey = [];
        this.resizeflag = false;
        this.drillableFlag = true;
        this.values = [];
        this.array = [];
        this.xaxisArray = [];
        this.yaxisArray = [];
        this.yaxisData = [];
        this.histogramarray = [];
        this.histogramdata = [];
        this.lengtharray = [];
        this.arrayofLength = [];
        this.chartData = [];
        this.finaldataarray = [];
        this.tooltipArray = [];
        this.index = 0;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /** @type {?} */
        let res;
        if (this.level <= 1) {
            if (this.httpmethod && this.httpurl) {
                this.myservice.fetchUrlData(this.httpurl, this.httpmethod).subscribe((response) => {
                    res = response;
                    this.httpresponse = response;
                }, (error) => {
                }, () => {
                    setTimeout(() => {
                        this.datahisto = [];
                        this.datahisto = this.getResponseData(res);
                        this.transformData();
                        this.plotXaxis();
                        this.plotYaxis();
                        this.tooltipData();
                        this.dataforChart();
                        this.transformData1(this.finaldataarray);
                        this.plotChart();
                    }, 0);
                });
            }
            else if (this.datahisto) {
                setTimeout(() => {
                    this.datahisto = this.getResponseData(this.datahisto);
                    this.transformData();
                    this.plotXaxis();
                    this.plotYaxis();
                    this.tooltipData();
                    this.dataforChart();
                    this.transformData1(this.finaldataarray);
                    this.plotChart();
                }, 0);
            }
        }
    }
    /**
     * @param {?} data
     * @return {?}
     */
    fetchData(data) {
        /** @type {?} */
        let requestJson;
        /** @type {?} */
        let key = this.drillabledatakey;
        /** @type {?} */
        let resp;
        if (this.drillabledatakey.length) {
            /** @type {?} */
            let drillabledata = this.getMultipleDrillbleKeyData(data, key);
            requestJson = drillabledata;
        }
        else {
            requestJson = data;
        }
        if (this.httpmethod && this.httpurl) {
            this.myservice.postfetchData(this.httpurl, this.httpmethod, requestJson).subscribe((response) => {
                resp = response;
                this.httpresponse = response;
            }, (error) => {
            }, () => {
                setTimeout(() => {
                    //this.data = this.getResponseData(resp);
                    this.drawChart();
                }, 0);
            });
        }
    }
    /**
     * @return {?}
     */
    drawChart() {
        setTimeout(() => {
            this.datahisto = this.getResponseData(this.httpresponse);
            this.transformData();
            this.plotXaxis();
            this.plotYaxis();
            this.tooltipData();
            this.dataforChart();
            this.transformData1(this.finaldataarray);
            this.plotChart();
        }, 0);
    }
    /**
     * @param {?} httpResponse
     * @return {?}
     */
    getResponseData(httpResponse) {
        /** @type {?} */
        let responsedata = httpResponse;
        if (this.datareader != null) {
            /** @type {?} */
            const dr = this.datareader.split('.');
            for (const ir of dr) {
                responsedata = responsedata[ir];
            }
        }
        else {
            responsedata = httpResponse;
        }
        return responsedata;
    }
    /**
     * @param {?} data1
     * @return {?}
     */
    transformData1(data1) {
        this.keyArray = [];
        this.legendArray = [];
        data1.forEach((element, i) => {
            if (i == 0) {
                element.forEach((innerelement, index) => {
                    if (index > 0) {
                        this.legendArray[innerelement] = { 'data': [] };
                        this.keyArray.push(innerelement);
                    }
                    else if (index == 0) {
                        this.xaxis = innerelement;
                    }
                });
            }
        });
        /** @type {?} */
        let tempinnerarray;
        tempinnerarray = [];
        data1.forEach((element, index) => {
            if (index > 0) {
                /** @type {?} */
                let obj = {};
                element.forEach((innerelement, innerindex) => {
                    if (innerindex >= 0) {
                        /** @type {?} */
                        const key = this.keyArray[innerindex - 1];
                        obj[key] = element[innerindex];
                        /** @type {?} */
                        const legenddata = this.legendArray[key];
                        if (legenddata) {
                            legenddata.data.push({ 'value': element[innerindex], 'label': element[0] });
                        }
                    }
                });
                tempinnerarray.push(obj);
            }
        });
        this.data = [];
        tempinnerarray.forEach(element => {
            this.data.push(element);
        });
        this.legends = [];
        /** @type {?} */
        let element = this.datahisto[0];
        /** @type {?} */
        let object = { 'label': element[1] + " " + "of" + " " + element[0], 'color': this.color };
        this.legends.push(object);
    }
    /**
     * @return {?}
     */
    plotChart() {
        /** @type {?} */
        const tooltip = this.toolTip(d3);
        /** @type {?} */
        let data;
        data = this.data;
        /** @type {?} */
        let keysetarray = [];
        /** @type {?} */
        let series;
        series = [];
        series = d3.stack().keys(this.keyArray)
            .offset(d3.stackOffsetDiverging)(this.data);
        /** @type {?} */
        let i = 0;
        /** @type {?} */
        let tempdata;
        tempdata = [];
        tempdata = series;
        tempdata.forEach(element => {
            element.forEach(innerelement => {
                /** @type {?} */
                let singletooltip = [];
                singletooltip.push(innerelement.data.tooltipdata[i]);
                innerelement.push(singletooltip);
            });
            i++;
        });
        /** @type {?} */
        let chartdata = [];
        for (i = 0; i < tempdata.length - 1; i++) {
            chartdata.push(tempdata[i]);
        }
        if (this.resizeflag == false) {
            if (this.chartId) {
                this.svgwidth = this.chartId.nativeElement.offsetWidth;
            }
            else {
                this.svgwidth = this.svgwidth;
            }
        }
        /** @type {?} */
        const margin = { top: 20, right: 20, bottom: 50, left: 60 };
        /** @type {?} */
        const width = this.svgwidth - margin.left - margin.right;
        /** @type {?} */
        const height = this.svgheight - margin.top - margin.bottom;
        //const height = +svg.attr("height") - margin.top - margin.bottom;
        /** @type {?} */
        let x;
        /** @type {?} */
        let y;
        this.svg = d3.select("#" + this.componentId)
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        /** @type {?} */
        let barWidth = (width / this.chartData.length);
        /** @type {?} */
        let inc = barWidth / 2;
        x = d3.scalePoint()
            .domain(this.xaxisArray, function (d) { return d; })
            .rangeRound([0, width]);
        y = d3.scaleLinear().rangeRound([height, 0]);
        y.domain([0, d3.max(this.arrayofLength)]);
        /** @type {?} */
        let z = d3.scaleOrdinal(d3.schemeCategory10);
        this.arrayofLength = [];
        // add x axis to svg
        if (this.device.IsDesktop() == true) {
            this.svg.append("g")
                .attr("transform", "translate(0," + height + ")")
                .call(d3.axisBottom(x));
        }
        else {
            this.svg.append("g")
                .attr("transform", "translate(0," + height + ")")
                .call(d3.axisBottom(x)).
                selectAll("text")
                .attr("y", 0)
                .attr("x", 9)
                .attr("dy", ".35em")
                .attr("transform", "rotate(60)")
                .style("text-anchor", "start");
        }
        /** @type {?} */
        let horizontalpadding = 0.05;
        //add y axis to svg
        this.svg.append("g")
            .call(d3.axisLeft(y));
        this.plotLine(this.svg, x, y, height, width);
        /** @type {?} */
        let histogramBar = this.svg.append("g")
            .selectAll("g")
            .data(chartdata)
            .enter().append("g")
            .attr("fill", this.color)
            .selectAll("rect")
            .data((d) => {
            return d;
        });
        /** @type {?} */
        let histogramBar1 = this.svg.append("g")
            .selectAll("g")
            .data(chartdata)
            .enter().append("g")
            .selectAll("labels")
            .data((d) => {
            return d;
        });
        /** @type {?} */
        let cnt = 0;
        histogramBar.enter().append("rect")
            .attr("width", barWidth - 1)
            .attr("y", (d, index) => {
            cnt++;
            return y(d[1]);
        })
            .attr("cursor", "pointer")
            .attr("height", (d, index) => {
            return Math.abs(y(d[0]) - y(d[1] - horizontalpadding));
        })
            .attr("transform", function (d, i) {
            /** @type {?} */
            var translate = [barWidth * i, 0];
            return "translate(" + translate + ")";
        })
            .on("mouseover", (d) => {
            return tooltip.style("visibility", "visible");
        }).on("mousemove", (d) => {
            /** @type {?} */
            let data = d[2];
            return tooltip.html(this.setKey(data[0]))
                .style("top", (d3.event.pageY - 10) + "px")
                .style("left", (d3.event.pageX + 10) + "px");
        }).on("mouseout", (d) => {
            return tooltip.style("visibility", "hidden");
        })
            .on("click", (d) => {
            /** @type {?} */
            let clickdata = d[2];
            this.histogramClick(clickdata[0]);
            this.fordrillableClick(this, d, event);
            return tooltip.style("visibility", "hidden");
        });
        if (this.labelflag) {
            histogramBar1.enter()
                .append("text")
                .style("font-weight", "bold")
                .attr("text-anchor", "middle")
                .attr("fill", (d) => {
                if (this.labelcolor.length > 0) {
                    return this.labelcolor;
                }
                else {
                    return "black";
                }
            })
                .attr("y", function (d, i) {
                return y(d[1]);
            })
                .text(function (d) {
                /** @type {?} */
                let data;
                /** @type {?} */
                let data2;
                data = d[2];
                data2 = data[0];
                if (data2) {
                    return data2.value;
                }
                else {
                    return null;
                }
            })
                .attr("transform", function (d, i) {
                /** @type {?} */
                var translate = [((barWidth * i) + barWidth / 2), (Math.abs(y(d[0]) - y(d[1] - horizontalpadding)))];
                return "translate(" + translate + ")";
            });
        }
        //  .append("label")
        // //  .attr("width", barWidth - 1)
        //  .attr("y", (d, index) => {
        //    return y(d[1]);
        //  })
        // ---------------------------------------------------------
        //   this.svg.append("g")
        //   .selectAll("g")
        //   .data( chartdata)
        //   .enter( ).append("g")
        //   // .attr("fill", this.color)
        //   // .selectAll("rect")
        //   .data((d) => {
        //     return d;
        //   })
        //   histogramBar.enter(  )
        //   .append("text")
        //   // .attr("width", barWidth - 1)
        //   .attr("y", (d, index) => {
        //     return y(d[1]);
        //   })
        //    .attr("height", (d, index) => {
        //     return Math.abs(y(d[0]) - y(d[1] - horizontalpadding));
        //   })
        //   .attr("transform", function (d, i) {
        //     var translate = [barWidth * i, 0];
        //     return "translate(" + translate + ")";
        //   })
        //   .text(function(d){
        //     console.log("aksa");
        //       return "aksa";
        //   })
        //   .style("font-weight","bold")
        // .attr("text-anchor", "middle")
        // .attr("fill", (d)=>{
        //     return "black";
        // });
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    histogramClick(obj) {
        /** @type {?} */
        let object = {};
        /** @type {?} */
        let data = this.datahisto[0];
        /** @type {?} */
        let label1 = data[1];
        /** @type {?} */
        let label2 = data[0];
        if (obj.label.length) {
            object[label2 + ":"] = obj.label;
            object[label1 + ":"] = obj.value;
        }
        this.chartClick(object);
    }
    /**
     * @param {?} event
     * @return {?}
     */
    legendClick(event) {
        this.onLegendClick.emit(this.datahisto);
    }
    /**
     * @return {?}
     */
    transformData() {
        this.array = [];
        this.values = [];
        this.datahisto.forEach(element => {
            this.values.push(element[1]);
        });
        for (let i = 1; i < this.values.length; i++) {
            this.array.push(this.values[i]);
        }
    }
    /**
     * @return {?}
     */
    plotXaxis() {
        this.xaxisArray = [];
        this.xaxisArray.push(0);
        /** @type {?} */
        let newvalue = 0;
        /** @type {?} */
        let value = Math.ceil(d3.max(this.array));
        if (value % 10 == 0) {
            value = value;
        }
        else {
            value = (10 - value % 10) + value;
        }
        /** @type {?} */
        let quotient = value / 5;
        while (newvalue < value) {
            newvalue = newvalue + quotient;
            this.xaxisArray.push(newvalue);
        }
    }
    /**
     * @return {?}
     */
    plotYaxis() {
        /** @type {?} */
        let tempvalue = 0;
        /** @type {?} */
        let lengthofArray = 0;
        /** @type {?} */
        let lengthcount = 0;
        /** @type {?} */
        let templength = 0;
        /** @type {?} */
        let newvalue = 0;
        this.yaxisArray = [];
        this.histogramarray = [];
        this.lengtharray = [];
        this.histogramdata = [];
        this.arrayofLength = [];
        this.chartData = [];
        this.xaxisArray.forEach(element1 => {
            this.yaxisArray = [];
            this.array.forEach(element2 => {
                if (tempvalue < element2 && element2 <= element1) {
                    this.yaxisArray.push(element2);
                }
                lengthofArray = this.yaxisArray.length;
            });
            if (templength > lengthofArray) {
                lengthcount = templength;
            }
            else {
                lengthcount = lengthofArray;
            }
            templength = lengthcount;
            tempvalue = element1;
            //this.histogramarray.push(this.yaxisArray);
            this.lengtharray.push(lengthofArray);
        });
        /** @type {?} */
        let value = Math.ceil(templength);
        /** @type {?} */
        let quotient = value / 5;
        while (newvalue <= value) {
            newvalue = newvalue + quotient;
            this.yaxisData.push(newvalue);
        }
        for (let i = 1; i < this.histogramarray.length; i++) {
            this.histogramdata.push(this.histogramarray[i]);
        }
        for (let i = 1; i < this.lengtharray.length; i++) {
            this.arrayofLength.push(this.lengtharray[i]);
        }
        for (let i = 0; i < this.arrayofLength.length; i++) {
            /** @type {?} */
            let data = {};
            data["value"] = this.arrayofLength[i];
            this.chartData.push(data);
        }
        this.array = [];
    }
    /**
     * @return {?}
     */
    resize() {
        this.svgwidth = 0;
        this.svg.selectAll("*").remove();
        this.resizeflag = true;
        this.svgwidth = this.divid.nativeElement.offsetWidth;
        this.transformData();
        this.plotXaxis();
        this.plotYaxis();
        this.tooltipData();
        this.dataforChart();
        this.transformData1(this.finaldataarray);
        this.plotChart();
    }
    /**
     * @return {?}
     */
    dataforChart() {
        this.finaldataarray = [] = [];
        /** @type {?} */
        let initialArray = [];
        /** @type {?} */
        let temparray = [];
        initialArray.push('level');
        /** @type {?} */
        let maxElement = Math.max.apply(null, this.arrayofLength);
        /** @type {?} */
        let maxlength = maxElement;
        /** @type {?} */
        let n = 1;
        while (n <= maxElement) {
            initialArray.push('' + n);
            n++;
        }
        initialArray.push('tooltipdata');
        /** @type {?} */
        let length = this.arrayofLength.length;
        /** @type {?} */
        let num = 1;
        /** @type {?} */
        let number = 1;
        /** @type {?} */
        let j = 0;
        this.finaldataarray.push(initialArray);
        for (let i = 0; i < this.arrayofLength.length; i++) {
            /** @type {?} */
            let value = this.arrayofLength[i];
            /** @type {?} */
            let tempvalue = value;
            temparray = [];
            temparray.push('' + i);
            maxElement = maxlength;
            if (value > 0) {
                while (value != 0) {
                    temparray.push(number);
                    value--;
                }
                maxElement = maxElement - tempvalue;
                while (maxElement != 0) {
                    temparray.push(0);
                    maxElement--;
                }
            }
            else {
                while (maxElement != 0) {
                    temparray.push(0);
                    maxElement--;
                }
            }
            temparray.push(this.tooltipArray[j]);
            this.finaldataarray.push(temparray);
            j++;
        }
    }
    /**
     * @return {?}
     */
    tooltipData() {
        /** @type {?} */
        let arrayofTooltip = [];
        /** @type {?} */
        let obj = { "label": "", "value": "" };
        this.datahisto.forEach(element => {
            obj = { "label": "", "value": "" };
            obj["label"] = element[0];
            obj["value"] = element[1];
            arrayofTooltip.push(obj);
        });
        /** @type {?} */
        let value1 = this.xaxisArray[0];
        /** @type {?} */
        let tooltipdata = [];
        for (let j = 1; j < this.xaxisArray.length; j++) {
            tooltipdata = [];
            /** @type {?} */
            let value2 = this.xaxisArray[j];
            arrayofTooltip.forEach(element => {
                if (value1 <= element.value && element.value <= value2) {
                    /** @type {?} */
                    let tooltipobj = { "label": "", "value": "" };
                    tooltipobj["label"] = element["label"];
                    tooltipobj["value"] = element["value"];
                    tooltipdata.push(tooltipobj);
                }
            });
            this.tooltipArray.push(tooltipdata);
            value1 = value2;
        }
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    setKey(obj) {
        /** @type {?} */
        let object = {};
        /** @type {?} */
        let data = this.datahisto[0];
        /** @type {?} */
        let label1 = data[1];
        /** @type {?} */
        let label2 = data[0];
        object[label2 + ":"] = obj.label;
        object[label1 + ":"] = obj.value;
        return (this.toolTipForBar(object));
    }
    /**
     * @param {?} g
     * @param {?} x
     * @param {?} y
     * @param {?} height
     * @param {?} width
     * @return {?}
     */
    plotLine(g, x, y, height, width) {
        if (this.hScale) {
            g.append('g')
                .attr("color", "lightgrey")
                .call(d3.axisLeft(y)
                .tickSize(-width).tickFormat(''));
        }
    }
}
HistogramComponent.decorators = [
    { type: Component, args: [{
                selector: 'amexio-d3-chart-histogram',
                template: `<div   *ngIf="drillableFlag" #divid (window:resize)="resize()" >
<table style="width: 100%;" #chartId >
        <tr>
            <td colspan="2" style="font-size: 18px; font-weight: bold; "> {{title}} </td>
        </tr>
        <tr>
            <td>
                <svg [attr.height]="svgheight" [attr.width]="svgwidth" [attr.id]="componentId">
                </svg>
            </td>
        </tr>
        <tr>
            <td style="display: block; padding: 5px;">
                <amexio-d3-legend *ngIf="legend" [horizontal]="true" (onClick)="legendClick($event)" [data]="legends" style="height:100%;"></amexio-d3-legend>
            </td>
        </tr>
    </table>
</div>
`,
                styles: [`.bar{background-color:#3943cf;padding:.02px}`]
            },] },
];
HistogramComponent.ctorParameters = () => [
    { type: CommanDataService },
    { type: DeviceQueryService }
];
HistogramComponent.propDecorators = {
    svgwidth: [{ type: Input, args: ['width',] }],
    svgheight: [{ type: Input, args: ['height',] }],
    color: [{ type: Input, args: ['color',] }],
    datahisto: [{ type: Input, args: ['data',] }],
    labelflag: [{ type: Input, args: ['label',] }],
    labelcolor: [{ type: Input, args: ['label-color',] }],
    hScale: [{ type: Input, args: ['horizontal-scale',] }],
    chartId: [{ type: ViewChild, args: ['chartId',] }],
    divid: [{ type: ViewChild, args: ['divid',] }],
    datareader: [{ type: Input, args: ['data-reader',] }],
    level: [{ type: Input, args: ['level',] }],
    target: [{ type: Input, args: ['target',] }],
    drillabledatakey: [{ type: Input, args: ['drillable-data',] }]
};
if (false) {
    /** @type {?} */
    HistogramComponent.prototype.svgwidth;
    /** @type {?} */
    HistogramComponent.prototype.svgheight;
    /** @type {?} */
    HistogramComponent.prototype.color;
    /** @type {?} */
    HistogramComponent.prototype.datahisto;
    /** @type {?} */
    HistogramComponent.prototype.labelflag;
    /** @type {?} */
    HistogramComponent.prototype.labelcolor;
    /** @type {?} */
    HistogramComponent.prototype.hScale;
    /** @type {?} */
    HistogramComponent.prototype.chartId;
    /** @type {?} */
    HistogramComponent.prototype.divid;
    /** @type {?} */
    HistogramComponent.prototype.datareader;
    /** @type {?} */
    HistogramComponent.prototype.level;
    /** @type {?} */
    HistogramComponent.prototype.target;
    /** @type {?} */
    HistogramComponent.prototype.drillabledatakey;
    /** @type {?} */
    HistogramComponent.prototype.httpresponse;
    /** @type {?} */
    HistogramComponent.prototype.svg;
    /** @type {?} */
    HistogramComponent.prototype.resizeflag;
    /** @type {?} */
    HistogramComponent.prototype.drillableFlag;
    /** @type {?} */
    HistogramComponent.prototype.data1;
    /** @type {?} */
    HistogramComponent.prototype.values;
    /** @type {?} */
    HistogramComponent.prototype.array;
    /** @type {?} */
    HistogramComponent.prototype.xaxisArray;
    /** @type {?} */
    HistogramComponent.prototype.yaxisArray;
    /** @type {?} */
    HistogramComponent.prototype.yaxisData;
    /** @type {?} */
    HistogramComponent.prototype.histogramarray;
    /** @type {?} */
    HistogramComponent.prototype.histogramdata;
    /** @type {?} */
    HistogramComponent.prototype.lengtharray;
    /** @type {?} */
    HistogramComponent.prototype.arrayofLength;
    /** @type {?} */
    HistogramComponent.prototype.chartData;
    /** @type {?} */
    HistogramComponent.prototype.finaldataarray;
    /** @type {?} */
    HistogramComponent.prototype.legendArray;
    /** @type {?} */
    HistogramComponent.prototype.keyArray;
    /** @type {?} */
    HistogramComponent.prototype.predefinedcolors;
    /** @type {?} */
    HistogramComponent.prototype.legends;
    /** @type {?} */
    HistogramComponent.prototype.charttype;
    /** @type {?} */
    HistogramComponent.prototype.data;
    /** @type {?} */
    HistogramComponent.prototype.datareaderdata;
    /** @type {?} */
    HistogramComponent.prototype.xaxis;
    /** @type {?} */
    HistogramComponent.prototype.tempp;
    /** @type {?} */
    HistogramComponent.prototype.tooltipArray;
    /** @type {?} */
    HistogramComponent.prototype.index;
    /** @type {?} */
    HistogramComponent.prototype.myservice;
    /** @type {?} */
    HistogramComponent.prototype.device;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlzdG9ncmFtLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2FtZXhpby1jaGFydC1kMy8iLCJzb3VyY2VzIjpbImxpYi9oaXN0b2dyYW0vaGlzdG9ncmFtLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUNoRixPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUVwRSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUNwRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUN0RSxPQUFPLEtBQUssRUFBRSxNQUFNLElBQUksQ0FBQztBQXdCekIsTUFBTSx5QkFBMEIsU0FBUSwwQkFBMEI7Ozs7O0lBeUNoRSxZQUFvQixTQUE0QixFQUFVLE1BQTBCO1FBQ2xGLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztRQURELGNBQVMsR0FBVCxTQUFTLENBQW1CO1FBQVUsV0FBTSxHQUFOLE1BQU0sQ0FBb0I7UUF4Q3BFLGFBQVEsR0FBVyxHQUFHLENBQUM7UUFDdEIsY0FBUyxHQUFXLEdBQUcsQ0FBQztRQUN6QixVQUFLLEdBQVcsTUFBTSxDQUFDO1FBRXZCLGNBQVMsR0FBWSxLQUFLLENBQUM7UUFDckIsZUFBVSxHQUFXLE9BQU8sQ0FBQztRQUN4QixXQUFNLEdBQVksSUFBSSxDQUFDO1FBSWxDLFVBQUssR0FBVyxDQUFDLENBQUM7UUFFVCxxQkFBZ0IsR0FBVSxFQUFFLENBQUE7UUFHckQsZUFBVSxHQUFZLEtBQUssQ0FBQztRQUM1QixrQkFBYSxHQUFZLElBQUksQ0FBQztRQUU5QixXQUFNLEdBQVUsRUFBRSxDQUFDO1FBQ25CLFVBQUssR0FBVSxFQUFFLENBQUM7UUFDbEIsZUFBVSxHQUFVLEVBQUUsQ0FBQztRQUN2QixlQUFV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QUFXOztJQUNYLDBDQUF5Qjs7SUFDekIsbUNBQVU7O0lBQ0UsdUNBQW9DOztJQUFFLG9DQUFrQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIFZpZXdDaGlsZCwgRWxlbWVudFJlZiwgT25Jbml0IH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IEFtZXhpb0QzQmFzZUNoYXJ0Q29tcG9uZW50IH0gZnJvbSBcIi4uL2Jhc2UvYmFzZS5jb21wb25lbnRcIjtcbmltcG9ydCB7IFBsb3RDYXJ0IH0gZnJvbSBcIi4uL2Jhc2UvY2hhcnQuY29tcG9uZW50XCI7XG5pbXBvcnQgeyBDb21tYW5EYXRhU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2NvbW1hbi5kYXRhLnNlcnZpY2UnO1xuaW1wb3J0IHsgRGV2aWNlUXVlcnlTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvZGV2aWNlLnF1ZXJ5LnNlcnZpY2UnO1xuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYW1leGlvLWQzLWNoYXJ0LWhpc3RvZ3JhbScsXG4gIHRlbXBsYXRlOiBgPGRpdiAgICpuZ0lmPVwiZHJpbGxhYmxlRmxhZ1wiICNkaXZpZCAod2luZG93OnJlc2l6ZSk9XCJyZXNpemUoKVwiID5cbjx0YWJsZSBzdHlsZT1cIndpZHRoOiAxMDAlO1wiICNjaGFydElkID5cbiAgICAgICAgPHRyPlxuICAgICAgICAgICAgPHRkIGNvbHNwYW49XCIyXCIgc3R5bGU9XCJmb250LXNpemU6IDE4cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBcIj4ge3t0aXRsZX19IDwvdGQ+XG4gICAgICAgIDwvdHI+XG4gICAgICAgIDx0cj5cbiAgICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICAgICA8c3ZnIFthdHRyLmhlaWdodF09XCJzdmdoZWlnaHRcIiBbYXR0ci53aWR0aF09XCJzdmd3aWR0aFwiIFthdHRyLmlkXT1cImNvbXBvbmVudElkXCI+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICA8L3RyPlxuICAgICAgICA8dHI+XG4gICAgICAgICAgICA8dGQgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgcGFkZGluZzogNXB4O1wiPlxuICAgICAgICAgICAgICAgIDxhbWV4aW8tZDMtbGVnZW5kICpuZ0lmPVwibGVnZW5kXCIgW2hvcml6b250YWxdPVwidHJ1ZVwiIChvbkNsaWNrKT1cImxlZ2VuZENsaWNrKCRldmVudClcIiBbZGF0YV09XCJsZWdlbmRzXCIgc3R5bGU9XCJoZWlnaHQ6MTAwJTtcIj48L2FtZXhpby1kMy1sZWdlbmQ+XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICA8L3RyPlxuICAgIDwvdGFibGU+XG48L2Rpdj5cbmAsXG4gIHN0eWxlczogW2AuYmFye2JhY2tncm91bmQtY29sb3I6IzM5NDNjZjtwYWRkaW5nOi4wMnB4fWBdXG59KVxuZXhwb3J0IGNsYXNzIEhpc3RvZ3JhbUNvbXBvbmVudCBleHRlbmRzIEFtZXhpb0QzQmFzZUNoYXJ0Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCd3aWR0aCcpIHN2Z3dpZHRoOiBudW1iZXIgPSAzMDA7XG4gIEBJbnB1dCgnaGVpZ2h0Jykgc3ZnaGVpZ2h0OiBudW1iZXIgPSA0MDA7XG4gIEBJbnB1dCgnY29sb3InKSBjb2xvcjogc3RyaW5nID0gXCJibHVlXCI7XG4gIEBJbnB1dCgnZGF0YScpIGRhdGFoaXN0bzogYW55O1xuICBASW5wdXQoJ2xhYmVsJykgbGFiZWxmbGFnOiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCgnbGFiZWwtY29sb3InKSBsYWJlbGNvbG9yOiBzdHJpbmcgPSBcImJsYWNrXCI7XG4gIEBJbnB1dCgnaG9yaXpvbnRhbC1zY2FsZScpIGhTY2FsZTogYm9vbGVhbiA9IHRydWU7XG4gIEBWaWV3Q2hpbGQoJ2NoYXJ0SWQnKSBjaGFydElkOiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdkaXZpZCcpIGRpdmlkOiBFbGVtZW50UmVmO1xuICBASW5wdXQoJ2RhdGEtcmVhZGVyJykgZGF0YXJlYWRlcjogc3RyaW5nO1xuICBASW5wdXQoJ2xldmVsJykgbGV2ZWw6IG51bWJlciA9IDA7XG4gIEBJbnB1dCgndGFyZ2V0JykgdGFyZ2V0OiBudW1iZXI7XG4gIEBJbnB1dCgnZHJpbGxhYmxlLWRhdGEnKSBkcmlsbGFibGVkYXRha2V5OiBhbnlbXSA9IFtdXG4gIGh0dHByZXNwb25zZTogYW55O1xuICBzdmc6IGFueTtcbiAgcmVzaXplZmxhZzogYm9vbGVhbiA9IGZhbHNlO1xuICBkcmlsbGFibGVGbGFnOiBib29sZWFuID0gdHJ1ZTtcbiAgZGF0YTE6IGFueTtcbiAgdmFsdWVzOiBhbnlbXSA9IFtdO1xuICBhcnJheTogYW55W10gPSBbXTtcbiAgeGF4aXNBcnJheTogYW55W10gPSBbXTtcbiAgeWF4aXNBcnJheTogYW55W10gPSBbXTtcbiAgeWF4aXNEYXRhOiBhbnlbXSA9IFtdO1xuICBoaXN0b2dyYW1hcnJheTogYW55W10gPSBbXTtcbiAgaGlzdG9ncmFtZGF0YTogYW55W10gPSBbXVxuICBsZW5ndGhhcnJheTogYW55W10gPSBbXTtcbiAgYXJyYXlvZkxlbmd0aDogYW55W10gPSBbXTtcbiAgY2hhcnREYXRhOiBhbnlbXSA9IFtdO1xuICBmaW5hbGRhdGFhcnJheTogYW55W10gPSBbXTtcbiAgbGVnZW5kQXJyYXk6IGFueVtdO1xuICBrZXlBcnJheTogYW55W107XG4gIHByZWRlZmluZWRjb2xvcnM6IGFueVtdO1xuICBsZWdlbmRzOiBhbnlbXTtcbiAgY2hhcnR0eXBlOiBzdHJpbmc7XG4gIGRhdGE6IGFueVtdO1xuICBkYXRhcmVhZGVyZGF0YTogYW55W107XG4gIHhheGlzOiBhbnk7XG4gIHRlbXBwOiBhbnk7XG4gIHRvb2x0aXBBcnJheTogYW55W10gPSBbXTtcbiAgaW5kZXggPSAwO1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG15c2VydmljZTogQ29tbWFuRGF0YVNlcnZpY2UsIHByaXZhdGUgZGV2aWNlOiBEZXZpY2VRdWVyeVNlcnZpY2UpIHtcbiAgICBzdXBlcignaGlzdG9ncmFtJyk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICBsZXQgcmVzOiBhbnlcbiAgICBpZiAodGhpcy5sZXZlbCA8PSAxKSB7XG4gICAgICBpZiAodGhpcy5odHRwbWV0aG9kICYmIHRoaXMuaHR0cHVybCkge1xuICAgICAgICB0aGlzLm15c2VydmljZS5mZXRjaFVybERhdGEodGhpcy5odHRwdXJsLCB0aGlzLmh0dHBtZXRob2QpLnN1YnNjcmliZSgocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICByZXMgPSByZXNwb25zZTtcbiAgICAgICAgICB0aGlzLmh0dHByZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYXRhaGlzdG8gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZGF0YWhpc3RvID0gdGhpcy5nZXRSZXNwb25zZURhdGEocmVzKTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtRGF0YSgpXG4gICAgICAgICAgICB0aGlzLnBsb3RYYXhpcygpO1xuICAgICAgICAgICAgdGhpcy5wbG90WWF4aXMoKTtcbiAgICAgICAgICAgIHRoaXMudG9vbHRpcERhdGEoKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YWZvckNoYXJ0KCk7XG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybURhdGExKHRoaXMuZmluYWxkYXRhYXJyYXkpO1xuICAgICAgICAgICAgdGhpcy5wbG90Q2hhcnQoKTtcblxuICAgICAgICAgIH0sIDApO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YWhpc3RvKSB7XG5cblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLmRhdGFoaXN0byA9IHRoaXMuZ2V0UmVzcG9uc2VEYXRhKHRoaXMuZGF0YWhpc3RvKTtcbiAgICAgICAgICB0aGlzLnRyYW5zZm9ybURhdGEoKVxuICAgICAgICAgIHRoaXMucGxvdFhheGlzKCk7XG4gICAgICAgICAgdGhpcy5wbG90WWF4aXMoKTtcbiAgICAgICAgICB0aGlzLnRvb2x0aXBEYXRhKCk7XG4gICAgICAgICAgdGhpcy5kYXRhZm9yQ2hhcnQoKTtcbiAgICAgICAgICB0aGlzLnRyYW5zZm9ybURhdGExKHRoaXMuZmluYWxkYXRhYXJyYXkpO1xuICAgICAgICAgIHRoaXMucGxvdENoYXJ0KCk7XG5cbiAgICAgICAgfSwgMCk7XG5cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmZXRjaERhdGEoZGF0YTogYW55KSB7XG5cbiAgICBsZXQgcmVxdWVzdEpzb247XG4gICAgbGV0IGtleSA9IHRoaXMuZHJpbGxhYmxlZGF0YWtleTtcbiAgICBsZXQgcmVzcDogYW55O1xuICAgIGlmICh0aGlzLmRyaWxsYWJsZWRhdGFrZXkubGVuZ3RoKSB7XG4gICAgICBsZXQgZHJpbGxhYmxlZGF0YSA9IHRoaXMuZ2V0TXVsdGlwbGVEcmlsbGJsZUtleURhdGEoZGF0YSwga2V5KTtcbiAgICAgIHJlcXVlc3RKc29uID0gZHJpbGxhYmxlZGF0YTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXF1ZXN0SnNvbiA9IGRhdGE7XG4gICAgfVxuXG5cbiAgICBpZiAodGhpcy5odHRwbWV0aG9kICYmIHRoaXMuaHR0cHVybCkge1xuICAgICAgdGhpcy5teXNlcnZpY2UucG9zdGZldGNoRGF0YSh0aGlzLmh0dHB1cmwsIHRoaXMuaHR0cG1ldGhvZCwgcmVxdWVzdEpzb24pLnN1YnNjcmliZSgocmVzcG9uc2UpID0+IHtcbiAgICAgICAgcmVzcCA9IHJlc3BvbnNlO1xuICAgICAgICB0aGlzLmh0dHByZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICB9LCAoKSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIC8vdGhpcy5kYXRhID0gdGhpcy5nZXRSZXNwb25zZURhdGEocmVzcCk7XG4gICAgICAgICAgdGhpcy5kcmF3Q2hhcnQoKTtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBkcmF3Q2hhcnQoKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmRhdGFoaXN0byA9IHRoaXMuZ2V0UmVzcG9uc2VEYXRhKHRoaXMuaHR0cHJlc3BvbnNlKTtcbiAgICAgIHRoaXMudHJhbnNmb3JtRGF0YSgpXG4gICAgICB0aGlzLnBsb3RYYXhpcygpO1xuICAgICAgdGhpcy5wbG90WWF4aXMoKTtcbiAgICAgIHRoaXMudG9vbHRpcERhdGEoKTtcbiAgICAgIHRoaXMuZGF0YWZvckNoYXJ0KCk7XG4gICAgICB0aGlzLnRyYW5zZm9ybURhdGExKHRoaXMuZmluYWxkYXRhYXJyYXkpO1xuICAgICAgdGhpcy5wbG90Q2hhcnQoKTtcbiAgICB9LCAwKTtcbiAgfVxuXG4gIGdldFJlc3BvbnNlRGF0YShodHRwUmVzcG9uc2U6IGFueSkge1xuICAgIGxldCByZXNwb25zZWRhdGEgPSBodHRwUmVzcG9uc2U7XG4gICAgaWYgKHRoaXMuZGF0YXJlYWRlciAhPSBudWxsKSB7XG4gICAgICBjb25zdCBkciA9IHRoaXMuZGF0YXJlYWRlci5zcGxpdCgnLicpO1xuICAgICAgZm9yIChjb25zdCBpciBvZiBkcikge1xuICAgICAgICByZXNwb25zZWRhdGEgPSByZXNwb25zZWRhdGFbaXJdO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXNwb25zZWRhdGEgPSBodHRwUmVzcG9uc2U7XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZWRhdGE7XG4gIH1cblxuICB0cmFuc2Zvcm1EYXRhMShkYXRhMTogYW55KSB7XG4gICAgdGhpcy5rZXlBcnJheSA9IFtdO1xuICAgIHRoaXMubGVnZW5kQXJyYXkgPSBbXTtcbiAgICBkYXRhMS5mb3JFYWNoKChlbGVtZW50LCBpKSA9PiB7XG4gICAgICBpZiAoaSA9PSAwKSB7XG4gICAgICAgIGVsZW1lbnQuZm9yRWFjaCgoaW5uZXJlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMubGVnZW5kQXJyYXlbaW5uZXJlbGVtZW50XSA9IHsgJ2RhdGEnOiBbXSB9O1xuICAgICAgICAgICAgdGhpcy5rZXlBcnJheS5wdXNoKGlubmVyZWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKGluZGV4ID09IDApIHtcbiAgICAgICAgICAgIHRoaXMueGF4aXMgPSBpbm5lcmVsZW1lbnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgdGVtcGlubmVyYXJyYXk6IGFueVtdO1xuICAgIHRlbXBpbm5lcmFycmF5ID0gW107XG4gICAgZGF0YTEuZm9yRWFjaCgoZWxlbWVudCwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgbGV0IG9iajogYW55ID0ge307XG4gICAgICAgIGVsZW1lbnQuZm9yRWFjaCgoaW5uZXJlbGVtZW50LCBpbm5lcmluZGV4KSA9PiB7XG4gICAgICAgICAgaWYgKGlubmVyaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5rZXlBcnJheVtpbm5lcmluZGV4IC0gMV07XG4gICAgICAgICAgICBvYmpba2V5XSA9IGVsZW1lbnRbaW5uZXJpbmRleF07XG4gICAgICAgICAgICBjb25zdCBsZWdlbmRkYXRhID0gdGhpcy5sZWdlbmRBcnJheVtrZXldO1xuICAgICAgICAgICAgaWYgKGxlZ2VuZGRhdGEpIHtcbiAgICAgICAgICAgICAgbGVnZW5kZGF0YS5kYXRhLnB1c2goeyAndmFsdWUnOiBlbGVtZW50W2lubmVyaW5kZXhdLCAnbGFiZWwnOiBlbGVtZW50WzBdIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRlbXBpbm5lcmFycmF5LnB1c2gob2JqKTtcbiAgICAgIH1cblxuICAgIH0pO1xuICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgIHRlbXBpbm5lcmFycmF5LmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICB0aGlzLmRhdGEucHVzaChlbGVtZW50KTtcbiAgICB9KTtcbiAgICB0aGlzLmxlZ2VuZHMgPSBbXTtcbiAgICBsZXQgZWxlbWVudCA9IHRoaXMuZGF0YWhpc3RvWzBdO1xuICAgIGxldCBvYmplY3QgPSB7ICdsYWJlbCc6IGVsZW1lbnRbMV0gKyBcIiBcIiArIFwib2ZcIiArIFwiIFwiICsgZWxlbWVudFswXSwgJ2NvbG9yJzogdGhpcy5jb2xvciB9O1xuICAgIHRoaXMubGVnZW5kcy5wdXNoKG9iamVjdCk7XG4gIH1cblxuICBwbG90Q2hhcnQoKSB7XG5cbiAgICBjb25zdCB0b29sdGlwID0gdGhpcy50b29sVGlwKGQzKTtcbiAgICBsZXQgZGF0YTtcbiAgICBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGxldCBrZXlzZXRhcnJheTogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgc2VyaWVzO1xuICAgIHNlcmllcyA9IFtdO1xuICAgIHNlcmllcyA9IGQzLnN0YWNrKCkua2V5cyh0aGlzLmtleUFycmF5KVxuICAgICAgLm9mZnNldChkMy5zdGFja09mZnNldERpdmVyZ2luZylcbiAgICAgICh0aGlzLmRhdGEpO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgdGVtcGRhdGE7XG4gICAgdGVtcGRhdGEgPSBbXTtcbiAgICB0ZW1wZGF0YSA9IHNlcmllcztcbiAgICB0ZW1wZGF0YS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgZWxlbWVudC5mb3JFYWNoKGlubmVyZWxlbWVudCA9PiB7XG4gICAgICAgIGxldCBzaW5nbGV0b29sdGlwID0gW107XG4gICAgICAgIHNpbmdsZXRvb2x0aXAucHVzaChpbm5lcmVsZW1lbnQuZGF0YS50b29sdGlwZGF0YVtpXSk7XG4gICAgICAgIGlubmVyZWxlbWVudC5wdXNoKHNpbmdsZXRvb2x0aXApO1xuICAgICAgfSk7XG4gICAgICBpKys7XG4gICAgfSk7XG5cbiAgICBsZXQgY2hhcnRkYXRhID0gW107XG4gICAgZm9yIChpID0gMDsgaSA8IHRlbXBkYXRhLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgY2hhcnRkYXRhLnB1c2godGVtcGRhdGFbaV0pO1xuICAgIH1cbiAgICBpZiAodGhpcy5yZXNpemVmbGFnID09IGZhbHNlKSB7XG4gICAgICBpZiAodGhpcy5jaGFydElkKSB7XG4gICAgICAgIHRoaXMuc3Znd2lkdGggPSB0aGlzLmNoYXJ0SWQubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgdGhpcy5zdmd3aWR0aCA9IHRoaXMuc3Znd2lkdGg7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG1hcmdpbiA9IHsgdG9wOiAyMCwgcmlnaHQ6IDIwLCBib3R0b206IDUwLCBsZWZ0OiA2MCB9O1xuICAgIGNvbnN0IHdpZHRoID0gdGhpcy5zdmd3aWR0aCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0O1xuICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuc3ZnaGVpZ2h0IC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cbiAgICAvL2NvbnN0IGhlaWdodCA9ICtzdmcuYXR0cihcImhlaWdodFwiKSAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXG4gICAgbGV0IHgsIHk7XG5cbiAgICB0aGlzLnN2ZyA9IGQzLnNlbGVjdChcIiNcIiArIHRoaXMuY29tcG9uZW50SWQpXG4gICAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXG4gICAgICAuYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcbiAgICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xuXG4gICAgbGV0IGJhcldpZHRoID0gKHdpZHRoIC8gdGhpcy5jaGFydERhdGEubGVuZ3RoKTtcbiAgICBsZXQgaW5jID0gYmFyV2lkdGggLyAyO1xuICAgIHggPSBkMy5zY2FsZVBvaW50KClcbiAgICAgIC5kb21haW4odGhpcy54YXhpc0FycmF5LCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZDsgfSlcbiAgICAgIC5yYW5nZVJvdW5kKFswLCB3aWR0aF0pO1xuXG5cbiAgICB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZVJvdW5kKFtoZWlnaHQsIDBdKTtcbiAgICB5LmRvbWFpbihbMCwgZDMubWF4KHRoaXMuYXJyYXlvZkxlbmd0aCldKTtcblxuICAgIGxldCB6ID0gZDMuc2NhbGVPcmRpbmFsKGQzLnNjaGVtZUNhdGVnb3J5MTApO1xuICAgIHRoaXMuYXJyYXlvZkxlbmd0aCA9IFtdO1xuICAgIC8vIGFkZCB4IGF4aXMgdG8gc3ZnXG5cbiAgICBpZiAodGhpcy5kZXZpY2UuSXNEZXNrdG9wKCkgPT0gdHJ1ZSkge1xuICAgICAgdGhpcy5zdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpXG4gICAgICAgIC5jYWxsKGQzLmF4aXNCb3R0b20oeCkpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5zdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpXG4gICAgICAgIC5jYWxsKGQzLmF4aXNCb3R0b20oeCkpLlxuICAgICAgICBzZWxlY3RBbGwoXCJ0ZXh0XCIpXG4gICAgICAgIC5hdHRyKFwieVwiLCAwKVxuICAgICAgICAuYXR0cihcInhcIiwgOSlcbiAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwicm90YXRlKDYwKVwiKVxuICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcInN0YXJ0XCIpO1xuXG4gICAgfVxuXG4gICAgbGV0IGhvcml6b250YWxwYWRkaW5nID0gMC4wNTtcbiAgICAvL2FkZCB5IGF4aXMgdG8gc3ZnXG4gICAgdGhpcy5zdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgLmNhbGwoZDMuYXhpc0xlZnQoeSkpO1xuXG4gICAgdGhpcy5wbG90TGluZSh0aGlzLnN2ZywgeCwgeSwgaGVpZ2h0LCB3aWR0aCk7XG4gICBcbiBsZXQgaGlzdG9ncmFtQmFyID0gdGhpcy5zdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgLnNlbGVjdEFsbChcImdcIilcbiAgICAgIC5kYXRhKGNoYXJ0ZGF0YSlcbiAgICAgIC5lbnRlcigpLmFwcGVuZChcImdcIilcbiAgICAgIC5hdHRyKFwiZmlsbFwiLCB0aGlzLmNvbG9yKVxuICAgICAgLnNlbGVjdEFsbChcInJlY3RcIilcbiAgICAgIC5kYXRhKChkKSA9PiB7XG4gICAgICAgIHJldHVybiBkO1xuICAgICAgfSlcblxuICAgIGxldCBoaXN0b2dyYW1CYXIxID0gdGhpcy5zdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgLnNlbGVjdEFsbChcImdcIilcbiAgICAgIC5kYXRhKGNoYXJ0ZGF0YSlcbiAgICAgIC5lbnRlcigpLmFwcGVuZChcImdcIilcbiAgICAgIC8vIC5hdHRyKFwiZmlsbFwiLCB0aGlzLmNvbG9yKVxuICAgICAgLnNlbGVjdEFsbChcImxhYmVsc1wiKVxuICAgICAgLmRhdGEoKGQpID0+IHtcbiAgICAgICAgcmV0dXJuIGQ7XG4gICAgICB9KVxuICAgIGxldCBjbnQgPSAwO1xuXG5cbiAgICBoaXN0b2dyYW1CYXIuZW50ZXIoKS5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAuYXR0cihcIndpZHRoXCIsIGJhcldpZHRoIC0gMSlcbiAgICAgIC5hdHRyKFwieVwiLCAoZCwgaW5kZXgpID0+IHtcbiAgICAgICAgY250Kys7XG4gICAgICAgIHJldHVybiB5KGRbMV0pO1xuICAgICAgfSlcbiAgICAgIC5hdHRyKFwiY3Vyc29yXCIsIFwicG9pbnRlclwiKVxuICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgKGQsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiBNYXRoLmFicyh5KGRbMF0pIC0geShkWzFdIC0gaG9yaXpvbnRhbHBhZGRpbmcpKTtcbiAgICAgIH0pXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICB2YXIgdHJhbnNsYXRlID0gW2JhcldpZHRoICogaSwgMF07XG4gICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHRyYW5zbGF0ZSArIFwiKVwiO1xuICAgICAgfSlcbiAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCAoZCkgPT4ge1xuICAgICAgICByZXR1cm4gdG9vbHRpcC5zdHlsZShcInZpc2liaWxpdHlcIiwgXCJ2aXNpYmxlXCIpO1xuICAgICAgfSkub24oXCJtb3VzZW1vdmVcIixcbiAgICAgICAgKGQ6IGFueSkgPT4ge1xuICAgICAgICAgIGxldCBkYXRhID0gZFsyXTtcbiAgICAgICAgICByZXR1cm4gdG9vbHRpcC5odG1sKHRoaXMuc2V0S2V5KGRhdGFbMF0pKVxuICAgICAgICAgICAgLnN0eWxlKFwidG9wXCIsIChkMy5ldmVudC5wYWdlWSAtIDEwKSArIFwicHhcIilcbiAgICAgICAgICAgIC5zdHlsZShcImxlZnRcIiwgKGQzLmV2ZW50LnBhZ2VYICsgMTApICsgXCJweFwiKTtcblxuICAgICAgICB9KS5vbihcIm1vdXNlb3V0XCIsIChkKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRvb2x0aXAuc3R5bGUoXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpO1xuICAgICAgICB9KVxuICAgICAgLm9uKFwiY2xpY2tcIiwgKGQpID0+IHtcbiAgICAgICAgbGV0IGNsaWNrZGF0YSA9IGRbMl07XG4gICAgICAgIHRoaXMuaGlzdG9ncmFtQ2xpY2soY2xpY2tkYXRhWzBdKTtcbiAgICAgICAgdGhpcy5mb3JkcmlsbGFibGVDbGljayh0aGlzLCBkLCBldmVudCk7XG4gICAgICAgIHJldHVybiB0b29sdGlwLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgIH0pO1xuICAgaWYodGhpcy5sYWJlbGZsYWcpIHtcbiAgICBoaXN0b2dyYW1CYXIxLmVudGVyKClcbiAgICAgIC5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAuc3R5bGUoXCJmb250LXdlaWdodFwiLCBcImJvbGRcIilcbiAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcbiAgICAgIC5hdHRyKFwiZmlsbFwiLCAoZCkgPT4ge1xuICAgICAgICBpZih0aGlzLmxhYmVsY29sb3IubGVuZ3RoPjApe1xuICAgICAgICAgIHJldHVybiB0aGlzLmxhYmVsY29sb3I7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBcImJsYWNrXCI7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24gKGQsIGkpIHtcbiAgICAgICAgcmV0dXJuIHkoZFsxXSk7XG4gICAgICB9KVxuICAgICAgLnRleHQoZnVuY3Rpb24gKGQpIHtcbiAgICAgICBcbiAgICAgICAgbGV0IGRhdGE6IGFueTtcbiAgICAgICAgbGV0IGRhdGEyOiBhbnk7XG4gICAgICAgIGRhdGEgPSBkWzJdO1xuICAgICAgICBkYXRhMiA9IGRhdGFbMF07XG4gICAgICAgIGlmIChkYXRhMikge1xuICAgICAgICAgIHJldHVybiBkYXRhMi52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgICAgIHZhciB0cmFuc2xhdGUgPSBbKChiYXJXaWR0aCAqIGkpICsgYmFyV2lkdGggLyAyKSwgKE1hdGguYWJzKHkoZFswXSkgLSB5KGRbMV0gLSBob3Jpem9udGFscGFkZGluZykpKV07XG4gICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHRyYW5zbGF0ZSArIFwiKVwiO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gIC5hcHBlbmQoXCJsYWJlbFwiKVxuICAgIC8vIC8vICAuYXR0cihcIndpZHRoXCIsIGJhcldpZHRoIC0gMSlcbiAgICAvLyAgLmF0dHIoXCJ5XCIsIChkLCBpbmRleCkgPT4ge1xuICAgIC8vICAgIHJldHVybiB5KGRbMV0pO1xuICAgIC8vICB9KVxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgLy8gICB0aGlzLnN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgLy8gICAuc2VsZWN0QWxsKFwiZ1wiKVxuICAgIC8vICAgLmRhdGEoIGNoYXJ0ZGF0YSlcbiAgICAvLyAgIC5lbnRlciggKS5hcHBlbmQoXCJnXCIpXG4gICAgLy8gICAvLyAuYXR0cihcImZpbGxcIiwgdGhpcy5jb2xvcilcbiAgICAvLyAgIC8vIC5zZWxlY3RBbGwoXCJyZWN0XCIpXG4gICAgLy8gICAuZGF0YSgoZCkgPT4ge1xuICAgIC8vICAgICByZXR1cm4gZDtcbiAgICAvLyAgIH0pXG4gICAgLy8gICBoaXN0b2dyYW1CYXIuZW50ZXIoICApXG4gICAgLy8gICAuYXBwZW5kKFwidGV4dFwiKVxuICAgIC8vICAgLy8gLmF0dHIoXCJ3aWR0aFwiLCBiYXJXaWR0aCAtIDEpXG4gICAgLy8gICAuYXR0cihcInlcIiwgKGQsIGluZGV4KSA9PiB7XG4gICAgLy8gICAgIHJldHVybiB5KGRbMV0pO1xuICAgIC8vICAgfSlcbiAgICAvLyAgICAuYXR0cihcImhlaWdodFwiLCAoZCwgaW5kZXgpID0+IHtcbiAgICAvLyAgICAgcmV0dXJuIE1hdGguYWJzKHkoZFswXSkgLSB5KGRbMV0gLSBob3Jpem9udGFscGFkZGluZykpO1xuICAgIC8vICAgfSlcbiAgICAvLyAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgLy8gICAgIHZhciB0cmFuc2xhdGUgPSBbYmFyV2lkdGggKiBpLCAwXTtcbiAgICAvLyAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgdHJhbnNsYXRlICsgXCIpXCI7XG4gICAgLy8gICB9KVxuICAgIC8vICAgLnRleHQoZnVuY3Rpb24oZCl7XG4gICAgLy8gICAgIGNvbnNvbGUubG9nKFwiYWtzYVwiKTtcbiAgICAvLyAgICAgICByZXR1cm4gXCJha3NhXCI7XG4gICAgLy8gICB9KVxuICAgIC8vICAgLnN0eWxlKFwiZm9udC13ZWlnaHRcIixcImJvbGRcIilcbiAgICAvLyAuYXR0cihcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXG4gICAgLy8gLmF0dHIoXCJmaWxsXCIsIChkKT0+e1xuICAgIC8vICAgICByZXR1cm4gXCJibGFja1wiO1xuICAgIC8vIH0pO1xuXG5cbiAgfVxuXG4gIGhpc3RvZ3JhbUNsaWNrKG9iajogYW55KSB7XG5cbiAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgbGV0IGRhdGEgPSB0aGlzLmRhdGFoaXN0b1swXTtcbiAgICBsZXQgbGFiZWwxID0gZGF0YVsxXTtcbiAgICBsZXQgbGFiZWwyID0gZGF0YVswXTtcbiAgICBpZiAob2JqLmxhYmVsLmxlbmd0aCkge1xuICAgICAgb2JqZWN0W2xhYmVsMiArIFwiOlwiXSA9IG9iai5sYWJlbDtcbiAgICAgIG9iamVjdFtsYWJlbDEgKyBcIjpcIl0gPSBvYmoudmFsdWU7XG4gICAgfVxuXG4gICAgdGhpcy5jaGFydENsaWNrKG9iamVjdCk7XG4gIH1cblxuXG4gIGxlZ2VuZENsaWNrKGV2ZW50OiBhbnkpIHtcblxuICAgIHRoaXMub25MZWdlbmRDbGljay5lbWl0KHRoaXMuZGF0YWhpc3RvKTtcblxuICB9XG5cbiAgdHJhbnNmb3JtRGF0YSgpIHtcbiAgICB0aGlzLmFycmF5ID0gW107XG4gICAgdGhpcy52YWx1ZXMgPSBbXTtcbiAgICB0aGlzLmRhdGFoaXN0by5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgdGhpcy52YWx1ZXMucHVzaChlbGVtZW50WzFdKTtcbiAgICB9KTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMudmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmFycmF5LnB1c2godGhpcy52YWx1ZXNbaV0pO1xuICAgIH1cbiAgfVxuXG4gIHBsb3RYYXhpcygpIHtcblxuICAgIHRoaXMueGF4aXNBcnJheSA9IFtdO1xuICAgIHRoaXMueGF4aXNBcnJheS5wdXNoKDApO1xuICAgIGxldCBuZXd2YWx1ZTogbnVtYmVyID0gMDtcbiAgICBsZXQgdmFsdWUgPSBNYXRoLmNlaWwoZDMubWF4KHRoaXMuYXJyYXkpKTtcblxuICAgIGlmICh2YWx1ZSAlIDEwID09IDApIHtcbiAgICAgIHZhbHVlID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlID0gKDEwIC0gdmFsdWUgJSAxMCkgKyB2YWx1ZTtcbiAgICB9XG4gICAgbGV0IHF1b3RpZW50ID0gdmFsdWUgLyA1O1xuICAgIHdoaWxlIChuZXd2YWx1ZSA8IHZhbHVlKSB7XG4gICAgICBuZXd2YWx1ZSA9IG5ld3ZhbHVlICsgcXVvdGllbnQ7XG4gICAgICB0aGlzLnhheGlzQXJyYXkucHVzaChuZXd2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcGxvdFlheGlzKCkge1xuXG4gICAgbGV0IHRlbXB2YWx1ZSA9IDA7XG4gICAgbGV0IGxlbmd0aG9mQXJyYXkgPSAwO1xuICAgIGxldCBsZW5ndGhjb3VudCA9IDA7XG4gICAgbGV0IHRlbXBsZW5ndGggPSAwO1xuICAgIGxldCBuZXd2YWx1ZTogbnVtYmVyID0gMDtcbiAgICB0aGlzLnlheGlzQXJyYXkgPSBbXTtcbiAgICB0aGlzLmhpc3RvZ3JhbWFycmF5ID0gW107XG4gICAgdGhpcy5sZW5ndGhhcnJheSA9IFtdO1xuICAgIHRoaXMuaGlzdG9ncmFtZGF0YSA9IFtdO1xuICAgIHRoaXMuYXJyYXlvZkxlbmd0aCA9IFtdO1xuICAgIHRoaXMuY2hhcnREYXRhID0gW107XG4gICAgdGhpcy54YXhpc0FycmF5LmZvckVhY2goZWxlbWVudDEgPT4ge1xuICAgICAgdGhpcy55YXhpc0FycmF5ID0gW107XG4gICAgICB0aGlzLmFycmF5LmZvckVhY2goZWxlbWVudDIgPT4ge1xuXG4gICAgICAgIGlmICh0ZW1wdmFsdWUgPCBlbGVtZW50MiAmJiBlbGVtZW50MiA8PSBlbGVtZW50MSkge1xuICAgICAgICAgIHRoaXMueWF4aXNBcnJheS5wdXNoKGVsZW1lbnQyKTtcbiAgICAgICAgfVxuICAgICAgICBsZW5ndGhvZkFycmF5ID0gdGhpcy55YXhpc0FycmF5Lmxlbmd0aDtcbiAgICAgIH0pO1xuICAgICAgaWYgKHRlbXBsZW5ndGggPiBsZW5ndGhvZkFycmF5KSB7XG4gICAgICAgIGxlbmd0aGNvdW50ID0gdGVtcGxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBsZW5ndGhjb3VudCA9IGxlbmd0aG9mQXJyYXk7XG4gICAgICB9XG4gICAgICB0ZW1wbGVuZ3RoID0gbGVuZ3RoY291bnQ7XG4gICAgICB0ZW1wdmFsdWUgPSBlbGVtZW50MTtcbiAgICAgIC8vdGhpcy5oaXN0b2dyYW1hcnJheS5wdXNoKHRoaXMueWF4aXNBcnJheSk7XG4gICAgICB0aGlzLmxlbmd0aGFycmF5LnB1c2gobGVuZ3Rob2ZBcnJheSk7XG4gICAgfSk7XG5cbiAgICBsZXQgdmFsdWUgPSBNYXRoLmNlaWwodGVtcGxlbmd0aCk7XG4gICAgbGV0IHF1b3RpZW50ID0gdmFsdWUgLyA1O1xuICAgIHdoaWxlIChuZXd2YWx1ZSA8PSB2YWx1ZSkge1xuICAgICAgbmV3dmFsdWUgPSBuZXd2YWx1ZSArIHF1b3RpZW50O1xuICAgICAgdGhpcy55YXhpc0RhdGEucHVzaChuZXd2YWx1ZSlcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuaGlzdG9ncmFtYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuaGlzdG9ncmFtZGF0YS5wdXNoKHRoaXMuaGlzdG9ncmFtYXJyYXlbaV0pO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5sZW5ndGhhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5hcnJheW9mTGVuZ3RoLnB1c2godGhpcy5sZW5ndGhhcnJheVtpXSk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hcnJheW9mTGVuZ3RoLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgZGF0YSA9IHt9O1xuICAgICAgZGF0YVtcInZhbHVlXCJdID0gdGhpcy5hcnJheW9mTGVuZ3RoW2ldO1xuICAgICAgdGhpcy5jaGFydERhdGEucHVzaChkYXRhKTtcbiAgICB9XG4gICAgdGhpcy5hcnJheSA9IFtdO1xuXG4gIH1cblxuICByZXNpemUoKSB7XG5cbiAgICB0aGlzLnN2Z3dpZHRoID0gMDtcbiAgICB0aGlzLnN2Zy5zZWxlY3RBbGwoXCIqXCIpLnJlbW92ZSgpO1xuXG4gICAgdGhpcy5yZXNpemVmbGFnID0gdHJ1ZTtcbiAgICB0aGlzLnN2Z3dpZHRoID0gdGhpcy5kaXZpZC5uYXRpdmVFbGVtZW50Lm9mZnNldFdpZHRoO1xuXG4gICAgdGhpcy50cmFuc2Zvcm1EYXRhKClcbiAgICB0aGlzLnBsb3RYYXhpcygpO1xuICAgIHRoaXMucGxvdFlheGlzKCk7XG4gICAgdGhpcy50b29sdGlwRGF0YSgpO1xuICAgIHRoaXMuZGF0YWZvckNoYXJ0KCk7XG4gICAgdGhpcy50cmFuc2Zvcm1EYXRhMSh0aGlzLmZpbmFsZGF0YWFycmF5KTtcbiAgICB0aGlzLnBsb3RDaGFydCgpO1xuICB9XG5cbiAgZGF0YWZvckNoYXJ0KCkge1xuICAgIHRoaXMuZmluYWxkYXRhYXJyYXkgPSBbXSA9IFtdO1xuICAgIGxldCBpbml0aWFsQXJyYXk6IGFueVtdID0gW107XG4gICAgbGV0IHRlbXBhcnJheTogYW55W10gPSBbXTtcbiAgICBpbml0aWFsQXJyYXkucHVzaCgnbGV2ZWwnKTtcbiAgICBsZXQgbWF4RWxlbWVudCA9IE1hdGgubWF4LmFwcGx5KG51bGwsIHRoaXMuYXJyYXlvZkxlbmd0aCk7XG4gICAgbGV0IG1heGxlbmd0aCA9IG1heEVsZW1lbnQ7XG4gICAgbGV0IG4gPSAxO1xuICAgIHdoaWxlIChuIDw9IG1heEVsZW1lbnQpIHtcbiAgICAgIGluaXRpYWxBcnJheS5wdXNoKCcnICsgbilcbiAgICAgIG4rKztcbiAgICB9XG4gICAgaW5pdGlhbEFycmF5LnB1c2goJ3Rvb2x0aXBkYXRhJyk7XG4gICAgbGV0IGxlbmd0aCA9IHRoaXMuYXJyYXlvZkxlbmd0aC5sZW5ndGg7XG4gICAgbGV0IG51bSA9IDE7XG4gICAgbGV0IG51bWJlciA9IDE7XG4gICAgbGV0IGogPSAwO1xuICAgIHRoaXMuZmluYWxkYXRhYXJyYXkucHVzaChpbml0aWFsQXJyYXkpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFycmF5b2ZMZW5ndGgubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCB2YWx1ZSA9IHRoaXMuYXJyYXlvZkxlbmd0aFtpXTtcbiAgICAgIGxldCB0ZW1wdmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRlbXBhcnJheSA9IFtdO1xuICAgICAgdGVtcGFycmF5LnB1c2goJycgKyBpKTtcbiAgICAgIG1heEVsZW1lbnQgPSBtYXhsZW5ndGg7XG4gICAgICBpZiAodmFsdWUgPiAwKSB7XG4gICAgICAgIHdoaWxlICh2YWx1ZSAhPSAwKSB7XG4gICAgICAgICAgdGVtcGFycmF5LnB1c2gobnVtYmVyKTtcbiAgICAgICAgICB2YWx1ZS0tXG4gICAgICAgIH1cbiAgICAgICAgbWF4RWxlbWVudCA9IG1heEVsZW1lbnQgLSB0ZW1wdmFsdWU7XG5cbiAgICAgICAgd2hpbGUgKG1heEVsZW1lbnQgIT0gMCkge1xuICAgICAgICAgIHRlbXBhcnJheS5wdXNoKDApO1xuICAgICAgICAgIG1heEVsZW1lbnQtLTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHdoaWxlIChtYXhFbGVtZW50ICE9IDApIHtcbiAgICAgICAgICB0ZW1wYXJyYXkucHVzaCgwKTtcbiAgICAgICAgICBtYXhFbGVtZW50LS07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRlbXBhcnJheS5wdXNoKHRoaXMudG9vbHRpcEFycmF5W2pdKVxuICAgICAgdGhpcy5maW5hbGRhdGFhcnJheS5wdXNoKHRlbXBhcnJheSk7XG4gICAgICBqKys7XG4gICAgfVxuICB9XG5cblxuICB0b29sdGlwRGF0YSgpIHtcblxuICAgIGxldCBhcnJheW9mVG9vbHRpcDogYW55W10gPSBbXTtcbiAgICBsZXQgb2JqID0geyBcImxhYmVsXCI6IFwiXCIsIFwidmFsdWVcIjogXCJcIiB9O1xuICAgIHRoaXMuZGF0YWhpc3RvLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBvYmogPSB7IFwibGFiZWxcIjogXCJcIiwgXCJ2YWx1ZVwiOiBcIlwiIH07XG4gICAgICBvYmpbXCJsYWJlbFwiXSA9IGVsZW1lbnRbMF07XG4gICAgICBvYmpbXCJ2YWx1ZVwiXSA9IGVsZW1lbnRbMV07XG4gICAgICBhcnJheW9mVG9vbHRpcC5wdXNoKG9iaik7XG4gICAgfSk7XG5cbiAgICBsZXQgdmFsdWUxID0gdGhpcy54YXhpc0FycmF5WzBdO1xuXG4gICAgbGV0IHRvb2x0aXBkYXRhOiBhbnlbXSA9IFtdO1xuICAgIGZvciAobGV0IGogPSAxOyBqIDwgdGhpcy54YXhpc0FycmF5Lmxlbmd0aDsgaisrKSB7XG4gICAgICB0b29sdGlwZGF0YSA9IFtdO1xuICAgICAgbGV0IHZhbHVlMiA9IHRoaXMueGF4aXNBcnJheVtqXTtcblxuICAgICAgYXJyYXlvZlRvb2x0aXAuZm9yRWFjaChlbGVtZW50ID0+IHtcblxuICAgICAgICBpZiAodmFsdWUxIDw9IGVsZW1lbnQudmFsdWUgJiYgZWxlbWVudC52YWx1ZSA8PSB2YWx1ZTIpIHtcblxuICAgICAgICAgIGxldCB0b29sdGlwb2JqID0geyBcImxhYmVsXCI6IFwiXCIsIFwidmFsdWVcIjogXCJcIiB9XG4gICAgICAgICAgdG9vbHRpcG9ialtcImxhYmVsXCJdID0gZWxlbWVudFtcImxhYmVsXCJdO1xuICAgICAgICAgIHRvb2x0aXBvYmpbXCJ2YWx1ZVwiXSA9IGVsZW1lbnRbXCJ2YWx1ZVwiXTtcbiAgICAgICAgICB0b29sdGlwZGF0YS5wdXNoKHRvb2x0aXBvYmopO1xuXG5cbiAgICAgICAgfVxuXG4gICAgICB9KTtcbiAgICAgIHRoaXMudG9vbHRpcEFycmF5LnB1c2godG9vbHRpcGRhdGEpO1xuICAgICAgdmFsdWUxID0gdmFsdWUyO1xuICAgIH1cbiAgfVxuXG5cbiAgc2V0S2V5KG9iajogYW55KSB7XG5cbiAgICBsZXQgb2JqZWN0ID0ge307XG4gICAgbGV0IGRhdGEgPSB0aGlzLmRhdGFoaXN0b1swXTtcbiAgICBsZXQgbGFiZWwxID0gZGF0YVsxXTtcbiAgICBsZXQgbGFiZWwyID0gZGF0YVswXTtcblxuICAgIG9iamVjdFtsYWJlbDIgKyBcIjpcIl0gPSBvYmoubGFiZWw7XG4gICAgb2JqZWN0W2xhYmVsMSArIFwiOlwiXSA9IG9iai52YWx1ZTtcblxuICAgIHJldHVybiAodGhpcy50b29sVGlwRm9yQmFyKG9iamVjdCkpXG4gIH1cblxuICBwbG90TGluZShnLCB4LCB5LCBoZWlnaHQsIHdpZHRoKSB7XG4gICAgaWYgKHRoaXMuaFNjYWxlKSB7XG4gICAgICBnLmFwcGVuZCgnZycpXG4gICAgICAgIC5hdHRyKFwiY29sb3JcIiwgXCJsaWdodGdyZXlcIilcbiAgICAgICAgLmNhbGwoZDMuYXhpc0xlZnQoeSlcbiAgICAgICAgICAudGlja1NpemUoLXdpZHRoKS50aWNrRm9ybWF0KCcnKSk7XG4gICAgfVxuICB9XG59XG4iXX0=